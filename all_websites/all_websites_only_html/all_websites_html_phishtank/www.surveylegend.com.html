<!doctype html><html xmlns:ng="http://angularjs.org" style=""><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><title>SurveyLegend Survey</title><meta name="description" content="Your feedback is highly appreciated"><meta property="fb:app_id" content="166254920096473"><meta property="og:title" content="Quick survey"><meta property="og:description" content="Your feedback is highly appreciated"><meta property="og:image:url" content="http://www.surveylegend.com/img/survey-preview-social-media.png"><meta property="og:image:secure_url" content="https://www.surveylegend.com/img/survey-preview-social-media.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="533"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Quick survey"><meta name="twitter:description" content="Your feedback is highly appreciated"><meta name="twitter:image" content="https://www.surveylegend.com/img/survey-preview-social-media.png"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,minimum-scale=1,maximum-scale=1"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><style>body{margin:0}</style><style>@charset "UTF-8";.ng-cloak,.ng-hide:not(.ng-hide-animate),.x-ng-cloak,[data-ng-cloak],[ng-cloak],[ng\:cloak],[x-ng-cloak]{display:none!important}ng\:form{display:block}.ng-animate-shim{visibility:hidden}.ng-anchor{position:absolute}</style><style>@charset "UTF-8";.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}.uib-datepicker .uib-title{width:100%}.uib-day button,.uib-month button,.uib-year button{min-width:100%}.uib-datepicker-popup.dropdown-menu{display:block}.uib-button-bar{padding:10px 9px 2px}.uib-time input{width:50px}[uib-typeahead-popup].dropdown-menu{display:block}</style><script>!function(e){var o=!!e.opera||0<=navigator.userAgent.indexOf(" OPR/");e.broswerDetect={isOpera:o,isFirefox:"undefined"!=typeof InstallTrigger,isSafari:0<Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor"),isChrome:!!e.chrome&&!o,isIE:!!document.documentMode}}(window)</script><script>!function(e){"use strict";e.console||(e.console={});for(var o,i,n=e.console,r=function(){},t=["memory"],l="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");o=t.pop();)n[o]||(n[o]={});for(;i=l.pop();)n[i]||(n[i]=r)}("undefined"==typeof window?this:window)</script><script>!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).mitt=n()}(this,function(){return function(f){return{all:f=f||new Map,on:function(e,n){var t=f.get(e);t&&t.push(n)||f.set(e,[n])},off:function(e,n){e=f.get(e);e&&e.splice(e.indexOf(n)>>>0,1)},emit:function(n,t){(f.get(n)||[]).slice().map(function(e){e(t)}),(f.get("*")||[]).slice().map(function(e){e(n,t)})}}}})</script><style>.loading{display:flex;flex-direction:column;align-items:center;position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;justify-content:center}.loading__box{width:16px;height:16px}.loading__box-large{width:24px;height:24px}.loading__box-huge{width:50px;height:50px}.loading__ellipse{animation:loading-ellipse-tail 2.55s ease-in-out infinite,loading-ellipse-rotation .7s linear infinite;transform-origin:50% 50%;fill:transparent;stroke:#667d8d;stroke-dasharray:60;stroke-dashoffset:20;stroke-linecap:round;stroke-width:1.5}@keyframes loading-ellipse-tail{0%,to{stroke-dashoffset:5}35%,45%{stroke-dashoffset:57.2}}@keyframes loading-ellipse-rotation{0%{transform:scaleX(-1) rotate(0)}50%{transform:scaleX(-1) rotate(-180deg)}to{transform:scaleX(-1) rotate(-1turn)}}</style><style>.has-code-font{font-family:'Source Code Pro',Menlo,monospace}@-webkit-viewport{width:device-width}@-moz-viewport{width:device-width}@-o-viewport{width:device-width}@-ms-viewport{width:device-width}@viewport{width:device-width}#start-page-image{z-index:9999;position:absolute;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;background-color:#fafafa;cursor:progress;opacity:1}.loading-container{display:block;height:40vh;width:40vh;max-height:460px;max-width:410px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.15))}#start-logo{position:relative;display:block;height:100%;width:100%;margin:auto}#start-logo .circle-loader{stroke:#89d9ff;stroke-width:10;stroke-dasharray:1380;stroke-dashoffset:1380;fill-opacity:0}.loading-too-long{text-align:center;animation:show-warning 15s forwards}@keyframes show-warning{0%{display:none;opacity:0}90%{display:block;opacity:0}100%{display:block;opacity:8}}.logo-top-1{animation:blink-top-1 1.7s infinite ease}@keyframes blink-top-1{0%,100%,15%,5%{fill:#dd534a}10%,12%{fill:#f6ad9e}}.logo-top-2{animation:blink-top-2 1.7s infinite ease}@keyframes blink-top-2{0%,100%,17%,7%{fill:#c8534c}12%,14%{fill:#f6ad9e}}.logo-top-3{animation:blink-top-3 1.7s infinite ease}@keyframes blink-top-3{0%,100%,12%,22%{fill:#dd534a}17%,19%{fill:#f6ad9e}}.logo-top-4{animation:blink-top-4 1.7s infinite ease}@keyframes blink-top-4{0%,100%,22%,32%{fill:#de5750}26%,28%{fill:#f6ad9e}}.logo-top-5{animation:blink-top-5 1.7s infinite ease}@keyframes blink-top-5{0%,100%,24%,34%{fill:#de5750}29%,31%{fill:#f6ad9e}}.logo-top-6{animation:blink-top-6 1.7s infinite ease}@keyframes blink-top-6{0%,100%,30%,40%{fill:#e2655f}35%,37%{fill:#f6ad9e}}.logo-top-7{animation:blink-top-7 1.7s infinite ease}@keyframes blink-top-7{0%,100%,35%,45%{fill:#f37c5c}40%{fill:#f6ad9e}}.logo-top-8{animation:blink-top-8 1.7s infinite ease}@keyframes blink-top-8{0%,100%,37%,47%{fill:#f37847}42%,44%{fill:#f6ad9e}}.logo-top-9{animation:blink-top-9 1.7s infinite ease}@keyframes blink-top-9{0%,100%,45%,55%{fill:#f68b74}50%,52%{fill:#f6ad9e}}.logo-top-10{animation:blink-top-10 1.7s infinite ease}@keyframes blink-top-10{0%,100%,50%,60%{fill:#f28671}55%,57%{fill:#f6ad9e}}.logo-top-11{animation:blink-top-11 1.7s infinite ease}@keyframes blink-top-11{0%,100%,52%,62%{fill:#f0805f}57%,59%{fill:#f6ad9e}}.logo-btm-1{animation:blink-btm-1 1.7s infinite ease}@keyframes blink-btm-1{0%,100%,12%,27%{fill:#b04f4f}17%,22%{fill:#dd6a64}}.logo-btm-2{animation:blink-btm-2 1.7s infinite ease}@keyframes blink-btm-2{0%,100%,14%,29%{fill:#bf4d4e}19%,24%{fill:#dd7067}}.logo-btm-3{animation:blink-btm-3 1.7s infinite ease}@keyframes blink-btm-3{0%,100%,19%,34%{fill:#c8534c}24%,29%{fill:#f69b8e}}.logo-btm-4{animation:blink-btm-4 1.7s infinite ease}@keyframes blink-btm-4{0%,100%,22%,37%{fill:#d8614f}27%,32%{fill:#f6947f}}.logo-btm-5{animation:blink-btm-5 1.7s infinite ease}@keyframes blink-btm-5{0%,100%,37%,52%{fill:#e86a47}42%,47%{fill:#f6ad9e}}.logo-btm-6{animation:blink-btm-6 1.7s infinite ease}@keyframes blink-btm-6{0%,100%,40%,55%{fill:#e66950}45%,50%{fill:#f6ad9e}}.logo-btm-7{animation:blink-btm-7 1.7s infinite ease}@keyframes blink-btm-7{0%,100%,45%,60%{fill:#e3775e}50%,55%{fill:#f6ad9e}}</style><script>!function(n){"use strict";var o=n.mitt(),a=n.document,r=0,s=function(){};function t(e){var o=(e=e||{}).percent,t="function"==typeof e.onComplete?e.onComplete:s;r+=o;o=0<(o=parseInt(e.duration))?o:10,e=1380-13.8*r;void 0!==n.jQuery?n.jQuery("#circle-loader2").animate({strokeDashoffset:e},o,"linear",t):(a.getElementById("circle-loader2").style.strokeDashoffset=e,t())}function l(){var e=a.getElementsByClassName("loading");e.length&&e[0].remove(),a.getElementsByClassName("loading-container")[0].classList.remove("ng-hide")}(n.SurveyLegendEventBus=o).on("update-loading-progress",t),o.on("display-loader",l),o.on("remove-loader",function e(){o.off("remove-loader",e);o.off("update-loading-progress",t);o.off("display-loader",l);a.getElementById("start-page-image").remove()})}(window)</script><style>@import url(https://fonts.googleapis.com/css?family=Source+Code+Pro);.has-code-font{font-family:'Source Code Pro',Menlo,monospace}body{background:#f3f3f3}.pre-tag{position:absolute;width:100%;height:100%;margin:15px;background:url(../../../../../img/animated-gifs/loading.gif) no-repeat top left;background-size:16px}.menuFixed{position:fixed!important;top:0!important}</style><link href="styles/participation-23ac2447.css?__inline=true" rel="stylesheet"><script>var site="surveylegend";window.firebaseUrl="https://surveylegend.firebaseio.com/v2/",window.websiteUrl="https://www."+site+".com",window.apiUrl="https://api."+site+".com",window.uploadUrl="https://upload."+site+".com",window.SURVEYLEGEND_DEBUG=!1</script><script>!function(e,n,t,a,d){function r(){var e=n.createElement("script");e.async=!0,e.src="//radar.cedexis.com/1/11475/radar.js",n.body.appendChild(e)}/\bMSIE 6/i.test(e.navigator.userAgent)||(e[t]?e[t](d,r,!1):e[a]&&e[a]("on"+d,r))}(window,document,"addEventListener","attachEvent","load")</script><script>!function(e,a,t,n,g,o){e.GoogleAnalyticsObject=n,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=+new Date,g=a.createElement(t),o=a.getElementsByTagName(t)[0],g.async=1,g.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(g,o)}(window,document,"script","ga"),ga("create","UA-51585375-1","auto"),ga("require","displayfeatures"),ga("set","transport","beacon"),ga("set","anonymizeIp",!0)</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-W9GH5VKVYN"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-W9GH5VKVYN",{anonymize_ip:!0})</script></head><body id="participation-app" class="public-analytics-after-submit" style=""><div id="start-page-image"><div class="loading"><svg class="loading__box-huge" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><ellipse class="loading__ellipse" cx="12" cy="12" rx="10" ry="10"/></svg><div class="loading-too-long" style="opacity:0;font-family:sans-serif"><h2>It's taking too long to load</h2><p>You may have "content blockers" on your browser. In this case, please reload the page without content blockers.</p><p>Otherwise, your internet connection may be too slow right now.</p></div></div><div class="loading-container ng-hide"><svg id="start-logo" width="600" height="601" viewBox="0 0 600 601"><defs><linearGradient x1="-.001%" y1="50.001%" x2="100.001%" y2="50.001%"><stop stop-color="#C8534C" offset="0%"/><stop stop-color="#F0805F" offset="100%"/></linearGradient><radialGradient fx="50%" fy="50%" r="49.99%"><stop stop-color="#BE1E2D" stop-opacity="0" offset="0%"/><stop stop-color="#BE1E2D" stop-opacity="0" offset="67.02%"/><stop stop-color="#BE1E2D" stop-opacity=".4" offset="100%"/></radialGradient></defs><g><g><path id="circle-loader2" class="circle-loader" stroke="#89D9FF" fill="#ffffff" d="M299.995 81c121.23 0 219.5 98.27 219.5 219.5 0 121.232-98.268 219.5-219.5 219.5-121.22 0-219.49-98.268-219.49-219.5 0-121.23 98.27-219.5 219.49-219.5z"/></g><path fill="#fff" d="M299.995 88.252c117.224 0 212.247 95.026 212.247 212.247 0 117.224-95.023 212.248-212.247 212.248-117.21 0-212.238-95.024-212.238-212.25 0-117.22 95.027-212.246 212.238-212.246z"/><linearGradient id="a" gradientUnits="userSpaceOnUse" x1="875.988" y1="1876.986" x2="1214.022" y2="1876.986" gradientTransform="translate(-745 -1553.783)"><stop offset="0" stop-color="#C8534C"/><stop offset="1" stop-color="#F0805F"/></linearGradient><path class="logo-bg" fill="url(#a)" d="M469.02 269.616l-66.547-68.73H197.528l-66.54 68.73L299.995 445.52z"/><path class="logo-top-1" fill="#BA4542" d="M197.528 200.886l-23.16 23.875 40.774-23.874z"/><path class="logo-top-2" fill="#C8534C" d="M130.988 269.616h49.055l-5.676-44.855z"/><path class="logo-top-3" fill="#DD534A" d="M215.142 200.886l-40.775 23.875 5.676 44.856 63.193-45.634z"/><path class="logo-top-4" fill="#DE5750" d="M215.142 200.886l28.094 23.096 56.76-23.096z"/><path class="logo-top-5" fill="#DE5750" d="M243.236 223.982l-63.193 45.634h119.952z"/><path class="logo-top-6" fill="#E2655F" d="M299.995 200.886l-56.76 23.096 56.76 45.634 56.778-45.634z"/><path class="logo-top-7" fill="#F37C5C" d="M299.995 200.886l56.778 23.096 28.084-23.096z"/><path class="logo-top-8" fill="#F37847" d="M356.773 223.982l-56.778 45.634H419.97z"/><path class="logo-top-9" fill="#F68B74" d="M425.62 224.76l-40.763-23.874-28.084 23.096 63.198 45.634z"/><path class="logo-top-10" fill="#F28671" d="M402.473 200.886h-17.616l40.762 23.875z"/><path class="logo-top-11" fill="#F0805F" d="M425.62 224.76l-5.65 44.856h49.05z"/><path class="logo-btm-1" fill="#B04F4F" d="M180.043 269.616h-49.055l108.29 112.688z"/><path class="logo-btm-2" fill="#BF4D4E" d="M279.585 382.304l-99.542-112.688 59.234 112.688 60.718 63.217z"/><path class="logo-btm-3" fill="#C8534C" d="M180.043 269.616l99.542 112.688 20.41-112.688z"/><path class="logo-btm-4" fill="#D8614F" d="M299.995 269.616l-20.41 112.688 20.41 63.217 20.43-63.216z"/><path class="logo-btm-5" fill="#E86A47" d="M299.995 269.616l20.43 112.688 99.546-112.688z"/><path class="logo-btm-6" fill="#E66950" d="M320.426 382.304l-20.43 63.217 60.736-63.216 59.24-112.688z"/><path class="logo-btm-7" fill="#E3775E" d="M419.97 269.616l-59.238 112.688 108.29-112.688z"/><path class="logo-check" opacity=".9" fill="#fff" enable-background="new" d="M406.03 269.616h-3.507l-32.92-31.4-32.083 31.4h2.76l-34.188 33.604.318 1.688-6.225 6.674-6.627-6.444.34-1.834-31.586-31.814-32.87 32.692 54.462 54.272-.36 1.972 16.482 16.7.02-.02 16.472-16.367-.317-1.82z"/></g></svg><div class="loading-too-long" style="opacity:0;font-family:sans-serif"><h2>It's taking too long to load</h2><p>You may have "content blockers" on your browser. In this case, please reload the page without content blockers.</p><p>Otherwise, your internet connection may be too slow right now.</p></div></div></div><div id="ParticipateArea"><div id="ParticipationApp"><div class="surveylegend-survey ng-cloak" ng-controller="ParticipationCtrl"><div id="participation-area"><div class="reset-timer" ng-click="ParticipationCtrl.onRestartSurvey()" ng-if="ParticipationCtrl.kioskMode && ParticipationCtrl.secondsLeft > 0"><div class="reset-timer-content has-icon-left"><span class="reset-timer-icon is-icon"></span> <span class="second-clock-hand is-icon"></span> <span class="seconds-left">{{ ParticipationCtrl.secondsLeft }}</span> <span>s</span></div></div><sl-survey-item-list-box survey-items="ParticipationCtrl.surveyItems" answers="ParticipationCtrl.answers" on-update-answer="ParticipationCtrl.onUpdateAnswer(itemId,value)" on-click-question-media="ParticipationCtrl.onClickQuestionMedia(itemId)" welcome-page="ParticipationCtrl.survey.welcomePage" on-click-welcome-page="ParticipationCtrl.onStartSurvey()" on-click-welcome-page-media="ParticipationCtrl.onClickWelcomePageMedia()" survey-started="{{ ParticipationCtrl.surveyStarted }}" thank-you-page="ParticipationCtrl.survey.thankYouPage" on-click-thank-you-page="ParticipationCtrl.onClickThankYouPage()" on-click-thank-you-page-media="ParticipationCtrl.onClickThankYouPageMedia()" submit-btn-label="{{ ParticipationCtrl.survey.submitBtnLabel }}" on-submit-survey="ParticipationCtrl.onSubmitSurvey(answers)" survey-submitted="{{ ParticipationCtrl.surveySubmitted }}" on-select-page="ParticipationCtrl.onSelectPage(page, skipValidation)" current-page="{{ ParticipationCtrl.currentPage }}" hide-page-numbers="{{ ParticipationCtrl.survey.logicEnabled }}" banner="ParticipationCtrl.banner" on-click-banner="ParticipationCtrl.onClickBanner()" logo="ParticipationCtrl.survey.logo" on-click-logo="ParticipationCtrl.onClickLogo()" media-path="{{ ParticipationCtrl.mediaPath }}" right-to-left="{{ ParticipationCtrl.survey.rightToLeft }}" on-page-rendered="ParticipationCtrl.onFinishedRenderingPage(page)" theme-classes="{{ ParticipationCtrl.themeClasses }}" disable-back-button="{{ ParticipationCtrl.survey.disableBackButton }}" hide-submit-button="{{ ParticipationCtrl.survey.hideSubmitButton }}" display-question-numbers="{{ ParticipationCtrl.displayQuestionNumbers }}"></sl-survey-item-list-box><div ng-show="ParticipationCtrl.displayAnalyticsScrollButton" class="jumper ng-hide"><div id="ball" class="ball-bounce-animation" ng-click="ParticipationCtrl.onDisplayAnalytics()"></div></div></div></div></div></div><div id="LiveAnalyticsApp" class="ng-cloak"><div id="TopBar" class="main-navigation-bar in-public-analytics"><span ng-if="dropdown.displaySignUp || liveAnalytics.shareSurvey || liveAnalytics.shareResults"><sl-share-dropdown display-survey-link="{{ liveAnalytics.shareSurvey }}" survey-link="{{ liveAnalytics.surveyLink }}" more-info-survey-fn="dropdown.readMoreSharingSurvey()" display-results-link="{{ liveAnalytics.shareResults && liveAnalytics.publicLinkEnabled }}" results-link="{{ liveAnalytics.publicLink }}" more-info-results-fn="dropdown.readMoreSharingResults()" display-signup="{{ dropdown.displaySignUp }}" signup-fn="dropdown.signUpFn()" class="share-data-dropdown"></sl-share-dropdown></span><div class="top-logo-shared-analytics is-normal-btn has-icon-only ng-cloak" ng-if="logoPath.length > 0" ng-click="goToWebsite()"></div><span class="participate share-data-btn is-normal-btn has-icon-left trim-text-when-small ng-cloak" ng-if="liveAnalytics.shareSurvey" ng-click="participate()"><span ng-bind="::participateLabel"></span></span></div><div class="live-analytics-container"><div id="working-scroll-area" class="participation-stats"><div id="ParticipationBox"><div id="ParticipationDonut"><sl-participation-donut firebase-url="{{ participationDonutUrl }}" only-display-percentages="{{ liveAnalytics.onlyDisplayPercentages }}"><div class="pre-tag"></div></sl-participation-donut></div></div><div id="WorldDominationMap" class="sl-chart-item"><sl-world-domination-map countries="countries" only-display-percentages="{{ liveAnalytics.onlyDisplayPercentages }}"><div class="sl-card-title">Geo<span class="hide-on-very-tiny-screens">graphical</span> reach</div><div class="pre-tag"></div></sl-world-domination-map></div><div id="ChartItemList"><sl-chart-item-list survey-items="surveyItems" firebase-url="{{ chartItemListUrl }}" media-path="{{ mediaPath }}" right-to-left="{{ liveAnalytics.rightToLeft }}" only-display-percentages="{{ liveAnalytics.onlyDisplayPercentages }}"><div class="sl-card-title">Survey Items</div><div class="pre-tag"></div></sl-chart-item-list></div><div id="PublishCards" class="ng-cloak"><span ng-if="surveyLink.length > 0" class="survey-link-card"><sl-publish-link-card header-text="{{ ::labels.surveyShare }}" link="{{ surveyLink }}" display-link="true"></sl-publish-link-card></span><span ng-if="resultsLink.length > 0" class="result-link-card"><sl-publish-link-card header-text="{{ ::labels.resultsShare }}" link="{{ resultsLink }}" display-link="true"></sl-publish-link-card></span></div></div></div></div><script>!function(e){("object"!=typeof exports||"undefined"==typeof module)&&"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function e(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})}function t(n){return new this(function(r,e){if(!n||void 0===n.length)return e(new TypeError(typeof n+" "+n+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(n);if(0===i.length)return r([]);for(var f=i.length,t=0;i.length>t;t++)!function t(n,e){if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return o.call(e,function(e){t(n,e)},function(e){i[n]={status:"rejected",reason:e},0==--f&&r(i)}),0}i[n]={status:"fulfilled",value:e},0==--f&&r(i)}(t,i[t])})}function c(e){return e&&void 0!==e.length}function n(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],a(e,this)}function r(n,o){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,i._immediateFn(function(){var e,t=1===n._state?o.onFulfilled:o.onRejected;if(null!==t){try{e=t(n._value)}catch(e){return void u(o.promise,e)}f(o.promise,e)}else(1===n._state?f:u)(o.promise,n._value)})):n._deferreds.push(o)}function f(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void a((o=n,r=e,function(){o.apply(r,arguments)}),t)}t._state=1,t._value=e,l(t)}catch(e){u(t,e)}var o,r}function u(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)r(e,e._deferreds[t]);e._deferreds=null}function a(e,t){var n=!1;try{e(function(e){n||(n=!0,f(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}var o=setTimeout;i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(o,e){var t=new this.constructor(n);return r(this,new function(e,t,n){this.onFulfilled="function"==typeof o?o:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(0,e,t)),t},i.prototype.finally=e,i.all=function(t){return new i(function(r,i){if(!c(t))return i(new TypeError("Promise.all accepts an array"));var f=Array.prototype.slice.call(t);if(0===f.length)return r([]);for(var u=f.length,e=0;f.length>e;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return o.call(e,function(e){t(n,e)},i),0}f[n]=e,0==--u&&r(f)}catch(e){i(e)}}(e,f[e])})},i.allSettled=t,i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(n){return new i(function(e,t){t(n)})},i.race=function(r){return new i(function(e,t){if(!c(r))return t(new TypeError("Promise.race accepts an array"));for(var n=0,o=r.length;n<o;n++)i.resolve(r[n]).then(e,t)})},i._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){o(e,0)},i._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var s=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();"function"!=typeof s.Promise?s.Promise=i:s.Promise.prototype.finally?s.Promise.allSettled||(s.Promise.allSettled=t):s.Promise.prototype.finally=e})</script><script>!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.WHATWGFetch={})}(this,function(a){"use strict";var e,r,h="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==h&&h,o="URLSearchParams"in h,n="Symbol"in h&&"iterator"in Symbol,u="FileReader"in h&&"Blob"in h&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in h,f="ArrayBuffer"in h;function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function c(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function y(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(r){return new Promise(function(t,e){r.onload=function(){t(r.result)},r.onerror=function(){e(r.error)}})}function l(t){var e=new FileReader,r=p(e);return e.readAsArrayBuffer(t),r}function b(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,(this._bodyInit=t)?"string"==typeof t?this._bodyText=t:u&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:o&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():f&&u&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=b(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f&&(ArrayBuffer.prototype.isPrototypeOf(t)||r(t))?this._bodyArrayBuffer=b(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u&&(this.blob=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=y(this);return t?t:ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)}return this.blob().then(l)}),this.text=function(){var t,e,r=y(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=p(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),o=0;o<e.length;o++)r[o]=String.fromCharCode(e[o]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}f&&(e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(t){return t&&-1<e.indexOf(Object.prototype.toString.call(t))}),d.prototype.append=function(t,e){t=s(t),e=c(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},d.prototype.delete=function(t){delete this.map[s(t)]},d.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},d.prototype.set=function(t,e){this.map[s(t)]=c(e)},d.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},d.prototype.keys=function(){var r=[];return this.forEach(function(t,e){r.push(e)}),t(r)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},d.prototype.entries=function(){var r=[];return this.forEach(function(t,e){r.push([e,t])}),t(r)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(t,e){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,o=(e=e||{}).body;if(t instanceof E){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(r=e.method||this.method||"GET",t=r.toUpperCase(),-1<w.indexOf(t)?t:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o),"GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache||((e=/([?&])_=[^&]*/).test(this.url)?this.url=this.url.replace(e,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime())}function T(t){var r=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),r.append(decodeURIComponent(t),decodeURIComponent(e)))}),r}function A(t,e){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},m.call(E.prototype),m.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},A.error=function(){var t=new A(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];A.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new A(null,{status:e,headers:{location:t}})},a.DOMException=h.DOMException;try{new a.DOMException}catch(t){a.DOMException=function(t,e){this.message=t,this.name=e;t=Error(t);this.stack=t.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function g(o,s){return new Promise(function(n,t){var e=new E(o,s);if(e.signal&&e.signal.aborted)return t(new a.DOMException("Aborted","AbortError"));var i=new XMLHttpRequest;function r(){i.abort()}i.onload=function(){var t,r,e={status:i.status,statusText:i.statusText,headers:(t=i.getAllResponseHeaders()||"",r=new d,t.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t}).forEach(function(t){var e=t.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),r.append(t,e))}),r)};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var o="response"in i?i.response:i.responseText;setTimeout(function(){n(new A(o,e))},0)},i.onerror=function(){setTimeout(function(){t(new TypeError("Network request failed"))},0)},i.ontimeout=function(){setTimeout(function(){t(new TypeError("Network request failed"))},0)},i.onabort=function(){setTimeout(function(){t(new a.DOMException("Aborted","AbortError"))},0)},i.open(e.method,function(e){try{return""===e&&h.location.href?h.location.href:e}catch(t){return e}}(e.url),!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&(u?i.responseType="blob":f&&e.headers.get("Content-Type")&&-1!==e.headers.get("Content-Type").indexOf("application/octet-stream")&&(i.responseType="arraybuffer")),!s||"object"!=typeof s.headers||s.headers instanceof d?e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}):Object.getOwnPropertyNames(s.headers).forEach(function(t){i.setRequestHeader(t,c(s.headers[t]))}),e.signal&&(e.signal.addEventListener("abort",r),i.onreadystatechange=function(){4===i.readyState&&e.signal.removeEventListener("abort",r)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})}g.polyfill=!0,h.fetch||(h.fetch=g,h.Headers=d,h.Request=E,h.Response=A),a.Headers=d,a.Request=E,a.Response=A,a.fetch=g,Object.defineProperty(a,"__esModule",{value:!0})})</script><script>(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
	typeof define === 'function' && define.amd ? define(factory) :
	(global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.ky = factory());
}(this, (function () { 'use strict';

	/*! MIT License Â© Sindre Sorhus */

	const globals = {};

	const getGlobal = property => {
		/* istanbul ignore next */
		if (typeof self !== 'undefined' && self && property in self) {
			return self;
		}

		/* istanbul ignore next */
		if (typeof window !== 'undefined' && window && property in window) {
			return window;
		}

		if (typeof global !== 'undefined' && global && property in global) {
			return global;
		}

		/* istanbul ignore next */
		if (typeof globalThis !== 'undefined' && globalThis) {
			return globalThis;
		}
	};

	const globalProperties = [
		'Headers',
		'Request',
		'Response',
		'ReadableStream',
		'fetch',
		'AbortController',
		'FormData'
	];

	for (const property of globalProperties) {
		Object.defineProperty(globals, property, {
			get() {
				const globalObject = getGlobal(property);
				const value = globalObject && globalObject[property];
				return typeof value === 'function' ? value.bind(globalObject) : value;
			}
		});
	}

	const isObject = value => value !== null && typeof value === 'object';
	const supportsAbortController = typeof globals.AbortController === 'function';
	const supportsStreams = typeof globals.ReadableStream === 'function';
	const supportsFormData = typeof globals.FormData === 'function';

	const mergeHeaders = (source1, source2) => {
		const result = new globals.Headers(source1 || {});
		const isHeadersInstance = source2 instanceof globals.Headers;
		const source = new globals.Headers(source2 || {});

		for (const [key, value] of source) {
			if ((isHeadersInstance && value === 'undefined') || value === undefined) {
				result.delete(key);
			} else {
				result.set(key, value);
			}
		}

		return result;
	};

	const deepMerge = (...sources) => {
		let returnValue = {};
		let headers = {};

		for (const source of sources) {
			if (Array.isArray(source)) {
				if (!(Array.isArray(returnValue))) {
					returnValue = [];
				}

				returnValue = [...returnValue, ...source];
			} else if (isObject(source)) {
				for (let [key, value] of Object.entries(source)) {
					if (isObject(value) && Reflect.has(returnValue, key)) {
						value = deepMerge(returnValue[key], value);
					}

					returnValue = {...returnValue, [key]: value};
				}

				if (isObject(source.headers)) {
					headers = mergeHeaders(headers, source.headers);
				}
			}

			returnValue.headers = headers;
		}

		return returnValue;
	};

	const requestMethods = [
		'get',
		'post',
		'put',
		'patch',
		'head',
		'delete'
	];

	const responseTypes = {
		json: 'application/json',
		text: 'text/*',
		formData: 'multipart/form-data',
		arrayBuffer: '*/*',
		blob: '*/*'
	};

	const retryMethods = [
		'get',
		'put',
		'head',
		'delete',
		'options',
		'trace'
	];

	const retryStatusCodes = [
		408,
		413,
		429,
		500,
		502,
		503,
		504
	];

	const retryAfterStatusCodes = [
		413,
		429,
		503
	];

	const stop = Symbol('stop');

	class HTTPError extends Error {
		constructor(response) {
			// Set the message to the status text, such as Unauthorized,
			// with some fallbacks. This message should never be undefined.
			super(
				response.statusText ||
				String(
					(response.status === 0 || response.status) ?
						response.status : 'Unknown response error'
				)
			);
			this.name = 'HTTPError';
			this.response = response;
		}
	}

	class TimeoutError extends Error {
		constructor(request) {
			super('Request timed out');
			this.name = 'TimeoutError';
			this.request = request;
		}
	}

	const delay = ms => new Promise(resolve => setTimeout(resolve, ms));

	// `Promise.race()` workaround (#91)
	const timeout = (request, abortController, options) =>
		new Promise((resolve, reject) => {
			const timeoutID = setTimeout(() => {
				if (abortController) {
					abortController.abort();
				}

				reject(new TimeoutError(request));
			}, options.timeout);

			/* eslint-disable promise/prefer-await-to-then */
			options.fetch(request)
				.then(resolve)
				.catch(reject)
				.then(() => {
					clearTimeout(timeoutID);
				});
			/* eslint-enable promise/prefer-await-to-then */
		});

	const normalizeRequestMethod = input => requestMethods.includes(input) ? input.toUpperCase() : input;

	const defaultRetryOptions = {
		limit: 2,
		methods: retryMethods,
		statusCodes: retryStatusCodes,
		afterStatusCodes: retryAfterStatusCodes
	};

	const normalizeRetryOptions = (retry = {}) => {
		if (typeof retry === 'number') {
			return {
				...defaultRetryOptions,
				limit: retry
			};
		}

		if (retry.methods && !Array.isArray(retry.methods)) {
			throw new Error('retry.methods must be an array');
		}

		if (retry.statusCodes && !Array.isArray(retry.statusCodes)) {
			throw new Error('retry.statusCodes must be an array');
		}

		return {
			...defaultRetryOptions,
			...retry,
			afterStatusCodes: retryAfterStatusCodes
		};
	};

	// The maximum value of a 32bit int (see issue #117)
	const maxSafeTimeout = 2147483647;

	class Ky {
		constructor(input, options = {}) {
			this._retryCount = 0;
			this._input = input;
			this._options = {
				// TODO: credentials can be removed when the spec change is implemented in all browsers. Context: https://www.chromestatus.com/feature/4539473312350208
				credentials: this._input.credentials || 'same-origin',
				...options,
				headers: mergeHeaders(this._input.headers, options.headers),
				hooks: deepMerge({
					beforeRequest: [],
					beforeRetry: [],
					afterResponse: []
				}, options.hooks),
				method: normalizeRequestMethod(options.method || this._input.method),
				prefixUrl: String(options.prefixUrl || ''),
				retry: normalizeRetryOptions(options.retry),
				throwHttpErrors: options.throwHttpErrors !== false,
				timeout: typeof options.timeout === 'undefined' ? 10000 : options.timeout,
				fetch: options.fetch || globals.fetch
			};

			if (typeof this._input !== 'string' && !(this._input instanceof URL || this._input instanceof globals.Request)) {
				throw new TypeError('`input` must be a string, URL, or Request');
			}

			if (this._options.prefixUrl && typeof this._input === 'string') {
				if (this._input.startsWith('/')) {
					throw new Error('`input` must not begin with a slash when using `prefixUrl`');
				}

				if (!this._options.prefixUrl.endsWith('/')) {
					this._options.prefixUrl += '/';
				}

				this._input = this._options.prefixUrl + this._input;
			}

			if (supportsAbortController) {
				this.abortController = new globals.AbortController();
				if (this._options.signal) {
					this._options.signal.addEventListener('abort', () => {
						this.abortController.abort();
					});
				}

				this._options.signal = this.abortController.signal;
			}

			this.request = new globals.Request(this._input, this._options);

			if (this._options.searchParams) {
				const searchParams = '?' + new URLSearchParams(this._options.searchParams).toString();
				const url = this.request.url.replace(/(?:\?.*?)?(?=#|$)/, searchParams);

				// To provide correct form boundary, Content-Type header should be deleted each time when new Request instantiated from another one
				if (((supportsFormData && this._options.body instanceof globals.FormData) || this._options.body instanceof URLSearchParams) && !(this._options.headers && this._options.headers['content-type'])) {
					this.request.headers.delete('content-type');
				}

				this.request = new globals.Request(new globals.Request(url, this.request), this._options);
			}

			if (this._options.json !== undefined) {
				this._options.body = JSON.stringify(this._options.json);
				this.request.headers.set('content-type', 'application/json');
				this.request = new globals.Request(this.request, {body: this._options.body});
			}

			const fn = async () => {
				if (this._options.timeout > maxSafeTimeout) {
					throw new RangeError(`The \`timeout\` option cannot be greater than ${maxSafeTimeout}`);
				}

				await delay(1);
				let response = await this._fetch();

				for (const hook of this._options.hooks.afterResponse) {
					// eslint-disable-next-line no-await-in-loop
					const modifiedResponse = await hook(
						this.request,
						this._options,
						this._decorateResponse(response.clone())
					);

					if (modifiedResponse instanceof globals.Response) {
						response = modifiedResponse;
					}
				}

				this._decorateResponse(response);

				if (!response.ok && this._options.throwHttpErrors) {
					throw new HTTPError(response);
				}

				// If `onDownloadProgress` is passed, it uses the stream API internally
				/* istanbul ignore next */
				if (this._options.onDownloadProgress) {
					if (typeof this._options.onDownloadProgress !== 'function') {
						throw new TypeError('The `onDownloadProgress` option must be a function');
					}

					if (!supportsStreams) {
						throw new Error('Streams are not supported in your environment. `ReadableStream` is missing.');
					}

					return this._stream(response.clone(), this._options.onDownloadProgress);
				}

				return response;
			};

			const isRetriableMethod = this._options.retry.methods.includes(this.request.method.toLowerCase());
			const result = isRetriableMethod ? this._retry(fn) : fn();

			for (const [type, mimeType] of Object.entries(responseTypes)) {
				result[type] = async () => {
					this.request.headers.set('accept', this.request.headers.get('accept') || mimeType);

					const response = (await result).clone();

					if (type === 'json') {
						if (response.status === 204) {
							return '';
						}

						if (options.parseJson) {
							return options.parseJson(await response.text());
						}
					}

					return response[type]();
				};
			}

			return result;
		}

		_calculateRetryDelay(error) {
			this._retryCount++;

			if (this._retryCount < this._options.retry.limit && !(error instanceof TimeoutError)) {
				if (error instanceof HTTPError) {
					if (!this._options.retry.statusCodes.includes(error.response.status)) {
						return 0;
					}

					const retryAfter = error.response.headers.get('Retry-After');
					if (retryAfter && this._options.retry.afterStatusCodes.includes(error.response.status)) {
						let after = Number(retryAfter);
						if (Number.isNaN(after)) {
							after = Date.parse(retryAfter) - Date.now();
						} else {
							after *= 1000;
						}

						if (typeof this._options.retry.maxRetryAfter !== 'undefined' && after > this._options.retry.maxRetryAfter) {
							return 0;
						}

						return after;
					}

					if (error.response.status === 413) {
						return 0;
					}
				}

				const BACKOFF_FACTOR = 0.3;
				return BACKOFF_FACTOR * (2 ** (this._retryCount - 1)) * 1000;
			}

			return 0;
		}

		_decorateResponse(response) {
			if (this._options.parseJson) {
				response.json = async () => {
					return this._options.parseJson(await response.text());
				};
			}

			return response;
		}

		async _retry(fn) {
			try {
				return await fn();
			} catch (error) {
				const ms = Math.min(this._calculateRetryDelay(error), maxSafeTimeout);
				if (ms !== 0 && this._retryCount > 0) {
					await delay(ms);

					for (const hook of this._options.hooks.beforeRetry) {
						// eslint-disable-next-line no-await-in-loop
						const hookResult = await hook({
							request: this.request,
							options: this._options,
							error,
							retryCount: this._retryCount
						});

						// If `stop` is returned from the hook, the retry process is stopped
						if (hookResult === stop) {
							return;
						}
					}

					return this._retry(fn);
				}

				if (this._options.throwHttpErrors) {
					throw error;
				}
			}
		}

		async _fetch() {
			for (const hook of this._options.hooks.beforeRequest) {
				// eslint-disable-next-line no-await-in-loop
				const result = await hook(this.request, this._options);

				if (result instanceof Request) {
					this.request = result;
					break;
				}

				if (result instanceof Response) {
					return result;
				}
			}

			if (this._options.timeout === false) {
				return this._options.fetch(this.request.clone());
			}

			return timeout(this.request.clone(), this.abortController, this._options);
		}

		/* istanbul ignore next */
		_stream(response, onDownloadProgress) {
			const totalBytes = Number(response.headers.get('content-length')) || 0;
			let transferredBytes = 0;

			return new globals.Response(
				new globals.ReadableStream({
					start(controller) {
						const reader = response.body.getReader();

						if (onDownloadProgress) {
							onDownloadProgress({percent: 0, transferredBytes: 0, totalBytes}, new Uint8Array());
						}

						async function read() {
							const {done, value} = await reader.read();
							if (done) {
								controller.close();
								return;
							}

							if (onDownloadProgress) {
								transferredBytes += value.byteLength;
								const percent = totalBytes === 0 ? 0 : transferredBytes / totalBytes;
								onDownloadProgress({percent, transferredBytes, totalBytes}, value);
							}

							controller.enqueue(value);
							read();
						}

						read();
					}
				})
			);
		}
	}

	const validateAndMerge = (...sources) => {
		for (const source of sources) {
			if ((!isObject(source) || Array.isArray(source)) && typeof source !== 'undefined') {
				throw new TypeError('The `options` argument must be an object');
			}
		}

		return deepMerge({}, ...sources);
	};

	const createInstance = defaults => {
		const ky = (input, options) => new Ky(input, validateAndMerge(defaults, options));

		for (const method of requestMethods) {
			ky[method] = (input, options) => new Ky(input, validateAndMerge(defaults, options, {method}));
		}

		ky.HTTPError = HTTPError;
		ky.TimeoutError = TimeoutError;
		ky.create = newDefaults => createInstance(validateAndMerge(newDefaults));
		ky.extend = newDefaults => createInstance(validateAndMerge(defaults, newDefaults));
		ky.stop = stop;

		return ky;
	};

	var index = createInstance();

	return index;

})));</script><script>!function(t){function l(){this._callbacks=[]}function r(t,e,n,o){var r,i=new l;n=n||{},o=o||{};try{r=function(){var e;if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}return e}()}catch(t){return i.done(p.ENOXHR,""),i}n=function(t){var e="";if("string"==typeof t)e=t;else{var n,o=encodeURIComponent,r=[];for(n in t)t.hasOwnProperty(n)&&r.push(o(n)+"="+o(t[n]));e=r.join("&")}return e}(n),"GET"===t&&n&&(e+="?"+n,n=null),r.open(t,e);var a,u="application/x-www-form-urlencoded";for(a in o)o.hasOwnProperty(a)&&("content-type"===a.toLowerCase()?u=o[a]:r.setRequestHeader(a,o[a]));r.setRequestHeader("Content-type",u);var s,c=p.ajaxTimeout;return c&&(s=setTimeout(function(){r.abort(),i.done(p.ETIMEOUT,"",r)},c)),r.onreadystatechange=function(){var t;c&&clearTimeout(s),4===r.readyState&&(t=!r.status||(r.status<200||300<=r.status)&&304!==r.status,i.done(t,r.responseText,r))},r.send(n),i}function e(o){return function(t,e,n){return r(o,t,e,n)}}l.prototype.then=function(e,n){var o;return this._isdone?o=e.apply(n,this.result):(o=new l,this._callbacks.push(function(){var t=e.apply(n,arguments);t&&"function"==typeof t.then&&t.then(o.done,o)})),o},l.prototype.done=function(){this.result=arguments,this._isdone=!0;for(var t=0;t<this._callbacks.length;t++)this._callbacks[t].apply(null,arguments);this._callbacks=[]};var p={Promise:l,join:function(t){var e=new l,n=[];if(!t||!t.length)return e.done(n),e;for(var o=0,r=t.length,i=0;i<r;i++)t[i].then(function(t){return function(){o+=1,n[t]=Array.prototype.slice.call(arguments),o===r&&e.done(n)}}(i));return e},chain:function t(e,n){var o=new l;return 0===e.length?o.done.apply(o,n):e[0].apply(null,n).then(function(){e.splice(0,1),t(e,arguments).then(function(){o.done.apply(o,arguments)})}),o},ajax:r,get:e("GET"),post:e("POST"),put:e("PUT"),del:e("DELETE"),ENOXHR:1,ETIMEOUT:2,ajaxTimeout:0};"function"==typeof define&&define.amd?define(function(){return p}):t.promise=p}(this)</script><script>!function(e){var o=!!e.opera||0<=navigator.userAgent.indexOf(" OPR/");e.broswerDetect={isOpera:o,isFirefox:"undefined"!=typeof InstallTrigger,isSafari:0<Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor"),isChrome:!!e.chrome&&!o,isIE:!!document.documentMode}}(window)</script><script>var cookiestore={s:document.cookie,type:"cookie",set:function(e,t,r,o,n){t=void 0!==t&&"object"==typeof t?JSON.stringify(t):encodeURIComponent(t),document.cookie=e+"="+t+(r?"; expires="+new Date(r).toUTCString():"")+"; path="+(o||"/")+(n?"; secure":"")},get:function(e){var t=this.getAllRawOrProcessed(!1);return t.hasOwnProperty(e)?this.processValue(t[e]):void 0},processValue:function(t){if("{"==t.substring(0,1))try{return JSON.parse(t)}catch(e){return t}return"undefined"==t?void 0:decodeURIComponent(t)},getAllRawOrProcessed:function(e){var t=document.cookie.split("; "),r={};if(1===t.length&&""===t[0])return r;for(var o=0;o<t.length;o++){var n=t[o].split("=");r[n[0]]=e?this.processValue(n[1]):n[1]}return r},getAll:function(){return this.getAllRawOrProcessed(!0)},remove:function(e){this.set(e,"",-1)},removeAll:function(){for(var e in this.getAll())this.remove(e);return this.getAll()}}</script><script>!function(a){a.isMobile=function(){var i=a.navigator.userAgent||a.navigator.vendor||a.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4))}}(window)</script><script>window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,i){window.setTimeout(e,1e3/60)})</script><script>[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})</script><script>!function(){var r,v,t,e=!1;function n(t,e,n,s){var i,_=!1,o=!1,r=!1;n&&(o="object"==typeof n?(r=!!n.passive,!!n.useCapture):n),r&&(_=!0),_&&(i=o.toString(),i+=r.toString()),s(_,i,o,r)}document.createElement("div").addEventListener("test",function(){},{get passive(){return!(e=!0)}}),!e&&EventTarget&&(r=EventTarget.prototype.addEventListener,v=EventTarget.prototype.removeEventListener,t=Event.prototype.preventDefault,Event.prototype.preventDefault=function(){this.__passive?console.warn("Ignored attempt to preventDefault an event from a passive listener"):t.apply(this)},EventTarget.prototype.addEventListener=function(i,_,t){var o=this;n(0,0,t,function(t,e,n,s){t?(e=n.toString(),e+=s.toString(),this.__event_listeners_options||(this.__event_listeners_options={}),this.__event_listeners_options[i]||(this.__event_listeners_options[i]={}),this.__event_listeners_options[i][_]||(this.__event_listeners_options[i][_]=[]),this.__event_listeners_options[i][_][e]||(t={handleEvent:function(t){t.__passive=s,"function"==typeof _?_(t):_.handleEvent(t),t.__passive=!1}},this.__event_listeners_options[i][_][e]=t,r.call(o,i,t,n))):r.call(o,i,_,n)})},EventTarget.prototype.removeEventListener=function(i,_,t){var o=this;n(0,0,t,function(t,e,n,s){t&&this.__event_listeners_options&&this.__event_listeners_options[i]&&this.__event_listeners_options[i][_]&&this.__event_listeners_options[i][_][e]?(v.call(o,i,this.__event_listeners_options[i][_][e],!1),delete this.__event_listeners_options[i][_][e],0==this.__event_listeners_options[i][_].length&&delete this.__event_listeners_options[i][_]):v.call(o,i,_,n)})})}()</script><script>!function(t){var r={};t.loadCssFiles=function(o,a){function e(){for(var e=0,n=o.length;e<n;e++){var t,i=o[e];"string"!=typeof r[i]&&(r[i]=i,(t=document.createElement("link")).rel="stylesheet",t.href=i,t.media="only x",(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,i),function(e){setTimeout(function(){e.media="all",e.crossorigin="anonymous"})}(t))}"function"==typeof a&&a()}var n=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame;n?n(e):t.addEventListener("load",e)}}(window)</script><script>!function(i){function n(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())}function r(t){return"string"==typeof t&&0<t.trim().length}i.slUtils={isValidDate:n,isValidString:r,isValidDateString:function(t){return r(t)&&n(new Date(t))},isReallyTrue:function(t){return t+""=="true"},redirectToUrl:function(t,n){r(t)?t+=".":t="";var e=80===(e=i.location.port)||443===e?"":":"+e;r(n)||(n="/"),n=[i.location.protocol+"//",t,i.location.hostname.replace("www.",""),e,n].join(""),i.SURVEYLEGEND_DEBUG?console.error("Redirect to "+n):i.location.href=n},getIdsFromLocation:function(){var t=i.location.href.split("/").pop().split("?"),n=(t.shift()||"").split("~");t.length&&(t=(t.shift()||"").split("&"));var e=n.shift(),o=n.shift(),n=n.shift();return t.length&&(n=(r(n)?[n]:[]).concat(t).join("&")),{userId:r(e)?e:null,surveyId:r(o)?o:null,externalId:r(n)?n:null}},removeElementById:function(t){"string"==typeof t&&(t=[t]),t.forEach(function(t){t=document.getElementById(t);t&&t.parentNode.removeChild(t)})}}}(window)</script><script>!function(s){var e,t,c=s.$LAB,y="UseLocalXHR",p="AlwaysPreserveOrder",g="AllowDuplicates",m="CacheBust",_="BasePath",v=/^[^?#]*\//.exec(location.href)[0],x=/^\w+\:\/\/\/?[^\/]+/.exec(v)[0],b=document.head||document.getElementsByTagName("head"),n=s.opera&&"[object Opera]"==Object.prototype.toString.call(s.opera)||"MozAppearance"in document.documentElement.style,r=document.createElement("script"),S="boolean"==typeof r.preload,w=S||r.readyState&&"uninitialized"==r.readyState,O=!w&&!0===r.async,a=!w&&!O&&!n;function A(e){return"[object Function]"==Object.prototype.toString.call(e)}function B(e){return"[object Array]"==Object.prototype.toString.call(e)}function L(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function E(e,t,n,r){e.onload=e.onreadystatechange=function(){e.readyState&&"complete"!=e.readyState&&"loaded"!=e.readyState||t[n]||(e.onload=e.onreadystatechange=null,r())}}function C(e){e.ready=e.finished=!0;for(var t=0;t<e.finished_listeners.length;t++)e.finished_listeners[t]();e.ready_listeners=[],e.finished_listeners=[]}s.$LAB=function e(){var r,t={},d=w||a,i=[],h={};function f(s,c,e,t){function n(){c.finished_cb(c,e)}var a,r,i,o,l,u,d,f,p;c.src=(r=c.src,i=s[_],o=/^\w+\:\/\//,/^\/\/\/?/.test(r)?r=location.protocol+r:o.test(r)||"/"==r.charAt(0)||(r=(i||"")+r),o.test(r)?r:("/"==r.charAt(0)?x:v)+r),c.real_src=c.src+(s[m]?(/\?.*$/.test(c.src)?"&_":"?_")+~~(1e9*Math.random())+"=":""),h[c.src]||(h[c.src]={items:[],finished:!1}),r=h[c.src].items,s[g]||0==r.length?(a=r[r.length]={ready:!1,finished:!1,ready_listeners:[function(){c.ready_cb(c,function(){function e(){null!=i&&(i=null,C(r))}var t,n,r,i;t=s,r=a,h[(n=c).src].finished||(t[g]||(h[n.src].finished=!0),i=r.elem||document.createElement("script"),n.type&&(i.type=n.type),n.charset&&(i.charset=n.charset),E(i,r,"finished",e),r.elem?r.elem=null:r.text?(i.onload=i.onreadystatechange=null,i.text=r.text):i.src=n.real_src,b.insertBefore(i,b.firstChild),r.text&&e())})}],finished_listeners:[n]},l=s,u=c,d=a,f=t?function(){a.ready=!0;for(var e=0;e<a.ready_listeners.length;e++)a.ready_listeners[e]();a.ready_listeners=[]}:function(){C(a)},p=t,setTimeout(function(){var e,t,n=u.real_src;if("item"in b){if(!b[0])return void setTimeout(arguments.callee,25);b=b[0]}e=document.createElement("script"),u.type&&(e.type=u.type),u.charset&&(e.charset=u.charset),p?w?(d.elem=e,S?(e.preload=!0,e.onpreload=f):e.onreadystatechange=function(){"loaded"==e.readyState&&f()},e.src=n):p&&0==n.indexOf(x)&&l[y]?((t=new XMLHttpRequest).onreadystatechange=function(){4==t.readyState&&(t.onreadystatechange=function(){},d.text=t.responseText+"\n//@ sourceURL="+n,f())},t.open("GET",n),t.send()):(e.type="text/cache-script",E(e,d,"ready",function(){b.removeChild(e),f()}),e.src=n,b.insertBefore(e,b.firstChild)):(O&&(e.async=!1),E(e,d,"finished",f),e.src=n,b.insertBefore(e,b.firstChild))},0)):(a=r[0]).finished?n():a.finished_listeners.push(n)}function n(){var i,s,c=L(t,{}),a=[],e=0,o=!1;function l(e,t){e.ready=!0,e.exec_trigger=t,r()}function u(e,t){e.ready=e.finished=!0,e.exec_trigger=null;for(var n=0;n<t.scripts.length;n++)if(!t.scripts[n].finished)return;t.finished=!0,r()}function r(){for(;e<a.length;)if(A(a[e]))try{a[e++]()}catch(e){}else{if(!a[e].finished){if(function(e){for(var t=!1,n=0;n<e.scripts.length;n++)e.scripts[n].ready&&e.scripts[n].exec_trigger&&(t=!0,e.scripts[n].exec_trigger(),e.scripts[n].exec_trigger=null);return t}(a[e]))continue;break}e++}e==a.length&&(s=o=!1)}return{script:(i={script:function(){for(var e=0;e<arguments.length;e++)!function(e,t){var n;B(e)||(t=[e]);for(var r=0;r<t.length;r++)s&&s.scripts||a.push(s={scripts:[],finished:!0}),A(e=t[r])&&(e=e()),e&&(B(e)?((n=[].slice.call(e)).unshift(r,1),[].splice.apply(t,n),r--):("string"==typeof e&&(e={src:e}),e=L(e,{ready:!1,ready_cb:l,finished:!1,finished_cb:u}),s.finished=!1,s.scripts.push(e),f(c,e,s,d&&o),o=!0,c[p]&&i.wait()))}(arguments[e],arguments[e]);return i},wait:function(){if(0<arguments.length){for(var e=0;e<arguments.length;e++)a.push(arguments[e]);s=a[a.length-1]}else s=!1;return r(),i}}).script,wait:i.wait,setOptions:function(e){return L(e,c),i}}}return t[y]=!0,t[p]=!1,t[g]=!1,t[m]=!1,t[_]="",r={setGlobalDefaults:function(e){return L(e,t),r},setOptions:function(){return n().setOptions.apply(null,arguments)},script:function(){return n().script.apply(null,arguments)},wait:function(){return n().wait.apply(null,arguments)},queueScript:function(){return i[i.length]={type:"script",args:[].slice.call(arguments)},r},queueWait:function(){return i[i.length]={type:"wait",args:[].slice.call(arguments)},r},runQueue:function(){for(var e,t=r,n=i.length;0<=--n;)t=t[(e=i.shift()).type].apply(null,e.args);return t},noConflict:function(){return s.$LAB=c,r},sandbox:e}}(),n="addEventListener",e="DOMContentLoaded",null==document.readyState&&document[n]&&(document.readyState="loading",document[n](e,t=function(){document.removeEventListener(e,t,!1),document.readyState="complete"},!1))}(this)</script><script>!function(n){var t,i,a={};function o(n){return"string"==typeof n&&0<n.trim().length}function s(n,i,t){a.percentLoaded+=n,window.SurveyLegendEventBus&&window.SurveyLegendEventBus.emit("update-loading-progress",{percent:n,duration:i,onComplete:t})}function e(i,t,n){var a="function"==typeof n?n:angular.noop;angular&&"object"==typeof angular?o(i)?o(t)?angular.element(document).ready(function(){var n=angular.element(i);0!==n.length?1<n.length?console.log("Failed bootstrapping angular app - "+n.length+" elements matching selector "+i):("function"==typeof a&&angular.module(t).run(function(){a()}),angular.bootstrap(n,[t])):console.log("Failed bootstrapping angular app - no element matching selector "+i)}):console.error("Failed bootstrapping angular app - invalid app id "+t):console.error("Failed bootstrapping angular app - invalid selector "+i):console.error("Could not load AngularJS.")}function r(){return n.script([t+"npm/jquery@3/dist/jquery.min.js",t+"npm/lodash@4/lodash.min.js","/libs/sizeof.min.js","/libs/cssRules.min.js",t+"npm/blueimp-md5@2/js/md5.min.js",t+"npm/clipboard@2/dist/clipboard.min.js",i]).script(t+"npm/angular@1.7/angular.min.js").wait().wait(function(){s(5,50)}).script([t+"npm/angular-elastic-input@2.4/dist/angular-elastic-input.min.js",t+"npm/angular-animate@1.7/angular-animate.min.js",t+"npm/angular-touch@1.7/angular-touch.min.js",t+"npm/angular-cookies@1.7/angular-cookies.min.js",t+"npm/ngstorage@0.3/ngStorage.min.js",t+"npm/d3@3.5/d3.min.js"]).script(t+"combine/npm/textangular@1.5.16/dist/textAngular-rangy.min.js,npm/textangular@1.5.16/dist/textAngular-sanitize.min.js,npm/textangular@1.5.16/dist/textAngularSetup.js,npm/textangular@1.5.16/dist/textAngular.min.js").wait(function(){s(5,50)}).script(t+"npm/angular-ui-bootstrap@2.5/dist/ui-bootstrap-tpls.min.js").script([t+"npm/angularfire@1.2/dist/angularfire.min.js",t+"npm/nvd3@1.8/build/nv.d3.min.js",t+"npm/angular-nvd3@1/dist/angular-nvd3.min.js",t+"npm/angular-socialshare@2.3/dist/angular-socialshare.min.js",t+"npm/ngSmoothScroll@2/dist/angular-smooth-scroll.min.js","/libs/bootstrap-slider.min.js"]).wait().script("/libs/angular-bootstrap-slider.js").wait(function(){s(5,50)}).script("//apis.google.com/js/api.js").wait().script("//apis.google.com/js/client.js").script(t+"npm/webfontloader@1.6/webfontloader.min.js").script(["/libs/loading-bar.min.js","/libs/angular-bootstrap-lightbox.min.js",t+"npm/angulartics@1.6/dist/angulartics.min.js","/libs/angulartics-ga.min.js","js/surveylegend.shared.min-b09d2366.js","js/surveylegend.shared.survey.logic.min-c6b47e14.js"]).script([t+"combine/npm/@flowjs/ng-flow@2.7/dist/ng-flow-standalone.min.js,npm/@flowjs/fusty-flow.js@1.2/src/fusty-flow.min.js,npm/@flowjs/fusty-flow.js@1.2/src/fusty-flow-factory.min.js"]).wait(function(){s(5,50),angular.module("SurveyLegend.tool.user",[]).value("slUser",{level:"free"}),angular.module("SurveyLegend.tool.permissionsService",[]).value("PermissionsService",{isAllowed:function(){return!1},askPermission:angular.noop})})}n?(t="//cdn.jsdelivr.net/",i="//cdn.firebase.com/js/client/2.4.2/firebase.js",a.percentLoaded=0,a.bootstrapParticipation=function(n,i){e(n,"SurveyLegend",i)},a.bootstrapAnalytics=function(n,i){e(n,"SurveyLegend.liveAnalytics",i)},a.updateLoadingProgress=s,a.loadFirebaseLib=function(){return n.script(i)},a.loadIncognitoDetectionLib=function(){return n.script(t+"npm/js-detect-incognito-private-browsing@1/dist/BrowsingModeDetector.js")},a.loadAnalytics=function(n,i){return r().script(t+"npm/topojson@1.6/build/topojson.min.js").wait().script("/libs/datamaps.world.min.js").wait(function(){s(3)}).script([t+"npm/angular-datamaps@0.1/dist/angular-datamaps.min.js","/libs/angular-d3.min.js","/libs/ng-radial-gauge-dir.js",t+"npm/angular-ui-grid@4.9/ui-grid.min.js"]).wait(function(){s(5,50)}).script(["js/surveylegend.live-ana-lyt-ics.shared.min-cfd203ca.js","js/surveylegend.participation.live-ana-lyt-ics.min-d78dc8fa.js"]).wait(function(){s(5,50),"object"==typeof angular&&o(n)&&a.bootstrapAnalytics(n),"function"==typeof i&&i()})},a.loadParticipation=function(n,i){return r().script("js/surveylegend.survey.min-eb6d9679.js").script("js/surveylegend.participation.min-ddc63f34.js").wait(function(){s(5,50,function(){"object"==typeof angular&&o(n)&&a.bootstrapParticipation(n),"function"==typeof i&&i()})})},a.loadThankYouPage=function(n,i){console.log("Loaded thank you page app into div "+n),"function"==typeof i&&i()},a.loadMobile=function(){("ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&n.script(t+"npm/fastclick@1.0/lib/fastclick.min.js").wait(function(){window.FastClick&&window.FastClick.attach&&"function"==typeof window.FastClick.attach?document.addEventListener("DOMContentLoaded",function(){window.FastClick.attach(window.document.body),console.log("FastClick library loaded")},!1):console.warn("Could not initiate FastClick library."),s(5,50)})},window.SurveyLegendScripts=a):console.error("LAB.js not loaded.")}($LAB)</script><script>!function(c){var u=c.slUtils,d=c.SurveyLegendScripts,t=c.ky;function s(e,t){var r,i="surveylegend_participation_"+e;if(t&&c.localStorage)r=c.localStorage.getItem(i);else{if(!navigator.cookieEnabled)return;r=cookiestore.get("surveylegend_participation_"+e)}if("string"==typeof r&&r.length)try{var n=JSON.parse(r);return n&&"object"==typeof n&&u.isValidDateString(n.completedTime)}catch(e){return void console.warn("Participation cookie contains invalid json object ("+r+")")}}function r(e){var t,r;return u.isReallyTrue(e.whiteLabel)||(t=document.getElementsByClassName("loading"),r=document.getElementsByClassName("loading-container"),t[0].remove(),r[0].classList.remove("ng-hide")),e}c.runLoadingLogic=function(o){var l=u.getIdsFromLocation();if(!l.userId||!l.surveyId)return u.redirectToUrl("","/something-went-wrong/?source=survey-landing-page&cause=missing-survey-id"),Promise.reject();var e;return Promise.all([new c.Promise(function(r,i){d.loadIncognitoDetectionLib().wait(function(){(new c.BrowsingModeDetector).do(function(e,t){return c.isInIFrame=top.location!==self.location,t.isBotBrowsing()?i({msg:"Bot browsing not allowed!",cause:"bot-browsing"}):r(t)})})}).catch(function(e){console.error(e);e="private-browsing"===e.cause?"/private-browsing/?source="+l.surveyId:"/something-went-wrong/?source="+l.surveyId+"&cause="+e.cause;return Promise.reject(e)}),(e=l.surveyId,c.apiUrl="https://api.surveylegend.com",function(e){return c.Symbol&&c.fetch&&t&&t.get?t.get(e,{timeout:5e3,retry:{limit:3,statusCodes:[404,408,413,429,500,502,503,504]}}).json():new Promise(function(r,i){c.promise.get(e,null,{"Content-Type":"application/json"}).then(function(e,t){e?i(e):r(JSON.parse(t))})})}(c.apiUrl+"/surveys/"+e+"/settings").then(function(e){return e&&"object"==typeof e&&0<Date.parse(e.createdOn)?e:Promise.reject("Invalid survey object retrieved from API")}).catch(function(e){return"object"!=typeof e?console.warn(e):console.warn(e.response+" "+e.message+": "+e.response.url),console.warn("Failed loading survey from API, trying Firebase instead."),e=l.surveyId,n=c.firebaseUrl+"survey_meta/"+e,a={createdOn:"createdOn",skipAdRedirect:"skipAdRedirect",whiteLabel:"whiteLabel",closedTime:"closedTime",trashedTime:"trashedTime",deletedTime:"deletedTime",rightToLeft:"rightToLeft",multipleParticipation:"multipleParticipation",displayLiveAnalyticsAfterSurvey:"share_live_analytics/displayAfterSurvey",thankYouPageEnabled:"thankYouPage/enabled",kioskMode:"kiosk/enabled"},o=Object.keys(a),s={},new c.Promise(function(e){d.loadFirebaseLib().wait(e)}).then(function(){for(var e=[],t=0;t<o.length;t++){var r=o[t],i=function(e){return new c.Promise(function(t,r){new c.Firebase(e).once("value",function(e){e=e.val();null!==e?t(e):r({msg:"Data does not exist."})},function(e){r(e)})})}(n+"/"+a[r]);s[r]=i,e.push(i)}return Promise.all(e)}).then(function(e){for(var t=0;t<o.length;t++){var r=o[t],i=s[r].result,i=1<i.length?i[1]:null;s[r]=i}for(var n=["skipAdRedirect","whiteLabel","rightToLeft","multipleParticipation","displayLiveAnalyticsAfterSurvey","thankYouPageEnabled","kioskMode"],a=0;a<n.length;a++)s[r=n[a]]=u.isReallyTrue(s[r]);return s});var n,a,o,s}).then(function(e){return e&&Date.parse(e.createdOn)?e:Promise.reject("Invalid survey object!")}).then(r).catch(function(e){var t="/survey-not-found/?source="+l.surveyId;return Promise.reject(t)}))]).then(function(e){var t,r,i=e.pop();if(c.skipAdRedirect=u.isReallyTrue(i.skipAdRedirect),c.whiteLabel=u.isReallyTrue(i.whiteLabel),c.rightToLeft=u.isReallyTrue(i.rightToLeft),c.displayLiveAnalyticsAfterSurvey=u.isReallyTrue(i.displayLiveAnalyticsAfterSurvey)&&!u.isReallyTrue(i.kioskMode),a=i,t=Date.parse(a.closedTime),r=Date.parse(a.trashedTime),e=Date.parse(a.deletedTime),a=Date.now(),t&&t<a||r&&r<a||e&&e<a){var n="/questionnaire-unavailable-create-survey/";return(u.isReallyTrue(i.skipAdRedirect)||u.isReallyTrue(i.whiteLabel))&&(n="/questionnaire-unavailable/"),Promise.reject(n+"?source="+l.surveyId)}var a,e=(e=l.surveyId,a=i,u.isReallyTrue(a.multipleParticipation)||u.isReallyTrue(a.kioskMode)||!s(e)&&!s(e,!0));if(e||c.displayLiveAnalyticsAfterSurvey)return(e||c.displayLiveAnalyticsAfterSurvey)&&(c.loadCssFiles(o),d.loadMobile(),e?d.loadParticipation("#ParticipationApp"):c.displayLiveAnalyticsAfterSurvey&&(d.loadAnalytics("#LiveAnalyticsApp"),u.removeElementById("ParticipateArea"))),i;n="/already-participated-create-survey/";return(c.skipAdRedirect||c.whiteLabel)&&(n="/already-participated/"),Promise.reject(n+"?source="+l.surveyId)}).catch(function(e){"string"==typeof e?u.redirectToUrl("",e):console.error(e)})}}(window)</script><script>var cdn="//cdn.jsdelivr.net/",cssFiles=[cdn+"npm/bootstrap@3.4.1/dist/css/bootstrap.min.css",cdn+"npm/angular-ui-grid@4.9/ui-grid.min.css",cdn+"npm/nvd3@1.8/build/nv.d3.min.css","styles/shared-between-apps-0adfca29.css","styles/themes-4cbc3265.css","styles/survey-446e35e7.css","styles/live-analytics-shared-a65fbd3e.css"];window.runLoadingLogic(cssFiles)</script></body></html>