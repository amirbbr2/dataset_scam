
/*! (c) 2016 Jagex Limited */

document.domain="runescape.com";var RS3=RS3||{},baseURL=baseURL||"https://www.runescape.com",PAGEGLOBALS=PAGEGLOBALS||{},ajaxHiscoresUrl=ajaxHiscoresUrl||"http://services.runescape.com/m=hiscore",ajaxClanHiscoresUrl=ajaxClanHiscoresUrl||"http://services.runescape.com/m=clan-hiscores";RS3.global={viewportDimensions:function(){var a={};return a.cHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a.cWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a},external:function(){$("body").on("click",".ext",function(a){var b=$(this),c=b.data("title"),d=b.attr("href");c&&(a.preventDefault(),window.open(d),RS3.tracking.pushTrackEvent("external_link","click",c))})},internal:function(){$("body").on("click",".int",function(a){var b=$(this);RS3.tracking.pushTrackEvent("internal_link","click",b.attr("title"))})},addCToLink:function(a){function b(a){var b,c,d=a.split("/");for(var e in d)c=d[e],c.split("c=").length>1&&(b=c);return b}function c(a){var b,c=a.split("/"),d=[];for(var e in c)b=c[e],b.split("c=").length<=1&&d.push(b);return d.join("/")}var d=b(pageLocation);return a=c(a),a.split(".com").join(".com/"+d)},responsiveMenu:function(){$("#main-nav").on("click",function(){$(this).toggleClass("main-nav--show")}),$(".main-nav__expander").on("click",function(a){a.stopPropagation(),a.preventDefault(),$(this).parent().parent().toggleClass("main-nav__item--expand")})},playerCount:function(){var a=$("#playerCount");if(a.length>0){var b=parseInt(a.html().replace(",",""));(b<1||isNaN(b))&&RS3.global.pollPlayerCount(a)}},pollPlayerCount:function(a){$.ajax({url:baseURL+"/player_count.js?varname=iPlayerCount",dataType:"jsonp",success:function(b){b>0&&a.html(RS3.global.playerCountCommas(b))}})},playerCountCommas:function(a){a+="",x=a.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var b=/(\d+)(\d{3})/;b.test(x1);)x1=x1.replace(b,"$1,$2");return x1+x2},lightbox:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="tl outerCorner"></div><div class="tr outerCorner"></div><div class="bl outerCorner"></div><div class="br outerCorner"></div><div class="fancybox-inner greyFrame"><div class="tl corner"></div><div class="tr corner"></div><div class="bl corner"></div><div class="br corner"></div></div></div></div></div>',onUpdate:function(){var a=$(".fancybox-inner.greyFrame");$("html").hasClass("no-borderimage")&&a.find("iframe").width(a.width()-10).height(a.height()-10)},init:function(){"use strict";var a=$(".lightbox");a.fancybox({openEffect:"none",closeEffect:"none",hideOnContentClick:!0,tpl:{wrap:RS3.global.lightbox.wrap},scrolling:!1,helpers:{media:{}},onUpdate:RS3.global.lightbox.onUpdate})}},tabbedElement:function(){"use strict";var a=$("#tabs"),b=$("#tabNav"),c=window.location.hash;"#videos"===c?(a.find(".tabbedContent").hide().end().find(c).show(),b.find('a[href="'+c+'"]').parent().addClass("active")):(a.find(".tabbedContent:not(:first)").hide(),b.find("li:first").addClass("active")),b.on("click","a",function(c){c.preventDefault();var d=$(this),e=d.attr("href");b.find(".active").removeClass("active"),d.parent().addClass("active"),$(".lt-ie9").length?a.find(".tabbedContent").hide().end().find(e).show():a.find(".tabbedContent").hide().end().find(e).fadeIn(250)})},headerDescriptionToggle:function(){$(".descTrigger").length&&$(".hiScoreDescription").length&&$(".descTrigger").on("click",function(a){a.preventDefault();var b=$(this);b.toggleClass("descTriggerOpen"),b.next(".hiScoreDescription").slideToggle(500,function(){$(".fancybox-wrap").is(":visible")&&b.hasClass("descTriggerOpen")&&$.fancybox.update()})})},categoryDropDown:{fallbackImages:function(a){switch(a){case 1:fallbackImage=RS3.imgRoot+"/news/fallback-gameupdates.jpg?1";break;case 2:fallbackImage=RS3.imgRoot+"/news/fallback-website.jpg?1";break;case 3:fallbackImage=RS3.imgRoot+"/news/fallback-support.jpg?1";break;case 4:fallbackImage=RS3.imgRoot+"/news/fallback-technical.jpg?1";break;case 5:fallbackImage=RS3.imgRoot+"/news/fallback-community.jpg?1";break;case 6:fallbackImage=RS3.imgRoot+"/news/fallback-behindthescenes.jpg?1";break;case 8:fallbackImage=RS3.imgRoot+"/news/fallback-support.jpg?1";break;case 9:fallbackImage=RS3.imgRoot+"/news/fallback-shop.jpg?1";break;case 12:fallbackImage=RS3.imgRoot+"/news/fallback-futureupdates.jpg";break;case 13:fallbackImage=RS3.imgRoot+"/news/fallback-solomons.jpg";break;case 14:fallbackImage=RS3.imgRoot+"/news/fallback-treasurehunter.jpg";break;case 15:fallbackImage=RS3.imgRoot+"/news/fallback-yourfeedback.jpg";break;case 16:fallbackImage=RS3.imgRoot+"/news/fallback-events.jpg";break;default:fallbackImage=RS3.imgRoot+"/news/fallback-unspecified.jpg?1"}return fallbackImage},getNewsCats:function(){"use strict";var a=$(".catList");a.on("click","a",function(a){a.preventDefault();var b,c,d,e=$(this),f=e.data("type"),g=e.data("id");""+currentLangId;if(e.hasClass("active")||isNaN(g))return!1;"news"===f?(b=$("#newsSection"),c="jsonNews_",d=$("#catListNews")):(b=$("#videoSection"),c="jsonVideo_",d=$("#catListVideo")),$("#catListArchive").find(".active").removeClass("active"),d.find(".active").removeClass("active"),e.addClass("active"),b.hide().empty();var h="news"===f?"latestNews":"latestNewsWithVideoContent";$.ajax({url:ajaxNewsUrl+"/"+h+".json?cat="+g,dataType:"jsonp",success:function(a){RS3.global.categoryDropDown.parseNewsCats(a,f,b)},error:function(){var a=[];RS3.global.categoryDropDown.parseNewsCats(a,f)}})})},parseNewsCats:function(a,b,c,d){var e,f=0,g=7,h=[],i=!0,j=a.categoryId,k=RS3.newsCategories();switch(archiveOrNewsPage){case"archive":e="jptg=ia&jptv=news_archive";break;case"news":e="jptg=ia&jptv=news_list";break;case"home":e="jptg=ia&jptv=community_news"}null!==a&&a.newsItems.length&&($.each(a.newsItems,function(a,c){var d=0===j?c.categoryId:j,i=k[d];return RS3.global.categoryDropDown.fallbackImages(d),"video"===b&&3!=c.largeMediaType||!(f>g)&&(f+=1,h.push("<article "+(3==c.largeMediaType?'class="video"':"")+">"),h.push('<figure><a href="'+c.link+"?"+e+'">'),h.push('<img src="'+(""!=c.summaryImageLink?c.summaryImageLink:fallbackImage)+'" alt="'+c.title+'Teaser Image" title="'+c.title+'Teaser Image" />'),h.push("</a></figure>"),h.push('<div class="copy"><header>'),h.push('<h4><a href="'+c.link+(3==c.largeMediaType?"?play=true":"")+"&"+e+'">'+c.title+"</a></h4>"),h.push('<h5><a href="'+ajaxNewsUrl+"/list?cat="+d+'&page=1">'),h.push(i),h.push("</a></h5>"),h.push("<time>"+c.formattedDate+"</time></header>"),"home"!=archiveOrNewsPage&&h.push("<p>"+c.summary+' <a class="readMore" href="'+c.link+"?"+e+'">Read More</a></p>'),h.push("</div>"),void h.push("</article>"))}),0!=f&&(i=!1)),i&&h.push('<p class="error">Sorry, there are no articles for this category. Please try another category.</p>'),c.html(h.join("")),c.fadeIn(500)}},facebook:{loadFacebookAPI:function(a){"use strict";"undefined"==typeof FB&&(0===$("#fb-root").length&&$("body").prepend('<div id="fb-root"></div>'),window.fbAsyncInit=function(){FB.init({appId:PAGEGLOBALS.FB.appId,status:!1,cookie:!0,xfbml:!0,version:"v2.2",oauth:!0}),a&&a()},function(a,b){var c,d="facebook-jssdk",e=a.getElementsByTagName("script")[0];a.getElementById(d)||(c=a.createElement("script"),c.id=d,c.async=!0,c.src="//connect.facebook.net/en_US/sdk"+(b?"/debug":"")+".js",e.parentNode.insertBefore(c,e))}(document,!1))},fbLoginRedirect:function(a,b){"use strict";var c=PAGEGLOBALS.FB.fbURL,d=PAGEGLOBALS.FB.checkLoginURL,e=PAGEGLOBALS.FB.loginURL,f=500;return $.getJSON(d+"?json=?",{tps:0,token:FB.getAuthResponse().accessToken,expiry:FB.getAuthResponse().expiresIn,signed:FB.getAuthResponse().signedRequest},function(d){var g;if(d.sso<0)return alert("There was a problem verifying your login. Please try again."),!1;if(d.sso.length>1){if(!(d.sna>-1))return"undefined"==typeof b&&(b=""),g=e+"?key="+d.sso+"?"+a,"_parent"===b?window.parent.location=g:"_top"===b?window.top.location=g:"_blank"===b?window.open(g,"_blank"):window.location=g,!0;g=c+"?key="+d.sso+"&tps=0&"+a,"_parent"===b&&(window.parent.location=g),f=620}else g=c+"?"+a,"_parent"===b&&(window.parent.location=g);"_parent"!==b&&$.fancybox({href:g,type:"iframe",width:462,height:f,autoSize:!1,wrapCSS:"loginFancyBoxFB"})}),!1},fbButtonClickHandler:function(a,b){"use strict";var c=a||PAGEGLOBALS.FB.queryString;"undefined"==typeof FB||"function"!=typeof FB.getAuthResponse?alert("Couldn't contact Facebook. Please try again later."):null==FB.getAuthResponse()?FB.login(function(a){a.authResponse?RS3.global.facebook.fbLoginRedirect(c,b):alert("Authentication with Facebook failed. Please try again.")},{scope:PAGEGLOBALS.FB.scope}):RS3.global.facebook.fbLoginRedirect(c,b)},setUpEvents:function(){"use strict";$(".facebookLogin").click(function(a){a.preventDefault();var b=$(this),c=b.data("redirecturl"),d=b.attr("target");RS3.global.facebook.fbButtonClickHandler(c,d)}),$("#weblogin .fbLogout").length&&FB.getLoginStatus(function(a){a.authResponse&&(document.getElementById("socialnetworks").style.display="block",FB.XFBML.parse(document.getElementById("fb_logout")),document.getElementById("fb_logout").style.display="block")}),$("#weblogin .googleLogout").length&&(document.getElementById("socialnetworks").style.display="block",document.getElementById("google_logout").style.display="block")}},galleryLightBox:function(){function a(){var a,b,c,d;return a=i.getTime(),b=new Date,c=b.getTime(),d=c-a,i=b,d}function b(){var a={};return a.height=RS3.global.viewportDimensions().cHeight-100,a.width=RS3.global.viewportDimensions().cWidth-100,a}function c(){g.each(function(){var a=$(this),b=a.attr("rel"),c=a.attr("href");galleries[b]?galleries[b].img.push(c):(galleries[b]=[],galleries[b].img=[],galleries[b].width=0,galleries[b].height=0,galleries[b].img.push(c))})}function d(){for(gallery in galleries){var a=galleries[gallery].img,b=new Image;b.src=a[0],b.onload=function(){galleries[gallery].width<b.width&&(galleries[gallery].width=b.width),galleries[gallery].height<b.height&&(galleries[gallery].height=b.height)}}}function e(a,c){var d,e=a.width,f=a.height,g=e/f,h=a.img,i=b().height,j=b().width;j<e&&(e=j,f=e/g),i<f&&(f=i,e=g*f),$("html").hasClass("no-borderimage")&&(f+=10),d='<div id="'+c+'" class="flexsliderLightbox" style="overflow:hidden;width: '+e+"px; height: "+f+'px;"><div class="tl corner"></div><div class="tr corner"></div><div class="bl corner"></div><div class="br corner"></div><ul class="slides">';for(var k=0;k<h.length;k++)d+='<li><img src="'+h[k]+'"></li>';return d+="</ul></div>"}function f(a,b){var c;for(c=0;c<b.length&&b[c]!==a;c++);return c}var g=$(".galleryLightBox"),h=$(".carouselLightboxNav"),i=new Date;$body=$("body"),galleries={},0!==g.length&&0!==h.length&&(h.on("mouseenter",function(){var a=$(this);a.width()>b().width||a.height()>b().height?h.find(".galleryLightBox").addClass("inactive"):h.find(".galleryLightBox").removeClass("inactive")}),c(),d(),h.flexslider({animation:"fade",slideshow:!1,slideshowSpeed:7e3,controlNav:!1,before:function(b){var c=b.animatingTo,d=b.slides.eq(c).find("img"),e=$(".flex-active-slide"),f=e.find("a"),g=f.find("img").attr("src");d.attr("src")!=d.data("src")&&d.attr("src",d.data("src")),RS3.tracking.pushTrackEvent("media_slider_"+$("body").attr("id"),"unload",g,a())},after:function(a){var b=$(".flex-active-slide"),c=b.find("a"),d=c.find("img").attr("src"),e=b.index("ul.slides>li");RS3.tracking.pushTrackEvent("media_slider_"+$("body").attr("id"),"load",d,e)},start:function(a){$(".flex-viewport .slides a").click(function(){var a=$(".flex-active-slide"),b=a.find("a"),c=b.find("img").attr("src"),d=a.index("ul.slides>li");RS3.tracking.pushTrackEvent("media_slider_"+$("body").attr("id"),"click",c,d)})}}),h.on("click",".galleryLightBox",function(b){b.preventDefault();var c=$(this),d=c.attr("rel"),g=c.attr("href"),h=f(g,galleries[d].img);c.hasClass("inactive")||($body.append(e(galleries[d],d)),$("#"+d).flexslider({animation:"fade",slideshow:!1,controlNav:!1,slideshowSpeed:7e3,startAt:h,before:function(b){var c=$(".flex-active-slide"),d=c.find("a"),e=d.find("img").attr("src");RS3.tracking.pushTrackEvent("media_slider_"+$("body").attr("id"),"unload",e,a())},after:function(){var a=$(".flex-active-slide"),b=a.find("a"),c=b.find("img").attr("src"),d=a.index("ul.slides>li");RS3.tracking.pushTrackEvent("media_slider_"+$("body").attr("id"),"load",c,d)},start:function(){$(".flex-viewport .slides a").click(function(){var a=$(".flex-active-slide"),b=a.find("a"),c=b.find("img").attr("src"),d=a.index("ul.slides>li");RS3.tracking.pushTrackEvent("media_slider_"+$("body").attr("id"),"click",c,d)})}}),$.fancybox.open($("#"+d),{openEffect:"none",closeEffect:"none",wrapCSS:"galleryWrap",afterClose:function(){$("#"+d).remove()},tpl:{wrap:RS3.global.lightbox.wrap},scrolling:!1,fitToView:!1,onUpdate:RS3.global.lightbox.onUpdate}))}))},gfLightbox:function(){var a=$(".greyFrameLightbox");a.fancybox({openEffect:"none",closeEffect:"none",tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner greyFrame"><div class="tl corner"></div><div class="tr corner"></div><div class="bl corner"></div><div class="br corner"></div></div></div></div></div>'},scrolling:!1,helpers:{media:{}},onUpdate:function(){var a=$(".fancybox-inner.greyFrame");$("html").hasClass("no-borderimage")&&a.find("iframe").width(a.width()-10).height(a.height()-10)}})},countdownTimer:function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m;l=(new Date).getTime(),c=1e3,d=60*c,e=60*d,f=24*e,m=a.data("endmillis"),h={days100:{oldNumber:0,newNumber:0},days10:{oldNumber:0,newNumber:0},days0:{oldNumber:0,newNumber:0},hours10:{oldNumber:0,newNumber:0},hours0:{oldNumber:0,newNumber:0},minutes10:{oldNumber:0,newNumber:0},minutes0:{oldNumber:0,newNumber:0},seconds10:{oldNumber:0,newNumber:0},seconds0:{oldNumber:0,newNumber:0}},j={days100:a.find(".day100 span.newNumber"),days10:a.find(".day10 span.newNumber"),days0:a.find(".day0 span.newNumber"),hours10:a.find(".hour10 span.newNumber"),hours0:a.find(".hour0 span.newNumber"),minutes10:a.find(".minutes10 span.newNumber"),minutes0:a.find(".minutes0 span.newNumber"),seconds10:a.find(".seconds10 span.newNumber"),seconds0:a.find(".seconds0 span.newNumber")},i={days100:a.find(".day100 span.oldNumber"),days10:a.find(".day10 span.oldNumber"),days0:a.find(".day0 span.oldNumber"),hours10:a.find(".hour10 span.oldNumber"),hours0:a.find(".hour0 span.oldNumber"),minutes10:a.find(".minutes10 span.oldNumber"),minutes0:a.find(".minutes0 span.oldNumber"),seconds10:a.find(".seconds10 span.oldNumber"),seconds0:a.find(".seconds0 span.oldNumber")};var n=function(){var a,b,i,j,k;l=(new Date).getTime(),g=parseInt(m)-l,a=Math.floor(g/f),k=g-a*f,b=Math.floor(k/e),k-=b*e,i=Math.floor(k/d),k-=i*d,j=Math.floor(k/c),$.each(h,function(){this.oldNumber=this.newNumber}),h.days100.newNumber=Math.floor(a/100),h.days10.newNumber=Math.floor(a%100/10),h.days0.newNumber=a%10,h.hours10.newNumber=Math.floor(b/10),h.hours0.newNumber=b%10,h.minutes10.newNumber=Math.floor(i/10),h.minutes0.newNumber=i%10,h.seconds10.newNumber=Math.floor(j/10),h.seconds0.newNumber=j%10},o=function(a,b,c){var d;b.oldNumber!==b.newNumber&&(p(i[a],b.oldNumber,"oldNumber"),i[a].show(),p(j[a],b.newNumber,"newNumber"),c?(d=function(){i[a].hide().css({opacity:1}).removeClass("animate")},i[a].animate({opacity:0},800,d).addClass("animate")):i[a].hide(),j[a].show())},p=function(a,b,c){a.removeClass().addClass(c+" num"+b)},q=function(a){return g<0?void clearInterval(k):void $.each(h,function(b){o(b,h[b],a)})},r=function(a){n(),q(a)};r(!1),g>0&&(a.show().animate({opacity:"1"}),k=setInterval(function(){r(b)},1e3))},tooltip:function(){$(".tooltipLink").on("mouseenter",function(){var a=$(this),b=a.data("target"),c=$("#"+b);c.show()}).on("mouseleave",function(){var a=$(this),b=a.data("target"),c=$("#"+b);c.hide()}).on("click",function(a){a.preventDefault()}).on("mousemove",function(a){var b=$(this),c=b.data("target"),d=$("#"+c),e=b.parents(".tooltipOuter").offset();d.css({top:a.pageY-e.top+10,left:a.pageX-e.left+20})})},detailsElement:function(){var a=$("summary");a.children().on("click",function(a){a.stopPropagation()}),a.on("click",function(){$(this).parent().toggleClass("details--show")})},init:function(){"use strict";RS3.global.external(),RS3.global.internal(),RS3.global.playerCount(),RS3.global.lightbox.init(),RS3.global.tabbedElement(),RS3.global.responsiveMenu(),RS3.global.headerDescriptionToggle(),RS3.global.categoryDropDown.getNewsCats(),RS3.global.galleryLightBox(),RS3.global.gfLightbox(),RS3.global.tooltip()}},RS3.splashpage={tracking:function(){"use strict";$("#continue").on("click",function(){RS3.tracking.pushTrackEvent("mainsite_continue_splash","click",pageLocation)}),$("#trailerWatch").on("click",function(){RS3.tracking.pushTrackEvent("video_splash","click",pageLocation)})},init:function(){"use strict";RS3.splashpage.tracking()}},RS3.tracking={trackingPixel:function(a,b,c,d){"use strict";var e=baseURL+"/img/track/2013_";d&&(e=baseURL+"/img/track/track.gif?jptg=rswf2&jptv=0-"),null!=a&&a.preventDefault();var f=new Image;return f.src=e+b,c&&(window.location=c),!1},pushTrackEvent:function(a,b,c,d){"use strict";a&&b&&dataLayer.push({event:"GAEvent",eventCategory:a,eventAction:b,eventLabel:c,eventInteraction:d})},init:function(){$(".userBarContent .play").on("click",function(){var a=0;loggedIn!==-1&&(a=1),RS3.tracking.pushTrackEvent("play_button_topnav","click",pageLocation,a)}),$("#newAccount").on("click",function(){RS3.tracking.pushTrackEvent("account_create","click",pageLocation)}),$(".language div ul li").on("click",function(){var a,b;a=$(this).attr("class"),"en"===a?b=0:"de"===a?b=1:"fr"===a?b=2:"pt"===a?b=3:"es"===a&&(b=6),RS3.tracking.pushTrackEvent("language_selector","click",a,b)})}},RS3.homepage={carousel:function(){"use strict";var a=$("#carousel");new Date;a.find("li").length>1&&a.flexslider({animation:"fade",slideshow:!0,slideshowSpeed:7e3,before:function(a){var b=a.animatingTo,c=a.slides.eq(b).find("img"),d=$(".flex-active-slide");d.find("a");c.attr("src")!=c.data("src")&&c.attr("src",c.data("src"))},start:function(a){$(".flex-viewport .slides a").click(function(){var a=$(".flex-active-slide"),b=a.find("a"),c=b.find("img").attr("src"),d=a.index("#carousel ul.slides>li");RS3.tracking.pushTrackEvent("community_banner","click",c,d)})}})},promos:{init:function(){$("#promos").on("click",".selection li h3 a",function(a){var b=$(this),c=b.text(),d=b.index(".selection li h3 a")+1;RS3.tracking.pushTrackEvent("community_promo","click",c,d)})}},poll:function(){"use strict";var a=[],b=$("ul#pollResults"),c=$("ul#pollResults").find("li.pollResult");c.removeClass("real"),c.find("div").hide(),c.each(function(b,c){var d=$(c),e=d.find("div.voteBar"),f=e.width();a.push([b,f])}),a.sort(function(a,b){return b[1]-a[1]}),$.each(a,function(a,c){var d=b.find("li.pollResult:eq("+c[0]+")"),e=d.clone();e.addClass("real").appendTo("ul#pollResults")}),c.not(".real").remove();var c=$("ul#pollResults").find("li.pollResult");c.each(function(a,b){var c=$(b),d=c.find("div.voteText"),e=c.find("div.voteBarOuter"),f=e.find("div.voteBar"),g=f.width(),h=1e3;f.width(0),d.fadeIn(1e3,function(){e.show(),f.show().animate({width:g+"px"},h)})})},playNow:function(){$("#play").on("click",function(a){RS3.tracking.pushTrackEvent("home_page_header_play_button_clicked","click",pageLocation),RS3.tracking.trackingPixel(a,""+RS3.TRACKING_PLAY_BUTTON_CLICKED,this.href,!0)})},accountsCreated:function(){RS3.homepage.accountsCreatedAjax(),setInterval(function(){RS3.homepage.accountsCreatedAjax()},3e4)},accountsCreatedAjax:function(){$.ajax({url:ajaxAccountsCreatedUrl+"/rsusertotal.ws",dataType:"jsonp",timeout:3e3}).done(function(a){"undefined"!=typeof a.accountsformatted&&$("#numberAccounts").html(a.accountsformatted)})},lazyLoadVideos:function(a){$("#videoLink").on("click",function(a){$("#videos figure img").each(function(){$(this).attr("src",$(this).data("original"))}),$(this).unbind("click")})},init:function(){"use strict";RS3.tracking.trackingPixel(null,RS3.TRACKING_HOME_PAGE_LOADED,null,!0),RS3.homepage.carousel(),RS3.homepage.promos.init(),RS3.homepage.playNow(),RS3.homepage.accountsCreated(),$("#pollResults").length&&RS3.homepage.poll(),RS3.homepage.lazyLoadVideos()}},RS3.news={moreNews:function(){var a,b,c=$("#moreNews,#moreVideos"),d="";c.on("click","a",function(c){c.preventDefault(),$(this).parents("#moreNews").hasClass("moreArchive")&&(a=!0);var e=$(this),f=e.parents(".btnWrap").attr("id"),g=this.href,h=g.substr(g.indexOf("&page=")+6),i=parseInt(h)+1,j=g.substr(0,g.length-h.length)+i,k="moreNews"===f?"#newsSection":"#videoSection";$.ajax({url:g,success:function(c){var f=$.parseHTML(c),g=$(f).find(k+" article"),h=$(f).find(k).html();h==d?e.parents(".btnWrap").hide():($(k).append(g),d=f,a||4!==i?e.attr("href",j):(e.attr("href",baseURL+"/archive"),e.find("span").text("Visit Archive"),e.parents(".btnWrap").removeClass("showMore").unbind("click")),d=h,fullTotal&&(b=$("#newsSection").children("article").length,b>=fullTotal&&e.parents(".btnWrap").hide()))},error:function(){alert("Sorry - there has been an error processing this request. Please try again.")}})})},archiveButton:function(){var a=$("#archiveButton"),b=$("#archiveSelect");a.on("click",function(c){c.preventDefault(),b.stop().slideToggle(250,function(){var b=$(this);a.toggleClass("expand",b.is(":visible"))})})},archiveFilter:function(){$(".archiveSelectSubmit").slideDown();$(".months a").on("click",function(a){a.preventDefault();var b=$(this);$(".months li").removeClass("active"),b.parent().addClass("active"),$("#month").val(b.attr("data-month"))}),$(".years a").on("click",function(a){a.preventDefault();var b=$(this);$(".years li").removeClass("active"),b.parent().addClass("active"),$("#year").val(b.attr("data-year"))})},init:function(){RS3.news.moreNews(),RS3.news.archiveButton(),RS3.news.archiveFilter()}},RS3.mediavideos={youtube:function(){if($("#videoPanelArea").length){var a=$("#videoPanelArea"),b="PLMjuVhi1Lg6f-Zyo6ZZPuU0deaAGCy_G2",c="";switch(a.html("Loading videos"),currentLangId){case 1:c="&cc_lang_pref=de&cc_load_policy=1";break;case 2:c="&cc_lang_pref=fr&cc_load_policy=1";break;case 3:c="&cc_lang_pref=pt",b="PL7EF50iQcMbLcwAJpbedalcTN4NvpwBm5"}var d=a.data("value"),e="http://www.youtube.com/embed/",f="<div class='mediaEntity video'>",g="<span class='HoverImgJs'><img src='http://www.runescape.com/img/global/buttons/navigationNext.png' alt='Video' title='Video'><img src='http://www.runescape.com/img/global/buttons/navigationNext.png' class='HoverImgJsFg'></span>";$.ajax({type:"GET",url:"http://gdata.youtube.com/feeds/api/playlists/"+b+"?v=2&alt=json&orderby=published&max-results="+d,cache:!1,dataType:"jsonp",success:function(b){var d="";$.each(b.feed.entry,function(a,b){var h=(b.title.$t,b.link[1].href),i=h.split("/"),j=i[i.length-2],k=e+j+"?autoplay=1"+c,l="http://img.youtube.com/vi/"+j+"/hqdefault.jpg";d+=f+"<a href='"+k+"' rel='shadowbox[videos];height=315;width=560;player=iframe'>"+g+"<img src='"+l+"' alt='Video' title='Video' width='218' height='164' class='thumb'></a></div>"}),a.html(d),Shadowbox.init({continuous:!0,counterType:"skip",overlayColor:"#000000",overlayOpacity:.8,players:["img","iframe"]})}})}}},RS3.membersBenefits={scrollTo:function(){"use strict";$("#allBenefits").on("click","a",function(a){a.preventDefault();var b=$(this);$("html, body").stop().animate({scrollTop:$(b.attr("href")).offset().top},500)})},hexPanel:function(){$(".hexPanel").on("click",function(a){var b=$(this),c=b.parent();c.find(".hexContent").fadeIn(200),b.parents(".hexBoxes").find(".deco").fadeOut(180),RS3.tracking.trackingPixel(a,hexPanelTrackingPixel+"/"+c.attr("class")+"/1"),RS3.tracking.pushTrackEvent("members_benefits","hexpanel_click",b.find("p").text(),b.index(".hexPanel")+1)}),$(".hexContent .close").on("click",function(){var a=$(this),b=a.parent();b.fadeOut(200),a.parents(".hexBoxes").find(".deco").fadeIn(220),RS3.tracking.pushTrackEvent("members_benefits","hexcontent_close",b.find("h3").text(),b.index(".hexContent")+1)})},buyNowButtons:function(){$(".buyNowPackage a,.btnWrap a").on("click",function(){var a=$(this),b=a.attr("href"),c=0,d="bottom",e="rs1m";b.indexOf("rs1w")>0&&(c=1,d="1 Week",e="rs1w"),b.indexOf("rs1m")>0&&(c=1,d="1 Month"),b.indexOf("rs3m")>0&&(c=3,d="3 Months",e="rs3m"),b.indexOf("rs4m")>0&&(c=4,d="4 Months",e="rs4m"),b.indexOf("rs4m")>0&&(c=4,d="4 Month",e="rs4m"),b.indexOf("rs6m")>0&&(c=6,d="6 Months",e="rs6m"),b.indexOf("rs12m")>0?(c=12,d="12 Months",e="rs12m"):b.indexOf("packagegroupredirect.ws")>0&&RS3.membersBenefits.trackingPixel(null,null,1,e),RS3.tracking.pushTrackEvent("members_benefits","buy_now",d,c)}),$("#membersBenefits #inline").on("click",function(){var a=$("#loginPanel input[name=dest]").val();a.indexOf("members_benefits")==-1&&($("#loginPanel input[name=mod]").attr("value","www"),$("#loginPanel input[name=ssl]").attr("value",0),$("#loginPanel input[name=dest]").attr("value","members_benefits"))}),$("#playVideoLink").on("click",function(){RS3.tracking.pushTrackEvent("video_members_benefits","click",pageLocation)})},updateAffiliateLinks:function(){if($(".alternativeLogin").length){var a=$(".alternativeLogin li").find("a:not(.facebookLogin)");a.each(function(a){var b=$(this),c=b.attr("href"),d=c.split("?")[0],e="?mod="+$("#loginPanel input[name=mod]").val()+"&ssl="+$("#loginPanel input[name=ssl]").val()+"&dest="+encodeURIComponent($("#loginPanel input[name=dest]").val()),f=d+e;b.attr("href",f)})}},tracking:function(){"use strict";RS3.membersBenefits.trackingPixel(null,null,0,""),$("ul#membersBenefitsHex").on("click",".hexPanel",function(){var a=$(this).data("tracking");RS3.membersBenefits.trackingPixel(null,null,a,"1:expand")}),$("ul#membersBenefitsHex").on("click",".close",function(){var a=$(this).parent().siblings(".hexPanel").data("tracking");RS3.membersBenefits.trackingPixel(null,null,a,"2:close")}),$("ul#membersBenefitsHex").on("click",".buyNow",function(){var a=$(this).parent().siblings(".hexPanel").data("tracking");RS3.membersBenefits.trackingPixel(null,null,a,"3:click buy")}),$("#seeAllBenefits").on("click",function(){RS3.membersBenefits.trackingPixel(null,null,2,"")}),$("#buyNowBottom").on("click",function(){RS3.membersBenefits.trackingPixel(null,null,20,"")}),$("#facebooklogin").on("click",function(){RS3.membersBenefits.trackingPixel(null,null,27,"")}),$("ul#footerSocialButtons li a").on("click",function(){var a=null;switch($(this).parent().attr("class")){case"rss":a=30;break;case"facebook":a=31;break;case"twitter":a=32;break;case"youtube":a=33;break;case"google":a=34;break;case"reddit":a=35}RS3.membersBenefits.trackingPixel(null,null,a,"")}),$("#footerLikeButton").on("click",function(a){a.stopPropagation(),RS3.membersBenefits.trackingPixel(null,null,36,"")}),$("#footerTermsLink").on("click",function(){RS3.membersBenefits.trackingPixel(null,null,37,"")}),$("#footerPrivacyLink").on("click",function(){RS3.membersBenefits.trackingPixel(null,null,38,"")}),$("#footerCookiesLink").on("click",function(){RS3.membersBenefits.trackingPixel(null,null,39,"")}),$("#footerSelectLanguage").on("click","a",function(a){RS3.membersBenefits.trackingPixel(a,$(this).attr("href"),40,"")})},trackingPixel:function(a,b,c,d){"use strict";var e=baseURL+"/members_benefits?jptg=mbt&jptv="+c+"|"+d;return null!=a&&a.preventDefault(),$.ajax({url:e,dataType:"jsonp",timeout:3e3,complete:function(){b&&(window.location=b)}}),!1},init:function(){"use strict";RS3.membersBenefits.hexPanel(),RS3.membersBenefits.scrollTo(),RS3.membersBenefits.buyNowButtons(),RS3.membersBenefits.tracking()}},RS3.hiscores={init:function(){"use strict";RS3.hiscores.countdownTimer(),RS3.hiscores.compareFormToggle(),RS3.hiscores.findMeToggle(),RS3.hiscores.factionWidthBar(),RS3.hiscores.tempShowMoreIcon(),RS3.hiscores.tempFilterShowMoreIcon(),RS3.hiscores.tempDescriptionHover(),RS3.hiscores.tempRankingSidebar(),RS3.hiscores.overviewPage.init()},countdownTimer:function(){var a=[];$(".countdownTimer").each(function(){var b=$(this);a.push(RS3.global.countdownTimer(b))})},compareFormToggle:function(){$(".changeCharacterLink").length&&$(".changeCharacterForm").length&&$("a.changeCharacterLink").on("click",function(a){a.preventDefault(),$("a.changeCharacterLink").toggleClass("changeCharacterOpen"),$(".changeCharacterForm").slideToggle()})},findMeToggle:function(){$(".findMeContent").length&&$(".findMeLink").length&&$("a.findMeLink").on("click",function(a){a.preventDefault(),$(this).toggleClass("findMeLinkOpen"),$(".findMeContent").slideToggle()})},factionWidthBar:function(){if($("#factionWidth").length){var a=$("#factionWidth"),b=a.data("width");setTimeout(function(){a.animate({width:b+"px"})},1e3)}},tempDescriptionHover:function(){$("#futureHiScoreSegment").on("mouseenter","a.descLinkStyle",function(a){var b=$(this),c=b.data("target"),d=$("#"+c);d.show()}).on("mousemove","a.descLinkStyle",function(a){var b=$(this),c=b.data("target"),d=$("#"+c),e=b.parents(".paraDesc").offset();d.css({top:a.pageY-e.top+10,left:a.pageX-e.left+20})}).on("mouseleave","a.descLinkStyle",function(a){var b=$(this),c=b.data("target"),d=$("#"+c);d.hide()}).on("click","a.descLinkStyle",function(a){a.preventDefault()})},tempFilterShowMoreIcon:function(){if($(".tempHSFilterShowMoreButton").length){var a=$("#ajaxLoadOuter");$("#futureHiScoreSegment,#pastHiScoreSegment").on("click",".tempHSFilterShowMoreButton a",function(b){b.preventDefault();var c=$(this),d=c.attr("href")+" #ajaxLoadInner",e=a.parent(".tempHSOverviewSegment");e.css("min-height",e.outerHeight()),a.fadeOut(250,function(){e.addClass("tempLoading"),a.load(d,function(){e.removeClass("tempLoading"),a.fadeIn(250),RS3.hiscores.tempDescriptionHover()})})})}},tempShowMoreIcon:function(){$(".tempHSExtraBoxContainer").length>0&&($(".tempHSShowMoreButton a span").html("Show More"),$(".tempHSOverDividerActive").addClass("tempHSOverDividerShort"),$(".tempHSShowMoreContainerActive").show(),$(".tempHSShowMoreButton a").on("click",function(a){var b=$(this),c=$(".tempHSShowMoreButton a").index(this),d=$(".tempHSExtraBoxContainer").get(c);b.parents(".activeShowMoreButton").length?$(d).data("shown")!==!0&&(a.preventDefault(),$(d).data("shown",!0),b.parents(".btnWrap").hide(),$(".tempHSOverDividerActive").removeClass("tempHSOverDividerShort"),$(d).slideDown()):$(d).data("shown")!==!0&&(a.preventDefault(),$(d).data("shown",!0),$(d).slideDown(),b.find("span").html("View All"))}))},tempRankingSidebar:function(){$("a.seasonalEventLink").on("click",function(a){a.preventDefault();var b=$(this),c=b.data("load"),d=$("#"+c),e=$(".seasonalEventShell:visible");e.fadeOut(250,function(){d.fadeIn(250)})})},overviewPage:{init:function(){RS3.hiscores.overviewPage.populateCarousel()},activateCarousel:function(){if($("#hsCarousel").length){var a=$("#hsCarousel");a.flexslider({animation:"fade",slideshow:!0,slideshowSpeed:7e3,controlNav:!1,start:function(a){var b=a.find(".slides .overviewSliderItem img");b.data("src")&&b.attr("src")!=b.data("src")&&b.attr("src",b.data("src"))}})}},populateCarousel:function(){if($("#hsCarousel").length){var a=[],b=$.getJSON(ajaxHiscoresUrl+"/ranking.json?table=0&category=0&size=3",function(b){a.push('<thead><tr><th class="ov1">Rank</th><th class="ov2">Character Name</th></tr></thead><tbody>'),$.each(b,function(b,c){var d=escape($.trim(c.name));if(loggedIn!=-1)var e=RS3.global.addCToLink(ajaxHiscoresUrl+"/compare?user1="+d);else var e=ajaxHiscoresUrl+"/compare?user1="+d;a.push('<tr><td class="ov1"><a href="'+e+'">'+c.rank+"</a></td>"),a.push('<td class="ov2"><a href="'+e+'">'+c.name+"</a></td></tr>")}),a.push('<tr class="hover loginRow" id="hsRank"><td class="ov1">Your Rank</td><td class="ov2"><a href="'+ajaxHiscoresUrl+'/overview?findme=1" class="specialLink">Log In</a> to find out</td></tr>'),a.push("</tbody>"),$("#topHiscoreAjaxResponse").append(a.join("")),$("#topHiscoreOuter").show()}).fail(function(){$("#topHiscoreOuter").hide()}),c=[],d=$.getJSON(ajaxClanHiscoresUrl+"/clanRanking.json",function(a){
c.push('<thead><tr><th class="ov1 textCenter">Rank</th><th class="ov2">Clan Name</th></tr></thead><tbody>'),$.each(a,function(a,b){var d=escape($.trim(b.clan_name));if(loggedIn!=-1)var e=RS3.global.addCToLink(ajaxClanHiscoresUrl+"/compare.ws?clanName="+d);else var e=ajaxClanHiscoresUrl+"/compare.ws?clanName="+d;c.push('<tr><td class="ov1"><a href="'+e+'">'+b.rank+"</a></td>"),c.push('<td class="ov2"><a href="'+e+'">'+b.clan_name+"</a></td></tr>")}),c.push('<tr class="hover loginRow" id="clanRank"><td class="ov1">Your Rank</td><td class="ov2"><a href="'+ajaxHiscoresUrl+'/overview?findme=1" class="specialLink">Log in</a> to find out</td></tr>'),c.push("</tbody>"),$("#clanHiscoreAjaxResponse").append(c.join("")),$("#clanHiscoreOuter").show()}).fail(function(){$("#clanHiscoreOuter").hide()});$.when(b,d).then(function(){loggedIn!=-1?RS3.hiscores.overviewPage.getUserRank():RS3.hiscores.overviewPage.activateCarousel()}).fail(function(){RS3.hiscores.overviewPage.activateCarousel()})}},getUserRank:function(){var a=RS3.global.addCToLink(ajaxHiscoresUrl+"/userRanking.json");$("#hsRank").hide();var b=$.getJSON(a,function(a){if(""!=a.displayName&&0!=parseInt(a.rank)){if($("#hsRank").length){var b=[],c=escape($.trim(a.displayName));if(loggedIn!=-1)var d=RS3.global.addCToLink(ajaxHiscoresUrl+"/compare?user1="+c);else var d=ajaxHiscoresUrl+"/compare?user1="+c;b.push('<td class="ov1"><a href="'+d+'">'+a.userRank+"</a></td>"),b.push('<td class="ov2"><a href="'+d+'">'+a.displayName+"</a></td>"),$("#hsRank").html(b.join("")).removeClass("loginRow")}}else $("#hsRank").html('<td colspan="2">There is no rank to show</td>')}).fail(function(){$("#hsRank").html('<td colspan="2">There is no rank to show</td>')}).always(function(){$("#hsRank").show()});a=RS3.global.addCToLink(ajaxClanHiscoresUrl+"/userClanRanking.json"),$("#clanRank").hide();var c=$.getJSON(a,function(a){if(""!=a.displayName&&""!=a.clanName&&0!=parseInt(a.clanRank)){if($("#clanRank").length){var b=[],c=escape($.trim(a.clanName));if(loggedIn!=-1)var d=RS3.global.addCToLink(ajaxClanHiscoresUrl+"/compare.ws?clanName="+c);else var d=ajaxClanHiscoresUrl+"/compare.ws?clanName="+c;b.push('<td class="ov1"><a href="'+d+'">'+a.clanRank+"</a></td>"),b.push('<td class="ov2"><a href="'+d+'">'+a.clanName+"</a></td>"),$("#clanRank").html(b.join("")).removeClass("loginRow")}}else $("#clanRank").html('<td colspan="2">There is no rank to show</td>')}).fail(function(){$("#clanRank").html('<td colspan="2">There is no rank to show</td>')}).always(function(){$("#clanRank").show()});$.when(b,c).then(function(){RS3.hiscores.overviewPage.activateCarousel()}).fail(function(){RS3.hiscores.overviewPage.activateCarousel()})}}},RS3.hiscoreSummer2016={init:function(){RS3.hiscores.countdownTimer()}},RS3.assoc={dom:{optionWrapper:null,associationWrapper:null,showAssocTrigger:null,newMemberPrompt:null,errorMessage:null,associationForm:null,usernameField:null,passwordField:null,body:null},showAssoc:function(){RS3.assoc.dom.associationWrapper.show(),RS3.assoc.dom.optionWrapper.hide(),RS3.assoc.dom.usernameField.focus()},showOptions:function(){RS3.assoc.dom.associationWrapper.hide(),RS3.assoc.dom.optionWrapper.show()},showErrors:function(a){RS3.assoc.dom.errorMessage.text(a).show(),RS3.assoc.dom.usernameField.focus()},hideErrors:function(){RS3.assoc.dom.errorMessage.hide(),RS3.assoc.dom.newMemberPrompt.show()},checkForm:function(){return""==RS3.assoc.dom.usernameField.val()||""==RS3.assoc.dom.passwordField.val()?(RS3.assoc.showErrors(assocVar.errorMessages.alertUsername),!1):(RS3.assoc.dom.errorMessage.hide(),void RS3.assoc.dom.associationForm.submit())},init:function(){var a={body:$("body"),optionWrapper:$("#associationForm #associationOptions"),associationWrapper:$("#associationForm #associateAccount"),showAssocTrigger:$("#associationForm #syncUser .btn a"),newMemberPrompt:$("#associationForm #createNewAccount"),errorMessage:$("#associationForm #errorMessage"),associationForm:$("#associationForm"),promptMessage:$("#associationForm #associatePrompt"),usernameField:$("#associationForm #username"),passwordField:$("#associationForm #password"),assocSubmitTrigger:$("#associationForm #existingplayer")};RS3.assoc.dom=a,RS3.assoc.dom.showAssocTrigger.on("click",function(a){a.preventDefault(),RS3.assoc.showAssoc()}),RS3.assoc.dom.assocSubmitTrigger.on("click",function(a){a.preventDefault(),RS3.assoc.checkForm()}),assocVar.errorCode>0&&(RS3.assoc.showAssoc(),RS3.assoc.showErrors())}},RS3.legacy={init:function(){"use strict";RS3.global.external(),RS3.global.playerCount(),RS3.global.lightbox.init(),RS3.mediavideos.youtube(),RS3.global.headerDescriptionToggle()}},RS3.weblogin={init:function(){"use strict";$(".loginiframe").length&&(window.parent.location.href=RS3.webloginUrl+"/loginform.ws?mod=www&ssl=1&dest=account_settings.ws"),$("#username").focus(),RS3.global.facebook.loadFacebookAPI(RS3.global.facebook.setUpEvents)}},RS3.affiliate={init:function(){"use strict";RS3.affiliate.axeso5Toolbar()},axeso5Toolbar:function(){$("#dvAxeso5Toolbar").length&&void 0!==$.fn.axeso5Toolbar&&$("#dvAxeso5Toolbar").axeso5Toolbar({uFC:"false",uL:"false",uLC:"false",uMT:"true"})}},RS3.bonds={carousel:function(){var a=$("#carousel");a.flexslider({animation:"fade",slideshow:!0,slideshowSpeed:2e4,controlNav:!1,before:function(a){var b=a.animatingTo,c=a.slides.eq(b).find("img"),d=$(".flex-active-slide"),e=d.find("a");e.find("img").attr("src");c.attr("src")!=c.data("src")&&c.attr("src",c.data("src"))}})},init:function(){RS3.bonds.carousel()}},RS3.combat={carousel:function(){var a=$("#carousel");a.flexslider({animation:"fade",slideshow:!0,slideshowSpeed:5e3,controlNav:!1})},init:function(){this.carousel()}},RS3.storeloc={init:function(){"use strict";RS3.storeloc.events()},events:function(){var a=$("#changeFlag");if(a.on("click","li",function(){var b=$(this),c=b.text(),d=b.data("flag");a.find("li").removeClass("selected"),b.addClass("selected"),RS3.storeloc.changeView(d,c)}),$("#currentCountry").length){var b=$("#currentCountry");b.addClass("selected");var c=b.text(),d=b.data("flag");RS3.storeloc.changeView(d,c)}else{var b=$(".defaultCountry");b.addClass("selected");var c=b.text(),d=b.data("flag");RS3.storeloc.changeView(d,c)}},changeView:function(a,b){var c=$("#changeFlag");c.find("#countryName").text(b),c.removeClass().addClass("countryFlag "+a),$(".shopList").hide(),$("#"+a).fadeIn()}},RS3.goodwill={init:function(){RS3.goodwill.getHiScores(),$(".goodwill-tab").on("click",function(a){a.preventDefault();var b=$(this),c=b.attr("href");$(".tabbednav__tab--active").removeClass("tabbednav__tab--active"),$(".method--show").removeClass("method--show"),b.parent().addClass("tabbednav__tab--active"),$(c).addClass("method--show")}),$("#coins_thermometer").css("height",thermometerHeight)},getHiScores:function(){$.ajax({url:ajaxCoinURL,dataType:"jsonp",timeout:3e3,success:function(a){RS3.goodwill.enterPlayers(a,"coins")}}),$.ajax({url:ajaxBondURL,dataType:"jsonp",timeout:3e3,success:function(a){RS3.goodwill.enterPlayers(a,"bonds")}})},enterPlayers:function(a,b){var c=a.length;c>=3&&(c=2);for(var d,e,f=0;f<=c;f++)d="#"+b+"_donator_"+f,e=$(d+" .top-donators__avatar"),e.attr("src",avatarBase+a[f].name+"/chat.png?h=75&w=75"),e.attr("title",a[f].name),e.attr("alt",a[f].name),$(d+" .top-donators__name").html(a[f].name),"coins"==b?$(d+" .top-donators__total").html(a[f].score_formatted+millionChar):$(d+" .top-donators__total").html(a[f].score_formatted)}},RS3.premierClub={getPrices:function(){$.ajax({url:billingStoreUrl,timeout:3e3,dataType:"json",success:function(a){for(var b,c,d,e,f=0;f<a.results.length;f++)b=a.results[f],c=$("#premier-offer-continue-"+f+" a"),e=$("#premier-table-continue-"+f+" a"),d=packageBaseUrl+b.packageGroup,$("#premier-offer-length-"+f).prepend(b.quantity),$("#premier-offer-price-"+f).text(b.localisedPrice),$("#premier-table-total-"+f).text(b.localisedPrice),$("#premier-offer-length-"+f+"v2").prepend(b.quantity),$("#premier-offer-price-"+f+"v2").text(b.localisedPrice),$("#premier-table-total-"+f+"v2").text(b.localisedPrice),c.attr("href",d),e.attr("href",d);a.results.length>0&&$(".premier-overview__more a").attr("href",d)}})},buyNowButtons:function(){$(".btnWrap a").on("click",function(a){var b=$(this),c=b.attr("href"),d="12",e="Default Gold";c.indexOf("rsprem15b")>0&&(d=3,e="Bronze"),c.indexOf("rsprem15s")>0&&(d=6,e="Silver"),c.indexOf("rsprem15g")>0&&(d=12,e="Gold"),RS3.tracking.pushTrackEvent("premier_club","buy_now",e,d)})},trackingPixel:function(){"use strict";var a=baseURL+"/track/?jptg=pc&jptv=0";$.ajax({url:a,dataType:"jsonp",timeout:3e3,complete:function(){}})},init:function(){RS3.premierClub.getPrices(),RS3.premierClub.buyNowButtons(),RS3.premierClub.trackingPixel()}},RS3.companion={carousel:function(){var a=$("#carousel");a.flexslider({animation:"fade",slideshow:!1,slideshowSpeed:2e4,controlNav:!0,before:function(a){var b=a.animatingTo,c=a.slides.eq(b).find("img"),d=$(".flex-active-slide"),e=d.find("a");e.find("img").attr("src");c.attr("src")!=c.data("src")&&c.attr("src",c.data("src"))}})},preloadImages:function(){var a=new Image;a.src=RS3.imgRoot+"/companion_app/slide1.jpg";var b=new Image;b.src=RS3.imgRoot+"/companion_app/slide2.jpg";var c=new Image;c.src=RS3.imgRoot+"/companion_app/slide3.jpg";var d=new Image;d.src=RS3.imgRoot+"/companion_app/slide4.jpg"},events:function(){$("#appCode").on("click",function(){$(this).select()})},init:function(){RS3.companion.carousel(),RS3.companion.preloadImages(),RS3.companion.events()}},RS3.topTrumps={init:function(){"use strict";var a=[];RS3.topTrumps.pageLoadTrack(),$(".trumpJSInfoSection").hide(),$(".trumpSelectionSection").show();for(var b=0;b<=5;b+=1)a[b]=new Image;a[0].src=RS3.imgRoot+"/top_trumps/trump_hero_kre.jpg",a[1].src=RS3.imgRoot+"/top_trumps/trump_hero_zil.jpg",a[2].src=RS3.imgRoot+"/top_trumps/trump_hero_kin.jpg",a[3].src=RS3.imgRoot+"/top_trumps/trump_hero_sar.jpg",a[4].src=RS3.imgRoot+"/top_trumps/trump_hero_evi.jpg",a[5].src=RS3.imgRoot+"/top_trumps/trump_all_cards.jpg",!window.location.hash.length||"#kreearra"!==window.location.hash&&"#commander_zilyana"!==window.location.hash&&"#king_black_dragon"!==window.location.hash&&"#saradomin_colossus"!==window.location.hash&&"#evil_chicken"!==window.location.hash&&"#runescape_top_trumps"!==window.location.hash||RS3.topTrumps.cardSelect($(window.location.hash+"_select")),$(".trumpBuyNow").on("click","a",function(a){var b=new Image;b.src="/track/?jptg=tt&jptv=1"}),$(".trumpSelectionCard").on("mouseenter",function(){$(this).hasClass("trumpSelectionCardCurrent")||$(this).stop().animate({marginTop:"40px"},"fast")}).on("mouseleave",function(){$(this).hasClass("trumpSelectionCardCurrent")||$(this).stop().animate({marginTop:"60px"},"fast")}).on("click",function(a){$(this).hasClass("trumpSelectionCardCurrent")||RS3.topTrumps.cardSelect($(this))}),RS3.topTrumps.showBonds()},cardSelect:function(a){"use strict";$(".trumpSelectionCardCurrent").stop().animate({marginTop:"60px"},"fast"),$(".trumpSelectionCardCurrent").removeClass("trumpSelectionCardCurrent"),$(".trumpCardDetailsCurrent").fadeOut("fast").removeClass("trumpCardDetailsCurrent"),a.stop().animate({marginTop:"0px"},"fast"),a.addClass("trumpSelectionCardCurrent"),$("#"+a.data("assoc")).fadeIn("fast").addClass("trumpCardDetailsCurrent")},pageLoadTrack:function(){"use strict";var a=baseURL+"/track/?jptg=tt&jptv=0";$.ajax({url:a,dataType:"jsonp",timeout:3e3,complete:function(){}})},showBonds:function(){var a=$("#showBonds"),b=$("#collapse");a.click(function(a){a.preventDefault(),b.stop().slideToggle()})}},RS3.gamePage={overlayTracking:function(){function a(a){var b,c=JSON.parse?JSON.parse(JSON.stringify(a.data)):{};return"TRACKING"===c.type&&void("opened"===c.text?(RS3.tracking.pushTrackEvent("game_html5_overlay_loaded","load",pageLocation),RS3.tracking.trackingPixel(null,TRACKING_GAME_HTML5_OVERLAY_LOADED,null,!0)):(b=parseInt(c.text.split("reply-")[1]),0===b?(RS3.tracking.pushTrackEvent("game_html5_overlay_accepted","accepted",pageLocation),RS3.tracking.trackingPixel(null,TRACKING_GAME_HTML5_OVERLAY_ACCEPTED,null,!0)):1===b||3===b?(RS3.tracking.pushTrackEvent("game_html5_overlay_declined","declined",pageLocation),RS3.tracking.trackingPixel(null,TRACKING_GAME_HTML5_OVERLAY_DECLINED,null,!0)):2===b&&(RS3.tracking.pushTrackEvent("game_html5_overlay_error","error",pageLocation),RS3.tracking.trackingPixel(null,TRACKING_GAME_HTML5_OVERLAY_ERROR,null,!0))))}window.addEventListener?window.addEventListener("message",a):window.attachEvent&&window.attachEvent("onmessage",a)},showDownloadPage:function(){RS3.gamePage.showFailedScreen(),window.location=downloadUrl},showThanksScreen:function(){$.removeCookie("JXRSLAUNCHING"),$("#launchingTitle,#gameUnsupportedPage").remove(),$("#thanksTitle").addClass("game-launch-page__title--show"),$("#gameLaunchingContent").addClass("game-launch-page__content--nospin")},showFailedScreen:function(){$.removeCookie("JXRSLAUNCHING"),$("#failedLaunchPage").addClass("game-failed-page--show"),$("#gameLaunchingPage,#game").remove()},failure:function(){RS3.gamePage.showFailedScreen(),window.location=gameFailedUrl},init:function(){if($("#gameLaunchNotLoad").on("click",function(){RS3.gamePage.showFailedScreen()}),$.cookie("JXRSLAUNCHING")){var a=setTimeout(function(){$("#gameShouldLaunch").addClass("game-launch-page__should--show"),clearTimeout(a)},1e3);$.removeCookie("JXRSLAUNCHING");var b=setTimeout(function(){RS3.gamePage.showThanksScreen(),clearTimeout(b)},2e4)}else{var c=JXGLOBAL.user.browser(),d=(JXGLOBAL.user.os(),null);c.isChrome?d="chrome":c.isFirefox?d="mozilla":c.isIE?d="msie":c.isEdge&&(d="edge");var e=setTimeout(function(){if($.cookie("JXRSLAUNCHING",!0),c.isEdge)RS3.gamePage.showDownloadPage();else{$("#gameShouldLaunch").addClass("game-launch-page__should--show");var a="rs-launch://www.runescape.com/l="+currentLangId+"/jav_config.ws";checkProtocol(a,d);var b=setTimeout(function(){if(protocolSupport[a])var c=setTimeout(function(){RS3.gamePage.showThanksScreen(),clearTimeout(c)},1e4);else $.removeCookie("JXRSLAUNCHING"),$.cookie("JXRSCLIENTVERSION")?RS3.gamePage.showThanksScreen():RS3.gamePage.showDownloadPage();clearTimeout(b)},2e3)}clearTimeout(e)},1e3)}RS3.tracking.pushTrackEvent("game_java_client_loaded","load",pageLocation),RS3.tracking.trackingPixel(null,TRACKING_GAME_JAVA_CLIENT_LOADED,null,!0),RS3.gamePage.overlayTracking()}},RS3.gamePageConstants={javaVersion:"1.7.0_25+",hasJava:!1,hasJavaVersion:!1},RS3.gamePageBrowser={checkJs:function(){var a,b=document.getElementById("game");b&&(a=b.src.split(",j0,").join(",j1,"),b.src=a)},showGameScreen:function(){var a=$("#game");$.removeCookie("JXRSLAUNCHING"),$("#gameStateScreens,footer").remove(),a.addClass("java-frame--show"),a.attr("src",worldLink),RS3.gamePageBrowser.checkJs()},checkJava:function(){RS3.gamePageConstants.hasJava=deployJava.getJREs().length>=1,RS3.gamePageConstants.hasJavaVersion=deployJava.versionCheck(RS3.gamePageConstants.javaVersion)},init:function(){$("#gameLaunchNotLoad").on("click",function(){RS3.gamePage.failure()}),RS3.gamePageBrowser.checkJava();var a=1e3,b=JXGLOBAL.user.browser();b.isIE&&(a=5e3);var c=setTimeout(function(){var a=RS3.gamePageConstants.hasJava,b=RS3.gamePageConstants.hasJavaVersion,d=JXGLOBAL.user.os();a&&b&&!d.isMac?RS3.gamePageBrowser.showGameScreen():RS3.gamePage.failure(),clearTimeout(c)},a);RS3.tracking.pushTrackEvent("game_java_client_loaded","load",pageLocation),RS3.tracking.trackingPixel(null,TRACKING_GAME_JAVA_CLIENT_LOADED,null,!0),RS3.gamePage.overlayTracking()}},RS3.grandExchange={data:null,options:null,chartObj:null,formatter:null,ticker:function(){var a=$("#ticker"),b=a.find(".ticker-wrap");b.webTicker({speed:50,direction:"left",moving:!0,startEmpty:!1,duplicate:!1,rssurl:!1,rssfrequency:0,updatetype:"reset"})},chart:function(){RS3.grandExchange.formatter=new google.visualization.NumberFormat({pattern:"#,###"}),this.drawChart(average30),$("#filter a").on("click",function(a){a.preventDefault();var b,c=$(this),d=c.parent(),e=c.parents("ul");d.hasClass("active")||(e.find(".active").removeClass("active"),d.addClass("active"),e.prepend(d),b=window["average"+c[0].hash.substr(1)],RS3.grandExchange.data=google.visualization.arrayToDataTable(b),b==average30?RS3.grandExchange.options.pointSize=5:RS3.grandExchange.options.pointSize=3,RS3.grandExchange.formatter.format(RS3.grandExchange.data,1),$("#toggleTrend").is(":checked")?RS3.grandExchange.formatter.format(RS3.grandExchange.data,2):RS3.grandExchange.data.removeColumn(2),RS3.grandExchange.renderChart())}),$("#toggleTrend").on("change",function(){if($(this).is(":checked")){var a=window["average"+$("#filter .active a")[0].hash.substr(1)];RS3.grandExchange.data=google.visualization.arrayToDataTable(a),RS3.grandExchange.formatter.format(RS3.grandExchange.data,1),RS3.grandExchange.formatter.format(RS3.grandExchange.data,2)}else RS3.grandExchange.data.removeColumn(2);RS3.grandExchange.renderChart()})},drawChart:function(a){var b=JXGLOBAL.user.browser();RS3.grandExchange.data=google.visualization.arrayToDataTable(a),RS3.grandExchange.data.removeColumn(2),RS3.grandExchange.formatter.format(RS3.grandExchange.data,1),RS3.grandExchange.options={animation:{duration:1e3,startup:!0},chartArea:{left:95,height:"85%",top:50,width:"77%",backgroundColor:{stroke:"#23333e",strokeWidth:2}},backgroundColor:"transparent",legend:{position:"none"},pointSize:5,pointShape:"circle",pointsVisible:!0,series:{0:{color:"#e1bb34"},1:{color:"#b2dbee"}},hAxis:{baselineColor:"#23333e",textStyle:{color:"white"},gridlines:{color:"#23333e",count:-1},minorGridlines:{color:"transparent",count:0},titleTextStyle:{color:"transparent"}},vAxis:{baselineColor:"#23333e",format:"short",textStyle:{color:"white"},gridlines:{color:"#23333e",count:-1},title:"GP",titleTextStyle:{color:"white"}},width:665},b.isChrome||(RS3.grandExchange.options.hAxis.gridlines.color="transparent"),RS3.grandExchange.chartObj=new google.visualization.LineChart(document.getElementById("itemchart")),this.renderChart()},renderChart:function(){RS3.grandExchange.chartObj.draw(RS3.grandExchange.data,RS3.grandExchange.options)},searchFilter:function(){$(".filter-link").on("click",function(a){a.preventDefault();var b=$("#filter");b.hasClass("showElement")?(b.removeClass("showElement"),$(".filter-link").removeClass("expand")):(b.addClass("showElement"),$(".filter-link").addClass("expand"))}),this.updateMinMax()},updateMinMax:function(){if($("#priceSlider").length){var a=$("#priceSlider").val().split(";");a[0]>495500?$("#minPrice").val("495500"):$("#minPrice").val(a[0]),a[1]==maxScale&&(a[1]="+",$(".jslider-value-to span").html("500,000+")),$("#maxPrice").val(a[1])}},init:function(){this.ticker(),this.searchFilter(),"undefined"!=typeof average30&&this.chart()}},RS3.polls={drawPollResults:function(a){var b=$(".showElement"),c=b.parent().attr("id");$(".pollExpand.expanded").removeClass("expanded"),$(".polls").find(".showContent").removeClass("showContent"),c!="pollTab"+a&&($("#pollTab"+a+" .pollExpand").addClass("expanded"),$(".expanded").parent().parent().addClass("showContent"));var d=$("#pollDetails"+a);d.length>0?d.addClass("showElement"):RS3.polls.requestPoll(a),b.removeClass("showElement")},calculateReturnString:function(a){var b="",c=0;return a>=216e3?(c=a/86400,b=c.toFixed(1)+" "+pollLoc_days):a>=3600?(c=a/3600,b=c.toFixed(1)+" "+pollLoc_hours):a>=60?(c=a/60,b=c.toFixed(1)+" "+pollLoc_minutes):b=a+" "+pollLoc_seconds,b},requestPoll:function(a){$.ajax({url:pollUrl+"/pollResults.json?id="+a,dataType:"jsonp",timeout:3e3,success:function(b){if(b.errorCode>0)RS3.polls.drawErrorPane(a,b.errorCode);else if(b.isBanned&&1==b.status)RS3.polls.drawErrorPane(a,9);else if(b.pollDetails[0].options[0].hidden&&b.playerAlreadyVoted)RS3.polls.drawHiddenMessagePane(a);else if(b.pollDetails[0].options.length>9||b.pollDetails.length>1)b.running&&!b.playerAlreadyVoted&&b.canPlayerVote?window.location=pollUrl+"/vote.ws?id="+a:window.location=pollUrl+"/results.ws?id="+a;else{var c=RS3.polls.generateResultsPane(b,a),d=RS3.polls.generateDetailsPane(b,a),e="<article class='pollDetails clear' id='pollDetails"+a+"'><div class='pollDetailsTable'><div class='pollDetailsLeft'>"+d+"</div>";e+="<div class='pollDetailsRight'>"+c+"</div></div></article>",$("#pollTab"+a).append(e),setTimeout(function(){$("#pollDetails"+a).addClass("showElement")},1),RS3.polls.onPageSubmit()}},failure:function(){RS3.polls.drawErrorPane(a,-1)},error:function(){RS3.polls.drawErrorPane(a,-1)}})},generateDetailsPane:function(a,b){var c="<h5>"+pollLoc_description+"</h5><p class='pollDesc'>"+a.pollDetails[0].questionText+"</p>";return a.playerAlreadyVoted>0&&(c+="<p class='totalVotes'><strong>"+pollLoc_totalvotes+": </strong>"+a.totalNumberofVotes+"</p><p class='youHave'>"+pollLoc_haveVoted+"</p>"),a.secondsRemaining>0&&(c+="<h6 class='time'>"+RS3.polls.calculateReturnString(a.secondsRemaining)+" "+pollLoc_remaining+"</h6>"),a.playerAlreadyVoted&&(c+="<p class='yourVote'>= "+pollLoc_yourVote,a.canPlayerVote&&(c+=" (<a class='changeVote' href='vote.ws?id="+b+"'>"+pollLoc_change+"</a>)"),c+="</p>"),c},generateResultsPane:function(a,b){var c=a.pollDetails[0].options.length,d="",e=0;if(a.playerAlreadyVoted||0==a.status||!a.canPlayerVote){d+="<h5>"+pollLoc_results+"</h5><ul class='poll'>";for(var f=0;f<c;f++)e=a.pollDetails[0].options[f].optionPercentage,d+="<li class='pollsVoteTitle'>"+a.pollDetails[0].options[f].optionName+"</li>",d+="<li class='pollsVoteBar clear ",a.pollDetails[0].options[f].voted&&(d+="votedAnswer"),d+="'><div class='voteBarFill' style='width: "+e+"%'></div><p class='voteStats'",e>80&&(d+="style='right: "+(100-e)+"%' "),d+=">("+a.pollDetails[0].options[f].optionTotal+" votes) "+a.pollDetails[0].options[f].optionPercentage+"%</p></li>";d+="</ul>"}else{d+="<h5>"+pollLoc_options+"</h5><form action='confirmation.ws' method='post' class='voteForm'><input type='hidden' name='id' value='"+b+"'><ul class='poll'>";for(var f=0;f<c;f++)d+="<li><input class='htmlRadio' type='radio' name='question0' id='answer"+b+"-0-"+f+"' value='"+f+"' required /><label class='answerLabel' for='answer"+b+"-0-"+f+"'><span class='radio'></span><span class='text'>"+a.pollDetails[0].options[f].optionName+"</span><span class='hint'><div class='pollToolTip'>"+a.description[f]+"</div></span></label></li>";d+='</ul><div class="btnWrap"><div class="btn"><div class="btnRight"><input type="submit" value="'+pollLoc_votenow+'" name="Vote Now" class="voteButton" /></div></div></div></form>'}return d},drawErrorPane:function(a,b){if($(".pollError").removeClass("showElement"),$("#pollDetails"+a).length>0)$("#pollDetails"+a).addClass("showElement");else{var c="<article class='pollMessage pollError' id='pollDetails"+a+"'><p class='messageText'>";switch(b){case 0:c+=pollLoc_alreadyVoted+" <a href='results.ws?id="+a+"'>"+pollLoc_viewCurrent+"</a>";break;case 1:c+=pollLoc_sorryMember+" <a href='"+pollLoc_memberUrl+"/members_benefits'>"+pollLoc_becomeMember+"</a> "+pollLoc_toCast;break;case 2:case 9:case 10:case 11:c+=pollLoc_sorryNotEligible;break;case 3:c+=pollLoc_sorryExperienced;break;case 5:c+=pollLoc_sorryClosed+" <a href='results.ws?id="+a+"'>"+pollLoc_viewCurrent+"</a>.";break;case 12:c+=pollLoc_sorryExperienced;break;case 20:c+=pollLoc_sorryLanguage;break;default:c+=pollLoc_sorryError}c+="</p></article>",$("#pollTab"+a).append(c),setTimeout(function(){$("#pollDetails"+a).addClass("showElement")},1)}},drawHiddenMessagePane:function(a){var b="<article class='pollMessage pollHidden' id='pollDetails"+a+"'><p class='messageText'>"+pollLoc_resultsHidden+"</p></article>";$("#pollTab"+a).append(b),setTimeout(function(){$("#pollDetails"+a).addClass("showElement")},1)},onPageSubmit:function(){$(".voteForm").submit(function(a){a.preventDefault();var b=$(this),c=b.find("input[name='id']").val(),d=b.serialize();$("input[name='question0']:checked").length>0&&$.ajax({dataType:"jsonp",url:pollUrl+"/postPollVote.json?"+d,timeout:3e3,success:function(a){$("#pollTab"+a.pollID).addClass("pollTab--voted");var b=$("#pollDetails"+a.pollID+" .pollDetailsRight"),d=$("#pollDetails"+a.pollID+" .pollDetailsLeft");b.html("<p>loading...</p>"),$.ajax({dataType:"jsonp",url:pollUrl+"/pollResults.json?id="+a.pollID,timeout:3e3,success:function(e){if(e.pollDetails[0].options[0].hidden&&e.playerAlreadyVoted)$("#pollDetails"+a.pollID).remove(),RS3.polls.drawHiddenMessagePane(c);else{var f=RS3.polls.generateResultsPane(e,a.pollID),g=RS3.polls.generateDetailsPane(e,a.pollID);b.html(f),d.html(g)}},fail:function(){RS3.polls.drawErrorPane(c,-1)},error:function(){RS3.polls.drawErrorPane(c,-1)}})},fail:function(){RS3.polls.drawErrorPane(c,-1)},error:function(){RS3.polls.drawErrorPane(c,-1)}})})},init:function(){$(".pollExpand").on("click",function(a){if(loggedIn>0){a.preventDefault();var b=this.getAttribute("data-pollid");RS3.polls.drawPollResults(b)}})}},RS3.offerwall={callSonic:function(){$("#offerwallBox").append('<iframe id="offerWallFrame" frameborder="0" src="https://www.supersonicads.com/delivery/panel.php?noDirectPayments=1&'+coreWallParams+"&custom_button="+supersonicButton+'"></iframe>')},callPeanut:function(){$("#offerwallBox").append('<iframe src="https://www.peanutlabs.com/userGreeting.php?'+coreWallParams+'" width="950px" height="533px" id="offerWallFrame" frameborder="0" scrolling="yes"></iframe>')},callSuperRewards:function(){$("#offerwallBox").append('<iframe src="https://wall.superrewards.com/super/offers?'+coreWallParams+'" width="950px" id="offerWallFrame" frameborder="0" scrolling="no"></iframe>')},drawError:function(){$("#offerwallBox").append("<p>"+offerwallErrorMessage+"</p>")},init:function(){switch("game"==wallOrigin?$("#closeWall").on("click",function(a){a.preventDefault(),document.location=unshim+"?closeBilling=1"}):"store"==wallOrigin&&$("#closeWall").on("click",function(a){a.preventDefault(),document.domain="runescape.com",window.parent.$("#closeBillingWindow").click()}),wallProvider){case supersonicWallId:""==supersonicButton?this.drawError():this.callSonic();break;case peanutLabsWallId:this.callPeanut();break;case superRewardsWallId:this.callSuperRewards();break;default:this.drawError()}}},RS3.support={init:function(){function a(){var a=!!navigator.cookieEnabled;return"undefined"!=typeof navigator.cookieEnabled||a||(document.cookie="testcookie",a=document.cookie.indexOf("testcookie")!=-1),a}function b(a,b,c,d,e){try{var f=b.value.replace(/\r/g,"");e&&f.length>d&&(e.disabled=!0),f.length>d&&(1==a&&0==g&&(alert("{#alerttext}"),g=!0),b.value=f=f.substring(0,d)),c.childNodes[0].nodeValue=d-f.length}catch(a){}}function c(a,c,d,e,f,g,h){try{c.onkeyup=function(){b(a,c,d,e,g)},c.onkeydown=function(){b(a,c,d,e,g)},c.onkeypress=function(){b(a,c,d,e,g)},c.onmousemove=function(){b(a,c,d,e,g)},c.onchange=function(){b(!1,c,d,e,g)},f&&(f.onsubmit=function(){b(a,c,d,e,g)}),h&&f&&(h.onclick=function(){f.reset(),b(a,c,d,e,g)}),b(!1,c,d,e,g)}catch(a){}}function d(){if(!h){h=!0;try{for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++)e(a[b]);for(var c=document.getElementsByTagName("input"),b=0;b<c.length;b++)e(c[b])}catch(a){}}}function e(a){var b=new String("charlimit_text").length,d=a.id.toString();if(d.match(/^charlimit_text/i)&&d.length>=b){var e=d.substr(b),f=document.getElementById("charlimit_info"+e),g=document.getElementById("charlimit_count"+e),h=document.getElementById("charlimit_form"+e),i=document.getElementById("charlimit_submit"+e),j=document.getElementById("charlimit_reset"+e);if(f&&g){var k=!1;e.match(/^_msg/i)&&(k=!0);var l=parseInt(g.childNodes[0].nodeValue);c(k,a,g,l,h,i,j),f.style.display="inline"}}}$("#internet_type").change(function(){var a=$(this),b=a.parents(".formPartPair").find(".formAdditional");"0"===a.val()?(b.show(),$("#internet_type_other").attr("required","required")):(b.val("").hide(),$("#internet_type_other").removeAttr("required"))}),$('input[type="number"]').keydown(function(){"undefined"!=typeof $(this).attr("maxlength")&&this.value>=parseInt($(this).attr("maxlength"))&&(this.value=this.value.slice(0,parseInt($(this).attr("maxlength"))-1))});var f={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;if(this.versionSearchString=a[b].versionSearch||a[b].identity,c){if(c.indexOf(a[b].subString)!=-1)return a[b].identity}else if(d)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(b!=-1)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};f.init(),$("#cookies_status").val("FALSE"),a()&&$("#cookies_status").val("TRUE"),$("#browser_name").val(f.browser),$("#browser_version").val(f.version),$("#charlimit_text_msg").on("focus",function(){$("#charRemText").stop().fadeIn("slow")}).on("blur",function(){$("#charRemText").stop().fadeOut("slow")}),$("#emailAddress").on("focus",function(){$("#inputNotes").stop().fadeIn("slow")}).on("blur",function(){$("#inputNotes").stop().fadeOut("slow")});var g=!1,h=!1;window.addEventListener?window.addEventListener("load",d,!0):window.attachEvent?window.attachEvent("onload",d):window.onload=d}},RS3.authenticator={init:function(){$("#authenticator").parent().css("height","auto"),$(".dropTitle").click(function(){var a=$(this);a.toggleClass("active")})}},RS3.runelabs={updateLastSearch:function(){var a=$("#search-ideas"),b=$("#sortSelect");b.on("change",function(){$("#previousQuery").val(a.val())}),a.on("change",function(){a.val()&&""!==a.val()?$("#relevanceOption").prop("disabled",!1):(4==b.val()&&b.val(1),$("#relevanceOption").prop("disabled",!0)),$(".ideaFilter__details").prop("open")||$(".ideaFilter__details").hasClass("details--show")||b.val(4)}),a.on("keyup",function(a){a.preventDefault()})}},RS3.seasonpromo={getPromoPrices:function(){$.ajax({url:baseURL+"/billing_store.ajax?storeId="+promoStore,dataType:"json",timeout:3e3,success:function(a){$(".js_promo-price").html(a.results[0].localisedPrice),$(".js_usually-price").html(a.results[0].strikePrice)}})},init:function(){this.getPromoPrices()}},RS3.accountcreation={validationElements:{inputs:$("input[required]"),form:$("#createForm"),email:$("#createEmail"),password:$("#createPassword"),age:$("#createAge"),toggle:$("#showMyPassword")},validationTest:{browser:function(){var a=document.createElement("input");return a.setAttribute("type","number"),"text"!==a.type},email:function(){var a,b,c=RS3.accountcreation.validationElements.email,d=c[0],e=c.val(),f={};return a=errors.email.valid,b=d.validity.typeMismatch||0===e.length,f.invalid=b,b&&(f.error=a),f},password:function(){var a,b,c=RS3.accountcreation.validationElements.password,d=c[0],e=c.val(),f={};return a=d.validity.patternMismatch?errors.password.char:/^(.)\1*$/.test(e)?errors.password.repeated:/^[a-zA-Z\d]+$/.test(e)?0===e.length?errors.password.empty:errors.password.valid:errors.password.special,
b=d.validity.patternMismatch||/^(.)\1*$/.test(e)||0===e.length||!/^[a-zA-Z\d]+$/.test(e),f.invalid=b,b&&(f.error=a),f},age:function(){var a,b,c=RS3.accountcreation.validationElements.age,d=(c[0],c.val()),e={};return a=errors.age.valid,b=parseInt(d)<0||0===d.length||parseInt(d)>999,e.invalid=b,b&&(e.error=a),e}},switchType:function(a){var b;switch(a){case"email":b=RS3.accountcreation.validationTest.email();break;case"password":case"text":b=RS3.accountcreation.validationTest.password();break;case"number":b=RS3.accountcreation.validationTest.age()}return b},events:{keyup:function(){RS3.accountcreation.validationElements.inputs.on("input",function(a){var b=$(this);if(RS3.accountcreation.validationTest.browser()){var c=RS3.accountcreation.switchType(this.type);c.invalid?(b.removeClass("valid"),b[0].setCustomValidity(c.error)):(b.addClass("valid").removeClass("invalid"),b.siblings(".error").remove(),b[0].setCustomValidity(""))}else b.removeClass("invalid").siblings(".error").remove()})},submit:function(){var a=RS3.accountcreation.validationElements.form;a.on("submit",function(a){var b=a,c=$(".g-recaptcha");c.length&&"undefined"!=typeof grecaptcha&&(""==grecaptcha.getResponse()?(b.preventDefault(),c.addClass("g-recaptcha--error")):c.removeClass("g-recaptcha--error")),RS3.accountcreation.validationElements.inputs.each(function(a){var c=$(this),d=c.parent(),e=validation.switchType(this.type),f=$("<p />").addClass("error"),g=d.find(".error");e.invalid?(b.preventDefault(),1!=g.length&&(c.addClass("invalid"),f.text(e.error),d.prepend(f))):(c.removeClass("invalid"),g.remove())})})},password:function(){RS3.accountcreation.validationElements.toggle.on("change",function(a){var b=$(this),c=RS3.accountcreation.validationElements.password;b.prop("checked")?c.attr("type","text"):c.attr("type","password")})}},setupValidation:function(){this.events.keyup(),RS3.accountcreation.validationTest.browser()&&this.events.submit(),this.events.password()},gameOptionsTracking:function(){var a,b=new Image,c=new Image,d=$.cookie("JXFRONTUID");switch(b.src="https://www.googleadservices.com/pagead/conversion/1031096559/?value=0&label=LBGlCLm0lQcQ75HV6wM&guid=ON&script=1",affiliate){case"451":c.src="https://www.facebook.com/offsite_event.php?id=6013952264290&amp;value=0&amp;currency=USD";break;case"907":case"908":case"909":c.src="http://ad2games.com/convert/13140";break;case"934":a=$.cookie("bidalgouid"),c.src="http://www.massoftraffic.com/maca-webapp/app/biz/lead?channel=JagexRuneScape&appUniqueIdentifier="+d+"&uid="+a;break;case"935":a=$.cookie("dauupid"),c.src="https://srv.ministerial5.com/convnew/?t=6&p=1456&l=0&aid="+d+"&uid="+a;break;case"936":c.src="https://track.popmog.com/games/643/campaign_tracking?reg_id="+d}affiliate>=923&&affiliate<=932&&(c.src="https://www.facebook.com/offsite_event.php?id=6014296706039&amp;value=0&amp;currency=GBP")},gameOptions:function(){var a=$("#downloadBtn"),b=JXGLOBAL.user.os();if(a.length>0){if(b.isMac){var c=_.filter(JXGLOBAL.client,function(a){return a.platform.indexOf("OSX")>-1});$("#downloadBtn, #downloadBtnImage").attr("href",baseURL+"/downloads/"+c[0].filename+"?"+c[0].version),$("#downloadSize").html("0.3")}setTimeout(function(){window.location=a.attr("href")},2e3)}$("#accountCreated").length>0&&this.gameOptionsTracking()},init:function(a){switch(a){case"account-creation--create-account":this.setupValidation(),RS3.global.facebook.loadFacebookAPI(RS3.global.facebook.setUpEvents);break;case"account-creation--download":this.gameOptions()}}},RS3.downloadNxt={binaryPrefixUnits:[" B"," KiB"," MiB"," GiB"," TiB"," PiB"," EiB"],intToLocalisedString:function(a,b,c,d){var e="",f=",",g=".";if(0===d&&(f=".",g=","),2===d&&(g="Â "),b>0){var h=Math.pow(10,b);e=f+a%h,a=Math.floor(a/h)}for(;a>1e3;)e=a%1e3+e,a%1e3<10?e="00"+e:a%1e3<100&&(e="0"+e),e=g+e,a=Math.floor(a/1e3);return e=a+e},toBinaryPrefixFormat:function(a,b,c,d){for(var e=0,f=null;a>=1024&&e<this.binaryPrefixUnits.length-1&&(e++,!(a<1048576));)a=Math.floor(a/1024);return e>0?(a*=Math.pow(10,b),a=Math.floor(a/1024),f=this.intToLocalisedString(a,b,c,d)+this.binaryPrefixUnits[e]):f=this.intToLocalisedString(a,0,c,d)+this.binaryPrefixUnits[e],f},init:function(){$.getJSON(baseContentUrl+"/downloads-info/windows/RuneScape-Setup.exe.json",function(a){$("#download-nxt__size-win").append(RS3.downloadNxt.toBinaryPrefixFormat(a.size,2,!0,currentLang)),$("#download-win a").attr("href",baseContentUrl+"/downloads/windows/RuneScape-Setup.exe?crc="+a.crc),$("#method-logo-win").attr("href",baseContentUrl+"/downloads/windows/RuneScape-Setup.exe?crc="+a.crc)}),$.getJSON(baseContentUrl+"/downloads-info/osx/RuneScape.dmg.json",function(a){$("#download-nxt__size-mac").append(RS3.downloadNxt.toBinaryPrefixFormat(a.size,2,!0,currentLang)),$("#download-mac a").attr("href",baseContentUrl+"/downloads/osx/RuneScape.dmg?crc="+a.crc),$("#method-logo-mac").attr("href",baseContentUrl+"/downloads/osx/RuneScape.dmg?crc="+a.crc)}),$.getJSON(baseContentUrl+"/downloads/changelog.json",function(a){var b="";if(a.length>0){var c=0,d="";$("#download-version").append(a[0].version+" ("+$.datepicker.formatDate("dd M yy",new Date(a[0].date))+")"),b+="<dl>",$.each(a,function(a,e){3==c&&(d="nxt-client-updates__hidden-item"),b+="<dt class='"+d+"'>"+e.version+" ("+$.datepicker.formatDate("dd M yy",new Date(e.date))+")</dt>",e.changes.length>0&&(b+="<dd class='"+d+"'><ul>",$.each(e.changes,function(a,c){b+="<li>"+c+"</li>"}),b+="</ul></dd>"),c++}),b+="</dl>",0===currentLang&&$("#change-log").html(b)}}),$("#download-lin a").on("click",function(a){a.preventDefault(),$("#linux-instructions").toggleClass("download-nxt__linux-instr--show")}),$("#method-logo-lin").on("click",function(a){a.preventDefault(),$("#linux-instructions").toggleClass("download-nxt__linux-instr--show")});var a=$("#earlier-updates");a.on("click",function(b){b.preventDefault();var c=$(".nxt-client-updates__hidden-item"),d=6;c.length<d&&(d=c.length);for(var e=0;e<d;e++)c[e].className="";$("html,body").animate({scrollTop:a.offset().top},1e3),0==$(".nxt-client-updates__hidden-item").length&&a.remove()})}},RS3.newClient={binaryPrefixUnits:[" B"," KiB"," MiB"," GiB"," TiB"," PiB"," EiB"],intToLocalisedString:function(a,b,c,d){var e="",f=",",g=".";if(0===d&&(f=".",g=","),2===d&&(g="Â "),b>0){var h=Math.pow(10,b);e=f+a%h,a=Math.floor(a/h)}for(;a>1e3;)e=a%1e3+e,a%1e3<10?e="00"+e:a%1e3<100&&(e="0"+e),e=g+e,a=Math.floor(a/1e3);return e=a+e},toBinaryPrefixFormat:function(a,b,c,d){for(var e=0,f=null;a>=1024&&e<this.binaryPrefixUnits.length-1&&(e++,!(a<1048576));)a=Math.floor(a/1024);return e>0?(a*=Math.pow(10,b),a=Math.floor(a/1024),f=this.intToLocalisedString(a,b,c,d)+this.binaryPrefixUnits[e]):f=this.intToLocalisedString(a,0,c,d)+this.binaryPrefixUnits[e],f},init:function(){callJson&&($.getJSON(baseContentUrl+"/downloads-info/windows/RuneScape-Setup.exe.json",function(a){$("#size-win").text("("+RS3.newClient.toBinaryPrefixFormat(a.size,2,!0,currentLang)+")"),$("#download-win a").attr("href",baseContentUrl+"/downloads/windows/RuneScape-Setup.exe?crc="+a.crc),$("#method-logo-win").attr("href",baseContentUrl+"/downloads/windows/RuneScape-Setup.exe?crc="+a.crc)}),$.getJSON(baseContentUrl+"/downloads-info/osx/RuneScape.dmg.json",function(a){$("#size-mac").text("("+RS3.newClient.toBinaryPrefixFormat(a.size,2,!0,currentLang)+")"),$("#download-mac a").attr("href",baseContentUrl+"/downloads/osx/RuneScape.dmg?crc="+a.crc),$("#method-logo-mac").attr("href",baseContentUrl+"/downloads/osx/RuneScape.dmg?crc="+a.crc)}),$.getJSON(baseContentUrl+"/downloads/changelog.json",function(a){var b="";a.length>0&&($("#download-version").append(a[0].version+" ("+$.datepicker.formatDate("dd M yy",new Date(a[0].date))+")"),b+="<dl>",$.each(a,function(a,c){b+="<dt>"+c.version+" ("+$.datepicker.formatDate("dd M yy",new Date(c.date))+")</dt>",c.changes.length>0&&(b+="<dd><ul>",$.each(c.changes,function(a,c){b+="<li>"+c+"</li>"}),b+="</ul></dd>")}),b+="</dl>",0===currentLang&&$("#change-log").html(b))}),$("#download-lin a").on("click",function(a){a.preventDefault(),$("#linux-instructions").toggleClass("download-nxt__linux-instr--show")}),$("#method-logo-lin").on("click",function(a){a.preventDefault(),$("#linux-instructions").toggleClass("download-nxt__linux-instr--show")}))}},RS3.onLoad={init:function(){"use strict";RS3.tracking.init(),"undefined"!=typeof Modernizr&&(Modernizr.input.placeholder||$(".placeholder").placeholder());var a=document.getElementsByTagName("body")[0].id;switch("legacy"!=a&&RS3.global.init(),a){case"home":RS3.homepage.init();break;case"splash":RS3.splashpage.init();break;case"news":RS3.news.init();break;case"membersBenefits":RS3.membersBenefits.init();break;case"hiscore":RS3.hiscores.init();break;case"hiscore--summer2016":RS3.hiscoreSummer2016.init();break;case"accountAssoc":RS3.assoc.init();break;case"legacy":RS3.legacy.init();break;case"weblogin":case"weblogin loginiframe":RS3.weblogin.init();break;case"storeLoc":RS3.storeloc.init();break;case"bonds":RS3.bonds.init();break;case"combat":RS3.combat.init();break;case"goodwill":RS3.goodwill.init();break;case"runemetrics":case"premier":RS3.premierClub.init();break;case"companion":RS3.companion.init();break;case"topTrumps":RS3.topTrumps.init();break;case"gamePage":RS3.gamePage.init();break;case"game-applet":RS3.gamePageBrowser.init();break;case"grandexchange":RS3.grandExchange.init();break;case"newclient":RS3.newClient.init();break;case"download-nxt-page":RS3.downloadNxt.init();break;case"polls":RS3.polls.init();break;case"offerwall":RS3.offerwall.init();break;case"support":case"support-new":RS3.support.init();break;case"authenticator":RS3.authenticator.init();break;case"player-proposal--ideas":RS3.global.detailsElement(),RS3.runelabs.updateLastSearch();break;case"season-promo":RS3.seasonpromo.init();break;case"account-creation--create-account":case"account-creation--download":RS3.accountcreation.init(a)}}},$(document).ready(RS3.onLoad.init());