function refreshCaptcha(e,t){t||(t="index.php?option=com_rsform&task=captcha&componentId="+e),document.getElementById("captcha"+e).src=t+"&"+Math.random(),document.getElementById("captchaTxt"+e).value="",document.getElementById("captchaTxt"+e).focus()}function number_format(e,t,n,r){var o=e,a=t;o=isFinite(+o)?+o:0,a=isFinite(+a)?Math.abs(a):0;var s,l,m="undefined"==typeof r?",":r,c="undefined"==typeof n?".":n,i=a>0?o.toFixed(a):Math.round(o).toFixed(a),f=Math.abs(o).toFixed(a);return f>=1e3?(s=f.split(/\D/),l=s[0].length%3||3,s[0]=i.slice(0,l+(0>o))+s[0].slice(l).replace(/(\d{3})/g,m+"$1"),i=s.join(c)):i=i.replace(".",c),i}function buildXmlHttp(){var e;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){return alert("Your browser does not support AJAX!"),!1}}}return e}function ajaxValidation(e,t){try{e.elements.length}catch(n){e=this}var r=buildXmlHttp(),o="";"undefined"!=typeof rsfp_ajax_root&&(o=rsfp_ajax_root+"/"),o+="index.php?option=com_rsform&task=ajaxValidate",t&&(o+="&page="+t);var a=new Array,s=new Array,l=!1,m=0;for(d=0;d<e.elements.length;d++)if(e.elements[d].name&&0!=e.elements[d].name.length&&!("checkbox"==e.elements[d].type&&0==e.elements[d].checked||"radio"==e.elements[d].type&&0==e.elements[d].checked))if("submit"==e.elements[d].type&&(s.push(e.elements[d]),e.elements[d].disabled=!0),"select-multiple"!=e.elements[d].type)"form[formId]"==e.elements[d].name&&(m=e.elements[d].value),a.push(e.elements[d].name+"="+encodeURIComponent(e.elements[d].value));else for(var c=0;c<e.elements[d].options.length;c++)e.elements[d].options[c].selected&&a.push(e.elements[d].name+"="+encodeURIComponent(e.elements[d].options[c].value));"function"==typeof ajaxExtraValidationScript[m]&&ajaxExtraValidationScript[m]("beforeSend",m,{url:o,params:a}),a=a.join("&"),r.open("POST",o,!1),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("Content-length",a.length),r.setRequestHeader("Connection","close"),r.send(a);var l=!0;if(-1!=r.responseText.indexOf("\n")){for(var i=r.responseText.split("\n"),f=i[0].split(","),d=0;d<f.length;d++)!isNaN(parseInt(f[d]))&&document.getElementById("component"+f[d])&&(document.getElementById("component"+f[d]).className="formNoError");for(var f=i[1].split(","),d=0;d<f.length;d++)!isNaN(parseInt(f[d]))&&document.getElementById("component"+f[d])&&(document.getElementById("component"+f[d]).className="formError",l=!1);4==i.length&&(t=parseInt(i[2])-1,totalPages=parseInt(i[3]),rsfp_changePage(m,t,totalPages,!1)),"function"==typeof ajaxExtraValidationScript[m]&&ajaxExtraValidationScript[m]("afterSend",m,{url:o,params:a,response:i})}for(var d=0;d<s.length;d++)s[d].disabled=!1;if(0==l&&document.getElementById("rsform_error_"+m))try{document.getElementById("rsform_error_"+m).style.display="block"}catch(n){}if(1==l)try{document.getElementById("rsform_error_"+m).style.display="none"}catch(n){}return l}function rsfp_addEvent(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1),!0;if(e.attachEvent){var r=e.attachEvent("on"+t,n);return r}return!1}function rsfp_getForm(e){for(var t=document.getElementsByName("form[formId]"),n=0;n<t.length;n++)if(parseInt(t[n].value)==parseInt(e)){var r=t[n].parentNode;if("FORM"==r.tagName||"FORM"==r.nodeName)return r;for(;r.parentNode;)if(r=r.parentNode,"FORM"==r.tagName||"FORM"==r.nodeName)return r}}function rsfp_verifyChecked(e,t,n){if(isChecked=!1,form=rsfp_getForm(e),"undefined"!=typeof form)e:for(var r=0;r<form.elements.length;r++){var o=form.elements[r],a=o.tagName||o.nodeName;switch(a){case"INPUT":if(o.type)switch(o.type.toUpperCase()){case"RADIO":if(!o.name||o.name!="form["+t+"]")continue;if(1==o.checked&&o.value==n){isChecked=!0;break e}break;case"CHECKBOX":if(!o.name||o.name!="form["+t+"][]")continue;if(1==o.checked&&o.value==n){isChecked=!0;break e}}break;case"SELECT":if(!o.name||o.name!="form["+t+"][]")continue;if(o.options)for(var s=0;s<o.options.length;s++)if(o.options[s].selected&&o.options[s].value==n){isChecked=!0;break e}}}return isChecked}function rsfp_addCondition(e,t,n){if(form=rsfp_getForm(e),"undefined"!=typeof form)for(var r=0;r<form.elements.length;r++){var o=form.elements[r];!o.name||o.name!="form["+t+"]"&&o.name!="form["+t+"][]"||(rsfp_addEvent(o,"click",function(){n()}),rsfp_addEvent(o,"change",function(){n()}))}}function rsfp_getBlock(e,t){if(form=rsfp_getForm(e),"undefined"!=typeof form&&(blocks=getElementsByClassName("rsform-block")))for(i=0;i<blocks.length;i++){var n=blocks[i].className.split(" ");for(c=0;c<n.length;c++)if(n[c]=="rsform-block-"+t){if(blocks[i].parentNode){if(current_block=blocks[i],current_block==form)return[blocks[i]];for(;current_block.parentNode;)if(current_block=current_block.parentNode,current_block==form)return[blocks[i]]}return[blocks[i]]}}}function rsfp_getFieldsByName(e,t){form=rsfp_getForm(e);var n=new Array;if("undefined"!=typeof form)for(var r=0;r<form.elements.length;r++){var o=form.elements[r];if(pushed=!1,!o.name||o.name!="form["+t+"]"&&o.name!="form["+t+"][]"||(n.push(o),pushed=!0),pushed){if(o.id&&o.id.indexOf("txtcal")>-1){var a=o.id.replace("txtcal","");n.push(document.getElementById("btn"+a))}for(var s=form.getElementsByTagName("label"),l=0;l<s.length;l++)s[l].htmlFor&&s[l].htmlFor==o.id&&n.push(s[l])}}return n}function rsfp_setDisplay(e,t){for(i=0;i<e.length;i++)e[i].style.display=t}var ajaxExtraValidationScript={},getElementsByClassName=function(e,t,n){return(getElementsByClassName=document.getElementsByClassName?function(e,t,n){n=n||document;for(var r,o=n.getElementsByClassName(e),a=t?new RegExp("\\b"+t+"\\b","i"):null,s=[],l=0,m=o.length;m>l;l+=1)r=o[l],(!a||a.test(r.nodeName))&&s.push(r);return s}:document.evaluate?function(e,t,n){t=t||"*",n=n||document;for(var r,o,a=e.split(" "),s="",l="http://www.w3.org/1999/xhtml",m=document.documentElement.namespaceURI===l?l:null,c=[],i=0,f=a.length;f>i;i+=1)s+="[contains(concat(' ', @class, ' '), ' "+a[i]+" ')]";try{r=document.evaluate(".//"+t+s,n,m,0,null)}catch(d){r=document.evaluate(".//"+t+s,n,null,0,null)}for(;o=r.iterateNext();)c.push(o);return c}:function(e,t,n){t=t||"*",n=n||document;for(var r,o,a=e.split(" "),s=[],l="*"===t&&n.all?n.all:n.getElementsByTagName(t),m=[],c=0,i=a.length;i>c;c+=1)s.push(new RegExp("(^|\\s)"+a[c]+"(\\s|$)"));for(var f=0,d=l.length;d>f;f+=1){r=l[f],o=!1;for(var p=0,u=s.length;u>p&&(o=s[p].test(r.className),o);p+=1);o&&m.push(r)}return m})(e,t,n)};