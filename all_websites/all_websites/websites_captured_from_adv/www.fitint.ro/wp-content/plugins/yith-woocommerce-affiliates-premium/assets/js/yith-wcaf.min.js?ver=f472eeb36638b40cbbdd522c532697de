jQuery(function(b){function q(){return{formatMatches:function(a){return 1===a?yith_wcaf.labels.select2_i18n_matches_1:yith_wcaf.labels.select2_i18n_matches_n.replace("%qty%",a)},formatNoMatches:function(){return yith_wcaf.labels.select2_i18n_no_matches},formatAjaxError:function(a,d,c){return yith_wcaf.labels.select2_i18n_ajax_error},formatInputTooShort:function(a,d){var c=d-a.length;return 1===c?yith_wcaf.labels.select2_i18n_input_too_short_1:yith_wcaf.labels.select2_i18n_input_too_short_n.replace("%qty%",
		c)},formatInputTooLong:function(a,d){var c=a.length-d;return 1===c?yith_wcaf.labels.select2_i18n_input_too_long_1:yith_wcaf.labels.select2_i18n_input_too_long_n.replace("%qty%",c)},formatSelectionTooBig:function(a){return 1===a?yith_wcaf.labels.select2_i18n_selection_too_long_1:yith_wcaf.labels.select2_i18n_selection_too_long_n.replace("%qty%",a)},formatLoadMore:function(a){return yith_wcaf.labels.select2_i18n_load_more},formatSearching:function(){return yith_wcaf.labels.select2_i18n_searching}}}
	function r(a,d){var c=a.data("tip");d=d?d:"bottom";var e=b('<span class="yith_wcaf_tooltip"></span>');"undefined"!=typeof c&&c&&!a.find(".yith_wcaf_tooltip").length&&(e.addClass(d),a.append(e.html("<span>"+c+"</span>")))}function m(a,d){var c=d.find("#first_name"),e=d.find("#last_name"),f=d.find("#company"),g=d.find("#vat"),k=d.find("#cif");"business"===a?(c.closest("p").hide(),e.closest("p").hide(),k.closest("p").hide(),f.closest("p").show(),g.closest("p").show()):(c.closest("p").show(),e.closest("p").show(),
		k.closest("p").show(),f.closest("p").hide(),g.closest("p").hide())}function n(a){var d=a.closest("form"),c=d.find('input[type="submit"]'),e=a.attr("name"),f=a.val();a=a.closest("p");a.hasClass("validate-required")&&!f?a.addClass("yith-field-required")&&c.length&&c.addClass("disabled").prop("disabled",!0):"withdraw_from"!==e&&"withdraw_to"!==e||f.match(/[0-9]{4}-[0-9]{2}-[0-9]{2}/)?"payment_email"!==e||f.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)?(a.removeClass("yith-field-required"),c.length&&
	!d.find(".yith-field-required").length&&c.removeClass("disabled").prop("disabled",!1)):a.addClass("yith-field-required")&&c.length&&c.addClass("disabled").prop("disabled",!0):a.addClass("yith-field-required")&&c.length&&c.addClass("disabled").prop("disabled",!0)}function p(a,d){a.on("click",function(c){c.preventDefault();"function"===typeof d&&(d=d(b(this),c));console.log(d);0<d.length&&(d.is("input")?(navigator.userAgent.match(/ipad|iphone/i)?d.get(0).setSelectionRange(0,9999):d.select(),document.execCommand("copy")):
		(c=b("<input/>",{val:d.text(),type:"text"}),b("body").append(c),navigator.userAgent.match(/ipad|iphone/i)?c.get(0).setSelectionRange(0,9999):c.select(),document.execCommand("copy"),c.remove()),b(document).triggerHandler("yith_wcaf_hide_link_copied_alert")||alert(yith_wcaf.labels.link_copied_message))})}b.fn.yith_wcaf_dashboard_commissions=function(){var a=b(this);a.find(":input.wc-product-search").filter(":not(.enhanced)").each(function(){var d={allowClear:!!b(this).data("allow_clear"),placeholder:b(this).data("placeholder"),
		minimumInputLength:b(this).data("minimum_input_length")?b(this).data("minimum_input_length"):"3",escapeMarkup:function(c){return c},ajax:{url:yith_wcaf.ajax_url,dataType:"json",quietMillis:250,data:function(c,e){return{term:c,action:"yith_wcaf_json_search_products_and_variations",security:yith_wcaf.search_products_nonce}},results:function(c,e){var f=[];c&&b.each(c,function(g,k){f.push({id:g,text:k})});return{results:f}},cache:!0},multiple:!1,initSelection:function(c,e){var f={id:c.val(),text:c.attr("data-selected")};
			return e(f)}};d=b.extend(d,q());b(this).select2(d).addClass("enhanced")});a.find(".datepicker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,beforeShow:function(d,c){b("#ui-datepicker-div").removeClass(function(){return b("input").get(0).id}).addClass("yith-wcaf-datepicker")}})};b.fn.yith_wcaf_dashboard_clicks=function(){b(this).find(".datepicker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,beforeShow:function(a,d){b("#ui-datepicker-div").removeClass(function(){return b("input").get(0).id}).addClass("yith-wcaf-datepicker")}})};
	b.fn.yith_wcaf_dashboard_payments=function(){b(this).find(".datepicker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,beforeShow:function(a,d){b("#ui-datepicker-div").removeClass(function(){return b("input").get(0).id}).addClass("yith-wcaf-datepicker")}})};b.fn.yith_wcaf_dashboard_withdraw=function(){var a=b(this),d=a.find("#withdraw_from"),c=a.find("#withdraw_to"),e=a.find("#billing_country"),f=a.find('[name="type"]'),g=a.find(":input"),k=a.find("form"),t=a.find(".invoice-mode-radio");
		d.add(c).on("change",function(){var h=d.val(),l=c.val();h&&l&&b.ajax({type:"POST",url:yith_wcaf.ajax_url,data:{action:"get_withdraw_amount",withdraw_from:h,withdraw_to:l,security:yith_wcaf.get_withdraw_amount},beforeSend:function(){a.find(".information-panel").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){a.find(".information-panel").unblock()},success:function(u){a.find(".withdraw-current-total").html(u)},dataType:"html"})});a.find(".datepicker").datepicker({dateFormat:"yy-mm-dd",
			numberOfMonths:1,showButtonPanel:!0,beforeShow:function(h,l){b("#ui-datepicker-div").removeClass(function(){return b("input").get(0).id}).addClass("yith-wcaf-datepicker")}});f.on("change",function(){var h=f.filter(":checked").val();m(h,a)}).change();t.on("change",function(){var h=b(this);h.closest("ul.invoice-modes").find(".invoice-mode").slideUp();h.closest("li").find(".invoice-mode").slideDown()}).not(":checked").closest("li").find(".invoice-mode").hide();e.trigger("change");g.on("blur change",
			function(){n(b(this))});k.on("submit",function(){g.filter(":visible").blur();if(g.closest("p.form-row").filter(".yith-field-required").length)return!1})};b.fn.yith_wcaf_dashboard_coupons=function(){var a=b(this);r(a.find(".help_tip"));p(a.find(".copy-trigger"),function(d){return d.parents("td").find(".copy-target")})};b.fn.yith_wcaf_generate_link=function(){var a=b(this);p(a.find(".copy-trigger"),function(d){return d.parents("p").find(".copy-target")})};b.fn.yith_wcaf_registration_form=function(){var a=
		b(this),d=a.find("#how_promote"),c=a.find("#custom_promote").closest(".form-row");d.length&&d.on("change",function(){"others"===b(this).val()?c.show():c.hide()}).change()};b.fn.yith_wcaf_set_referrer=function(){var a=b(this);a.on("click","a.show-referrer-form",function(d){d.preventDefault();a.find("form").slideToggle()});a.on("submit","form.referrer-form",function(d){var c=b(this),e={action:"yith_wcaf_set_referrer",referrer_token:c.find('input[name="referrer_code"]').val(),security:yith_wcaf.set_referrer_nonce};
		d.preventDefault();c.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});b.ajax({type:"POST",url:yith_wcaf.ajax_url,data:e,success:function(f){b(".woocommerce-error, .woocommerce-message").remove();c.removeClass("processing").unblock();f&&(c.before(f).find('input[name="referrer_code"]').prop("disabled"),c.slideUp());b(document).trigger("yith_wcaf_referrer_set")},dataType:"html"});return!1})};b.fn.yith_wcaf_settings=function(){var a=b(this),d=a.find('[name="type"]'),
		c=a.find("form"),e=c.find(":input");d.length&&d.on("change",function(){var f=d.filter(":checked").val();m(f,a)}).change();e.on("blur change",function(){n(b(this))});c.on("submit",function(){e.filter(":visible").blur();if(e.closest("p.form-row").filter(".yith-field-required").length)return!1})};b.yith_wcaf_set_cookies=function(){if(yith_wcaf.set_cookie_via_ajax){var a=new URLSearchParams(window.location.search);a.has(yith_wcaf.referral_var)&&b.get(yith_wcaf.ajax_url+"?action=yith_wcaf_ajax_set_cookie&"+
		yith_wcaf.referral_var+"="+a.get(yith_wcaf.referral_var))}};b(".yith-wcaf-commissions").yith_wcaf_dashboard_commissions();b(".yith-wcaf-clicks").yith_wcaf_dashboard_clicks();b(".yith-wcaf-payments").yith_wcaf_dashboard_payments();b(".yith-wcaf-withdraw").yith_wcaf_dashboard_withdraw();b(".yith-wcaf-coupons").yith_wcaf_dashboard_coupons();b(".yith-wcaf-set-referrer").yith_wcaf_set_referrer();b(".yith-wcaf-link-generator").yith_wcaf_generate_link();b(".yith-wcaf-settings").yith_wcaf_settings();b(".yith-wcaf-registration-form").add(".woocommerce-form-register").add(".yith-wcaf-settings").yith_wcaf_registration_form();
	b.yith_wcaf_set_cookies()});