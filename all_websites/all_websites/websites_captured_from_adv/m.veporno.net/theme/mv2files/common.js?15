window.vars={};var hintTimer=0;var searchDef=false;var $headerLogo=null;var $topSearchField=null;var $topSearchSubmit=null;var $clearSearchButton=null;var $footerBuffer=null;var $fadeScreen=null;var $sticker=null;var $leftPanel=null;var $leftPanelInner=null;var $sideMenuProfileBlock=null;var $sideMenuProfileMenu=null;var $sideMenuLanguagesToggler=null;var $sideMenuLanguagesList=null;var $headerSearchButton=null;var $topMenu=null;var $leftHandMenu=null;var $toolTip=null;var $searchForm=null;var $microphoneButton=null;var recognition;$(function(){$headerLogo=$('header .logo img');$topSearchField=$('#search_text');$topSearchSubmit=$('#search_submit');$clearSearchButton=$('#cleartext');$footerBuffer=$('.footer-buffer');$fadeScreen=$('#fadescreen');$sticker=$('#header_menu_button');$leftPanel=$('#left_menu');$leftPanelInner=$('#left_menu .left-menu-inner');$sideMenuProfileBlock=$('#left_menu .profile.logined');$sideMenuProfileMenu=$("#left_menu .under-profile");$sideMenuLanguagesToggler=$("#languages_toggle .toggler");$sideMenuLanguagesList=$("#languages_toggle ul");$headerSearchButton=$('#header_search_button');$topMenu=$('.top_menu');$leftHandMenu=$('#left_hand');$toolTip=$('.tooltip');$searchForm=$('#search_form');$microphoneButton=$('#microphone');speechRecognitionInit();changeImagesRetina();footerBufferHeightInit();topSearchControlsInit();oldDeviceCssInit();sideMenuInit();sideMenuSizesInit();$sideMenuProfileBlock.on('click',function(e){e.preventDefault();sideMenuProfileSectionToggle();});$sideMenuLanguagesToggler.on('click',function(e){e.preventDefault();sideMenuLanguagesToggle();});$topSearchField.on('keyup',function(){topSearchControlsInit();});$topSearchField.on('change',function(){topSearchControlsInit();});$clearSearchButton.on('click',function(e){e.preventDefault();$topSearchField.val('');topSearchControlsInit();});$headerSearchButton.on('click',function(e){e.preventDefault();topSearchToggle();});$(window).resize(function(){sideMenuSizesInit();});$(window).on("orientationchange",function(){sideMenuSizesInit();});});function getCookie(name){var cookie=" "+document.cookie;var search=" "+name+"=";var setStr=null;var offset=0;var end=0;if(cookie.length>0){offset=cookie.indexOf(search);if(offset!=-1){offset+=search.length;end=cookie.indexOf(";",offset);if(end==-1){end=cookie.length;}
setStr=unescape(cookie.substring(offset,end));}}
return(setStr);}
function setCookie(name,value,days,path,domain){if(!path){path='/';}
var cookieStr=name+'='+value+'; path='+path+';';if(days>0){var date=new Date();date.setTime(date.getTime()+(days*86400000));cookieStr+='; expires='+date.toGMTString()+';';}
if(domain){cookieStr+='domain='+domain+';';}
document.cookie=cookieStr;}
function speechRecognitionInit(){if(!('webkitSpeechRecognition'in window)){$microphoneButton.remove();}
else{$microphoneButton.css('display','block');recognition=new webkitSpeechRecognition();recognition.lang=$('html').attr('lang')?$('html').attr('lang'):'en';recognition.onend=function(){$microphoneButton.removeClass('active');};recognition.onresult=function(e){if(e.results.length>0){$topSearchField.val(e.results[0][0].transcript);$searchForm.submit();}}
$(document).on('click','#microphone',function(event){event.preventDefault();if($(this).hasClass('active')){return;}
recognition.start();$(this).addClass('active');});}}
function topSearchControlsInit(){if($topSearchField.val().length>1){$clearSearchButton.fadeIn(300);$topSearchSubmit.fadeIn(300);$microphoneButton.fadeOut(300);}else{$clearSearchButton.fadeOut(300);$topSearchSubmit.fadeOut(300);$microphoneButton.fadeIn(300);}}
function footerBufferHeightInit(){setTimeout(function(){$footerBuffer.css('height',$('footer').height());},200);}
function sideMenuProfileSectionToggle(){$sideMenuProfileBlock.toggleClass('opened');$sideMenuProfileMenu.stop().slideToggle(300);}
function sideMenuLanguagesToggle(){$sideMenuLanguagesToggler.toggleClass('opened');$sideMenuLanguagesList.stop().slideToggle(300);$leftPanel.animate({scrollTop:500},'500');}
function oldDeviceCssInit(){function isOldDevice(ua){ua=(ua||navigator.userAgent).toLowerCase();var androidRegex=/android\s([0-9\.]*)/;var iosRegex=/os\s([0-9\_^,]*)/;return androidRegex.test(ua)&&parseFloat(ua.match(androidRegex)[1])<4.4||iosRegex.test(ua)&&parseInt(ua.match(iosRegex)[1].replace('_','.'),10)<6;}
if(isOldDevice()){$('head').append('<link href="http://m.fxporn.net/theme/mv2files/oldDevicePictures.css" type="text/css" rel="stylesheet" />');$headerLogo.remove();$headerSearchButton.find('img').remove();$sticker.find('img').remove();}}
function topSearchToggle(){if($headerSearchButton.hasClass('opened')){$topMenu.stop(true,false).animate({marginTop:'-40px'},200);$headerSearchButton.removeClass('opened');}else{$headerSearchButton.addClass('opened');$topMenu.animate({marginTop:0},200);$headerSearchButton.addClass('opened');if($leftHandMenu.length){$leftPanel.animate({marginLeft:"-300px"},300);$fadeScreen.fadeOut(300);$sticker.removeClass('opened');$leftPanel.removeClass('visible');$toolTip.fadeOut();setTimeout(function(){bodyEnableScroll();},500);}else{$leftPanel.animate({width:0},200,function(){$leftPanel.removeClass('visible');$leftPanel.css('overflow','hidden');});$fadeScreen.fadeOut(300);if($topMenu.css('margin-top')=='0px'){$headerSearchButton.addClass('opened');}
$toolTip.fadeOut();setTimeout(function(){bodyEnableScroll();});}
$sticker.removeClass('opened');$topSearchField.focus();var searchQuery=$topSearchField.val();$topSearchField.val(searchQuery);}}
function sideMenuInit(){if($leftHandMenu.length){var hidePanel=function(){$leftPanel.animate({marginLeft:"-300px"},300);$fadeScreen.fadeOut(300);$sticker.removeClass('opened');$leftPanel.removeClass('visible');$toolTip.fadeOut();bodyEnableScroll();if($('.video_container').hasClass('started')){$('#video_thumb').hide();$('#video').css('display','block');}};function OpenMenu(){if($leftPanel.css("marginLeft")=='0px'){$leftPanel.animate({marginLeft:"-300px"},300);$fadeScreen.fadeOut(300);$sticker.removeClass('opened');$leftPanel.removeClass('visible');bodyEnableScroll();if($('.video_container').hasClass('started')){$('#video_thumb').hide();$('#video').css('display','block');}}else{$leftPanel.animate({marginLeft:"0"},300);$fadeScreen.fadeIn(300);$sticker.addClass('opened');$leftPanel.addClass('visible');$toolTip.fadeOut();setTimeout(function(){bodyDisableScroll();},500);if($('.video_container').hasClass('started')){$('#video_thumb').show();$('#video').css('display','none');}}}
$sticker.on('click',function(e){e.preventDefault();OpenMenu();if($leftPanel.hasClass('visible')){$sticker.addClass('opened');}else{$sticker.removeClass('opened');}});Hammer($leftPanel[0]).on('swipeleft',function(){hidePanel();});$fadeScreen.on('click',function(e){e.preventDefault();hidePanel();});}else{if($leftPanel.length){$leftPanel.css('width','auto');var $stickerWidth=$('#left_menu').width();if($stickerWidth<224){$stickerWidth=224;}
$leftPanel.css('width',0);var showPanel=function(){$leftPanel.animate({width:$stickerWidth},200,function(){$leftPanel.addClass('visible');$leftPanel.css('overflow-y','scroll');});$fadeScreen.fadeIn(300);$headerSearchButton.removeClass('opened');$leftPanel.css('overflow','scroll');setTimeout(function(){bodyDisableScroll();},500);if($('.video_container').hasClass('started')){$('#video_thumb').show();$('#video').css('display','none');}};var hidePanel=function(){$leftPanel.animate({width:0},200,function(){$leftPanel.removeClass('visible');$leftPanel.css('overflow','hidden');});$fadeScreen.fadeOut(300);if($topMenu.css('margin-top')=='0px'){$headerSearchButton.addClass('opened');}
$toolTip.fadeOut();setTimeout(function(){bodyEnableScroll();},500);if($('.video_container').hasClass('started')){$('#video_thumb').hide();$('#video').css('display','block');}};$fadeScreen.on('click',function(e){e.preventDefault();hidePanel();$sticker.removeClass('opened');$toolTip.fadeOut();});$sticker.on('click',function(e){e.preventDefault();if($leftPanel.hasClass('visible')){hidePanel();$sticker.removeClass('opened');}else{showPanel();$sticker.addClass('opened');}});Hammer($leftPanel[0]).on('swiperight',function(){hidePanel();$sticker.removeClass('opened');});Hammer($leftPanel[0]).on('swipeleft',function(){showPanel();$sticker.addClass('opened');});}}}
function sideMenuSizesInit(){$leftPanel.css('height',window.innerHeight);}
function bodyEnableScroll(){$('body').css('height','auto');$('html, body').css('overflow','auto');$('html, body').css('position','static');$('footer').show();}
function bodyDisableScroll(){$('body').css('height',window.innerHeight);$('html, body').css('overflow','hidden');$('html, body').css('position','fixed');$('footer').hide();}
function changeImagesRetina(){if(window.devicePixelRatio>1){var defaultImgSrc=$headerLogo.attr('src');var retinaImgSrc=defaultImgSrc.replace('.png','Retina.png')
$headerLogo.attr('src',retinaImgSrc);}}