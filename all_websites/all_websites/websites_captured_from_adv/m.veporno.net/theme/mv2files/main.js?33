var $screenshotsBlock=null;var $thumbsToggler=null;var $updateVideoPrivacySelect=null;var $updateVideoPrivacyLabel=null;var $updateVideoPrivacyPassword=null;var $updateVideoCategoriesMini=null;var $updateVideoSelectedCategoriesMini=null;var $video=null;var $videoContainer=null;var $videoThumbs=null;var $pictureThumbs=null;var $favPictureThumbs=null;var $sexChooseItems=null;var $searchHint=null;var $uploadInputFields=null;var $videoLoader=null;var $videoPlayButtons=null;var adsFrame=false;$(document).ready(function(){$screenshotsBlock=$('#screenshots_block');$thumbsToggler=$('#thumbs_toggler');$updateVideoPrivacySelect=$("#update_video_privacy");$updateVideoPrivacyLabel=$('#update_video_privacy_password_label');$updateVideoPrivacyPassword=$('#update_video_privacy_password');$updateVideoCategoriesMini=$("#update_video_categories_mini");$updateVideoSelectedCategoriesMini=$('#selected_mini_categories');$video=$('#video');$videoContainer=$('.video_container');$videoThumbs=$('.video_block .item .thumb_container');$pictureThumbs=$('.pictures_block .item .thumb_container');$favPictureThumbs=$('.favorites_block .pictures_block .item-container');$sexChooseItems=$('#categories_sex_choose a');$searchHint=$('#hint');$uploadInputFields=$('#uploadMobile .input_text, #uploadMobile .input_textarea, #uploadMobile .input_select, #uploadMobile .upload_video_submit');$videoLoader=$('#video_loader');$videoPlayButtons=$('.video_container .buttons .play, .video_container .buttons .playhd, .video_container .buttons .download, #screenshots_block .item a')
try{searchHintInit();thumbsOpen();thumbsInit();categoriesAnimateScrollInit();updateVideoFormInit();paginationInit();uploadVideoInit();videoControlsInit();galleryThumbsAutoHeight();}finally{}});$(window).resize(function(){galleryThumbsAutoHeight();});function thumbsOpen(){if(getCookie('thumbs')==1){$thumbsToggler.addClass('down');$screenshotsBlock.show();}}
function thumbsInit(){$thumbsToggler.click(function(e){e.preventDefault();if($thumbsToggler.hasClass('down')){$.ajax('/ajax.php?act=track_event&event=video_hide_thumbs_click&video_id='+js_vars.video_id);setCookie('thumbs',0,-1,'/movies');$thumbsToggler.removeClass('down');$screenshotsBlock.hide();}else{$.ajax('/ajax.php?act=track_event&event=video_show_thumbs_click&video_id='+js_vars.video_id);setCookie('thumbs',1,365,'/movies');$screenshotsBlock.show();$thumbsToggler.addClass('down');$('html, body').animate({scrollTop:$screenshotsBlock.offset().top-63},300);}});}
function categoriesAnimateScrollInit(){if(window.location.hash!=''){var target=window.location.hash;if(target=='#group_0'||target=='#group_1'||target=='#group_2'){var categoryOffset=$(target).offset().top-10;$('html, body').animate({scrollTop:categoryOffset},300);}
else if(target=='#type_categories_list'){var categoryOffset=$(target).offset().top-10;$('html, body').animate({scrollTop:categoryOffset},300);}}
$sexChooseItems.click(function(){var categoryName='.'+$(this).attr('data-rel');$("html, body").animate({scrollTop:$(categoryName).offset().top-10},'500');return false;});}
function updateVideoFormInit(){$updateVideoPrivacySelect.change(function(){if($updateVideoPrivacySelect.val()=='password'){$updateVideoPrivacyLabel.show();$updateVideoPrivacyPassword.show();}
else{$updateVideoPrivacyLabel.hide();$updateVideoPrivacyPassword.hide();}});$updateVideoCategoriesMini.change(function(){var selectedCat=$(this).val();$updateVideoSelectedCategoriesMini.show();$updateVideoSelectedCategoriesMini.append('<div class=\"item clearfix\">   <input class=\"cat_name\" type=\"text\" value=\"'+selectedCat+'\" disabled><a class=\"delete_cat\">Delete</a></div>');$updateVideoCategoriesMini.find('option[value=\''+selectedCat+'\']').remove();});$updateVideoSelectedCategoriesMini.on('click','.item .delete_cat',function(){var catName=$(this).parent().find('.cat_name').val();$('#upload_video_categories_mini').append('<option value=\"'+catName+'\">'+catName+'</option>');$('#update_video_categories_mini').append('<option value=\"'+catName+'\">'+catName+'</option>');$(this).parent().remove();});$("#update_video_categories").change(function(){if($(this).val()!='0'){$("#update_video_categories_mini").show();}
else{$("#update_video_categories_mini").hide();}});$('#update_video_title, #update_video_description, #update_video_captcha').keyup(function(){$(this).removeClass('witherror');});function updateVideoValidation(){var $updateVideoErrorMessage='';$('#greenMessage').addClass('hidden');$('#update_video_title').removeClass('witherror');$('#update_video_description').removeClass('witherror');$('#update_video_captcha').removeClass('witherror');if($('#update_video_title').val()==''){$updateVideoErrorMessage+='Fill the title!<br>';$('#update_video_title').addClass('witherror');}
if($('#update_video_description').val()==''){$updateVideoErrorMessage+='Fill the description!<br>';$('#update_video_description').addClass('witherror');}
if($('#update_video_captcha').val()==''){$updateVideoErrorMessage+='Fill the captcha!<br>';$('#update_video_captcha').addClass('witherror');}
if($updateVideoErrorMessage){$('#errorMessage').html($updateVideoErrorMessage);$('#errorMessage').show();$("html, body").animate({scrollTop:$('#errorMessage').offset().top-100},'500');return false;}
else{$('#errorMessage').hide();return true;}}
$('#update_video_form').submit(function(){if(updateVideoValidation()){$('#greenMessage').removeClass('hidden');$("html, body").animate({scrollTop:$('#greenMessage').offset().top-100},'500');}
return false;});$('#update_thumbs_block .item').on('click',function(e){e.preventDefault();$('#update_thumbs_block .item').removeClass('active');$(this).addClass('active');});}
function paginationInit(){$('#current_page').focusin(function(){$('.pagination').addClass('active');});$("body").click(function(event){if(event.target.className=='go'||event.target.id=='current_page'){return true;}
else{$('.pagination').removeClass('active');}});}
function uploadVideoInit(){$("#file").on('change',function(){if($(this).val()){$uploadInputFields.removeClass('inactive');$('#btnSubmit').removeAttr('disabled');}});$uploadInputFields.on('click',function(e){e.preventDefault();if($(this).hasClass('inactive')){$uploadInputFields.blur();$("#file").trigger('click');}});}
function videoControlsInit(){if(!$video.size()){return;}
var cl=new CanvasLoader('video_loader');cl.setColor('#ffffff');cl.setDiameter(60);cl.setDensity(10);cl.setRange(1.2);cl.setSpeed(1);cl.show();function videoMenu(show){if(show){$video.removeAttr("controls");$('.video_container .buttons').show();$('.video_container .side_buttons').show();}else{$video.attr("controls","controls");$('.video_container .buttons').hide();$('.video_container .side_buttons').hide();}}
$video.on('pause',function(e){if(this.seeking){return true;}
videoMenu(true);$videoLoader.css('display','none');});$video.on("play",function(e){var t=$(this);if(adsFrame){$('.pop-advertise').append(adsFrame);adsFrame=false;$('.pop-fade').fadeIn(200);$('.pop-advertise').fadeIn(200);this.pause();e.preventDefault();return false;}
videoMenu(false);if(!t.data('supported')){t.data('supported',true);t.on('suspend canplay playing seeked waiting seeking play loadstart pause',function(e){if(this.readyState>=3){$videoLoader.css('display','none');}else{$videoLoader.css('display','block');}});}});$video.on('error',function(){videoMenu(true);var t=$(this);if(t.data('supported')){return;}
$videoLoader.css('display','none');$('#video_thumb img').css('position','inherit')
$video.remove();$video=false;$.ajax({'url':'/ajax.php','data':{'act':'play_error','file':t.attr('src')}});});$('.play').click(function(e){if(!$video){return;}
e.preventDefault();$('#video').show();$('#video_thumb').hide();var t=$(this);var videoFile=t.attr('href');if(videoFile&&video[0]!='#'){if($video.attr('src')!=videoFile){$video.attr('src',videoFile);}}
$video[0].play();$.ajax('/ajax.php?act=track_event&event=video_play_click&video_id='+js_vars.video_id);});$('.pop-advertise .pop-close, .pop-fade, #continue_video_ads').click(function(){$('.pop-fade').hide();$('.pop-advertise').hide();$video[0].play();return false;});$('.video_container .buttons .download').click(function(){$.ajax('/ajax.php?act=track_event&event=video_download_click&video_id='+js_vars.video_id);});$('#screenshots_block .item a').click(function(e){var thumbId=$(this).closest('.item-container').index()+1;$.ajax('/ajax.php?act=track_event&event=video_play_click&video_id='+js_vars.video_id+'&thumb_id='+thumbId);});$('.video_container .side_buttons .share').click(function(){$.ajax('/ajax.php?act=track_event&event=video_share_click&video_id='+js_vars.video_id);$('#share_fade').fadeIn(200);$('#share_box').fadeIn(200);return false;});$('#share_fade, #share_box .close_sharebox').click(function(){$('#share_fade').fadeOut(200);$('#share_box').fadeOut(200);return false;});}
function galleryThumbsAutoHeight(){var videoThumbsWidth=$videoThumbs.width();var pictureThumbsWidth=$pictureThumbs.width();var videoWidth=$videoContainer.width();$videoThumbs.css('height',videoThumbsWidth*0.751724);$videoThumbs.find('img').css('max-height',videoThumbsWidth*0.751724);$pictureThumbs.css('height',pictureThumbsWidth*0.751724);$favPictureThumbs.css('height',pictureThumbsWidth*0.751724+56);$pictureThumbs.find('img').css('max-height',pictureThumbsWidth*0.751724);$pictureThumbs.find('img').css('max-width',pictureThumbsWidth);$video.css('height',videoWidth*0.748792);$videoContainer.find('#video_thumb img').css('height',videoWidth*0.748792);}
function searchHintInit(){$('#search_text').searchHint({ajaxUrl:'/ajax.php?act=search',addWordIcon:true,defList:searchDef,listWidthAdd:34});}
function hint(text){$searchHint.html(text).show();clearTimeout(hintTimer);hintTimer=setTimeout(function(){$searchHint.hide();},2000);}
function checkLoad(){if($video[0].readyState===4){$videoLoader.css('display','none');}else{setTimeout(checkLoad,100);}}